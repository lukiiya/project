define("controller/activity/award11x5",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"11选5加奖",className:"activity_11x5jj"},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),$("#betBtn").on("click",function(){g.isAndroidBrowser()&&g.isAndroid()?window.Jockey&&window.Jockey.send("GX11X5"):g.locationUrl("#gx11x5")})}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=(a("module/ui"),a("module/main")),i=a("view/activity/award11x5")}),define("controller/activity/award2x1",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"竞彩好礼",className:"activity_2x1"},c={IMG_PATH:IMG_PATH};g.setMain(a,b),g.setContent(h.content(c))}function f(){}b.init=c,b._init=d;var g=(a("module/common"),a("module/ui"),a("module/main")),h=a("view/activity/award2x1")}),define("controller/activity/awardJsk3",function(a,b){function c(a){j=parseInt(g.getUrlParam("webCalliOS"))||0,e(a),f()}function d(a){j=null}function e(a){var b={title:"快3加奖",className:"activity_k3jj"},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),!j&&g.isIosBrowser()&&g.isIos()&&$("#betBtn").hide(),$("#betBtn").on("click",function(){g.isAndroidBrowser()&&g.isAndroid()?window.Jockey&&window.Jockey.send("JSK3"):g.isIosBrowser()&&g.isIos()?window.webkit.messageHandlers.appDelegate.postMessage({name:"shaimi://bet/JSK3"}):g.locationUrl("#JSK3")})}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=(a("module/ui"),a("module/main")),i=a("view/activity/awardJsk3"),j=null}),define("controller/activity/awardSingle",function(a,b){function c(a){j=parseInt(g.getUrlParam("webCalliOS"))||0,e(a),f()}function d(a){j=null}function e(a){var b={title:"单关加奖",className:"activity_single_award"},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),!j&&g.isIosBrowser()&&g.isIos()&&$("#betBtn").hide(),$("#betBtn").on("click",function(){g.isAndroidBrowser()&&g.isAndroid()?window.Jockey&&window.Jockey.send("JCZQ"):g.isIosBrowser()&&g.isIos()?window.webkit.messageHandlers.appDelegate.postMessage({name:"shaimi://bet/JCZQ"}):g.locationUrl("#match&self=true&type=1")})}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=(a("module/ui"),a("module/main")),i=a("view/activity/awardSingle"),j=null}),define("controller/activity/awardSsq",function(a,b){function c(a){j=parseInt(g.getUrlParam("webCalliOS"))||0,e(a),f()}function d(a){j=null}function e(a){var b={title:"晒米场－双色球加奖",className:"activity_ssqjj"},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),!j&&g.isIosBrowser()&&g.isIos()&&$("#betBtn").hide(),$("#betBtn").on("click",function(){g.isAndroidBrowser()&&g.isAndroid()?window.Jockey&&window.Jockey.send("SSQ"):g.isIosBrowser()&&g.isIos()?window.webkit.messageHandlers.appDelegate.postMessage({name:"shaimi://bet/SSQ"}):g.locationUrl("#ssq")})}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=(a("module/ui"),a("module/main")),i=a("view/activity/awardSsq"),j=null}),define("controller/activity/betPresent",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"竞彩好礼",className:"activity_jingcaihaoli"},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),$("#rechargeCashBtn").on("click",function(){g.locationUrl("#charge&financeType=1"),window.Jockey&&window.Jockey.send("chargeCJ")}),$("#buyjczq").on("click",function(){g.locationUrl("#hotMatch"),window.Jockey&&window.Jockey.send("buyFBMatch")}),$("#trunplateBtn").on("click",function(){g.locationUrl("#activity/turnplate"),window.Jockey&&window.Jockey.send("luckDraw")}),$("#rechargeRiceBtn").on("click",function(){g.locationUrl("#charge&financeType=0"),window.Jockey&&window.Jockey.send("chargeML")})}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=(a("module/ui"),a("module/main")),i=a("view/activity/betPresent")}),define("controller/activity/christmas",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"晒米场－英超圣诞赛程投注手册",className:"activity_christmas"},c={IMG_PATH:IMG_PATH};if(i.setMain(a,b),i.setContent(j.content(c)),g.isWeixinBrowser()){var c={title:"英超圣诞赛程投注手册",link:location.href.replace(/[#\?].*/g,"")+"#activity/christmas",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/activity_christmas_share.jpg",desc:"投注竞彩足球加奖10.2%"};h.setShare(c)}}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=a("module/ui"),i=a("module/main"),j=a("view/activity/christmas")}),define("controller/activity/confederationsCup",function(a,b){function c(a){e(a),f()}function d(a){o=null}function e(a){var b={title:"联合会杯竞猜",className:"activity_FCC"},c={IMG_PATH:IMG_PATH};l.setMain(a,b),l.setContent(n.content(c)),$("#teamList li").on("click",function(){$("#teamList li").removeClass("active"),$(this).addClass("active"),o=parseInt($(this).attr("teamId"))}),$("#submitBtn").off().on("click",g),$("#newUser").on("click",function(){j.locationUrl("#my")}),$("#recharge").on("click",function(){j.locationUrl("#activity/betPresent")}),$("#award2x1").on("click",function(){j.locationUrl("#activity/award2x1")}),i()}function f(){h()}function g(){var a={teamId:o};return o?void m.guessWinner(a,function(a){return 0!=a.errCode?void k.showNotice(a.msg):(k.showNotice("您已投票成功"),setTimeout(h,1e3),void $("#teamList li").removeClass("active"))}):void k.showNotice("请选择一个球队")}function h(){var a={};m.guessInfo(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=b.teamGuessList||[],d=b.userGuessData||{},e=d.teamName||"无";$("#guessResult").html(e);for(var f=0;f<c.length;f++){var g=c[f].teamId,h=c[f].guessRate;$("#team"+g+" .progress_bar").css("width",h),$("#team"+g+" .percent").html(h)}d.teamId?($("#activeBtn").show(),$("#submitBtn").hide()):($("#submitBtn").show(),$("#activeBtn").hide())})}function i(){if(j.isWeixinBrowser()){var a={title:"联合会杯冠军竞猜 1888等你拿",link:location.href.replace(/[#\?].*/g,"")+"#activity/confederationsCup",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:"大家一起来竞猜冠军"};k.setShare(a)}}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/activity"),n=a("view/activity/confederationsCup"),o=null}),define("controller/activity/hongBao",function(a,b){function c(a){l.setHistoryBack("#home"),e(a),f(),g()}function d(a){clearTimeout(j.timer)}function e(a){var b={title:"100万红包",className:"Bonus"},c={IMG_PATH:IMG_PATH};n.setMain(a,b),n.setContent(q.content(c)),$("#hongBaoSubmit").on("click",k),$("#smsCodeBtn").on("click",j)}function f(){h(),i()}function g(){var a={imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/hongbao.png",desc:"有人@你领红包 立即到账"};m.setShare(a)}function h(){var a={activityNo:r};o.getActivityInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=trim(b.remark)||"";$("#remark").html(c)})}function i(){var a={};o.isReceiveHongBao(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||!1;if(b){var c={html:q.again()};m.showWindow(c),$("#windowBox .use_immediate").on("click",function(a){l.locationUrl("#home")})}})}function j(){var a=trim($("#mobile").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");var b={mobile:a};p.sendSmsCode(b,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("倒计时("+b+")"),j.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("重新获取").on("click",j)};c()})}function k(){var a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void m.showNotice("输入的验证码有误");var c={mobile:a,code:b};o.receiveHongBao(c,function(a){if(3==a.errCode){var b={html:q.again()};return m.showWindow(b),void $("#windowBox .use_immediate").on("click",function(a){l.locationUrl("#home")})}if(0!=a.errCode)return void m.showNotice(a.msg);var b={html:q.success()};m.showWindow(b),$("#windowBox .use_immediate").on("click",function(a){l.locationUrl("#home")})})}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=(a("cgi/user"),a("cgi/activity")),p=a("cgi/sms"),q=a("view/activity/hongBao"),r="5F5E100-BC614F"}),define("controller/activity/hongBao2017ChunJie",function(a,b){function c(a){q.setHistoryBack("#home"),e(a),f()}function d(a){clearTimeout(j.timer)}function e(a){var b={title:"2017春节红包",className:"activity_2017chunjie"},c={IMG_PATH:IMG_PATH};s.setMain(a,b),s.setContent(v.content(c))}function f(){g(),h()}function g(){var a={activityNo:w};t.getActivityInfo(a,function(a){if(0!=a.errCode)return void r.showNotice(a.msg);var b=a.data||{},c=trim(b.remark)||"";$("#remark").html(c)})}function h(){var a={IMG_PATH:IMG_PATH};t.isReceiveHongBao2017ChunJie(a,function(a){if(0!=a.errCode)return void r.showNotice(a.msg);var b=a.data||!1;b?($("#unReceivedImg").hide(),$("#receivedImg").show()):($("#receivedImg").hide(),$("#unReceivedImg").off().on("click",i).show())})}function i(){var a="",b="";if($("#validateMobile").length>0){if(a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"",!q.verifyMobile(a))return void r.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void r.showNotice("输入的验证码有误")}var c={mobile:a,code:b};t.receiveHongBao2017ChunJie(c,function(a){if(0==a.errCode)o(),h();else if(2==a.errCode)m();else if(4==a.errCode)k();else if(0!=a.errCode)return void r.showNotice(a.msg)})}function j(){var a=trim($("#mobile").val())||"";if(!q.verifyMobile(a))return void r.showNotice("输入的手机号码有误");var b={mobile:a};u.sendSmsCode(b,function(a){if(0!=a.errCode)return void r.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("倒计时("+b+")"),j.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("重新获取").on("click",j)};c()})}function k(){l();var a={html:v.validateMobileBox({IMG_PATH:IMG_PATH})};$("#pageContainer").append(v.chunjieMask(a)),$("#smsCodeBtn").on("click",j),$("#hongBaoSubmit").on("click",i),$("#closePopBtn").off().on("click",l)}function l(){$("#2017chunjieMask").remove()}function m(){n();var a={html:v.getRiceBox({IMG_PATH:IMG_PATH})};$("#pageContainer").append(v.chunjieMask(a)),$("#getRiceBtn").off().on("click",function(){q.locationUrl("#sign")}),$("#closePopBtn").off().on("click",n)}function n(){$("#2017chunjieMask").remove()}function o(){p();var a={html:v.getSuccessBox({IMG_PATH:IMG_PATH})};$("#pageContainer").append(v.chunjieMask(a)),$("#betBtn").on("click",function(a){q.locationUrl("#ticketFollow")}),$("#closePopBtn").off().on("click",p)}function p(){$("#2017chunjieMask").remove()}b.init=c,b._init=d;var q=a("module/common"),r=a("module/ui"),s=a("module/main"),t=(a("cgi/user"),a("cgi/activity")),u=a("cgi/sms"),v=a("view/activity/hongBao2017ChunJie"),w="5F5E103-BC6152"}),define("controller/activity/hongBao2018ChunJie",function(a,b){function c(a){n.setHistoryBack("#home"),e(a),f()}function d(a){clearTimeout(h.timer)}function e(a){var b={title:"2018春节红包",className:"activity_2018chunjie"};({IMG_PATH:IMG_PATH});p.setMain(a,b)}function f(){g()}function g(){var a={};q.getHongBao2018ChunJieInfo(a,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||{},c={info:b,IMG_PATH:IMG_PATH};if(p.setContent(r.content(c)),$("#startBtn").on("click",i),h(),n.isWeixinBrowser()){var c={title:"晒米场红包闹新春",link:location.href.replace(/[#\?].*/g,"")+"#activity/hongBao2018ChunJie",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/2018chunjie/2018chunjie_share.jpg",desc:"初一、初五、初七抢168现金红包，人人可抢"};o.setShare(c)}})}function h(){clearTimeout(h.timer);var a={pageNum:1,pageSize:8};q.getHongBao2018ChunJieList(a,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};if($("#rankList").html(r.rankList(c)),b.length>0){var d=function(){var a=$("#rankList"),b=a.find("li"),c=b.length;if(!(1>=c)){var e=b.eq(0),f=e.outerHeight(!0);e.animate({marginTop:-f},500,function(){e.appendTo(a).css({marginTop:0}),h.timer=setTimeout(d,5e3)})}};h.timer=setTimeout(d,5e3)}})}function i(){var a={};q.receiveHongBao2018ChunJie(a,function(a){var b=a.data||{};if(-1==a.errCode)j(b);else if(0==a.errCode)l(b),g();else if(0!=a.errCode)return void o.showNotice(a.msg)})}function j(a){k();var b={html:r.notStartBox({info:a})};$("#pageContainer").append(r.chunjieMask(b)),$("#closePopBtn").off().on("click",k)}function k(){$("#2018chunjieMask").remove()}function l(a){m();var b=n.isAndroid(),c={html:r.getSuccessBox({IMG_PATH:IMG_PATH,info:a,isAndroid:b})};$("#pageContainer").append(r.chunjieMask(c)),$("#checkBtn").on("click",function(a){n.isIosBrowser()&&n.isIos()?window.webkit.messageHandlers.appDelegate.postMessage({name:"shaimi://my"}):n.locationUrl("#myFinance")}),$("#closePopBtn").off().on("click",m)}function m(){$("#2018chunjieMask").remove()}b.init=c,b._init=d;var n=a("module/common");n.isAndroid()&&a("external/jockey");var o=a("module/ui"),p=a("module/main"),q=(a("cgi/user"),a("cgi/activity")),r=(a("cgi/sms"),a("view/activity/hongBao2018ChunJie"))}),define("controller/activity/nbaXsjxl",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"NBA新赛季巡礼",className:"activity_nbaQdxl"},c={IMG_PATH:IMG_PATH};if(i.setMain(a,b),i.setContent(j.content(c)),g.isWeixinBrowser()){var c={title:"2017-18 NBA新赛季球队巡礼",link:location.href.replace(/[#\?].*/g,"")+"#activity/nbaXsjxl",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/NBA_share.jpg",desc:"投注NBA加奖10％"};h.setShare(c)}}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=a("module/ui"),i=a("module/main"),j=a("view/activity/nbaXsjxl")}),define("controller/activity/rechargeSend",function(a,b){function c(a){n=i.getUrlParam("rules")||!1,e(a),f()}function d(a){n=null,clearTimeout(g.timer)}function e(a){var b={title:n?"活动规则":"充20得128元",className:"activity_20send128",showHeader:n?!0:!1,isLeftIconHeader:n?!0:!1},c={IMG_PATH:IMG_PATH};k.setMain(a,b),n?k.setContent(m.activityRules(c)):k.setContent(m.activityCotent(c)),$("#rulesBtn").on("click",function(){i.locationUrl("#activity/rechargeSend&rules=true")}),$("#getBtn").on("click",function(){i.isAndroidBrowser()&&i.isAndroid()?window.Jockey&&window.Jockey.send("chargeCJ"):i.isIosBrowser()&&i.isIos()?window.webkit.messageHandlers.activityRecharge.postMessage({financeType:1}):i.locationUrl("#charge&financeType=1")})}function f(){g(),h()}function g(){clearTimeout(g.timer);var a={};l.receiveUserCouponList(a,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data&&a.data.list||[];if(!(b.length<=0)){var c={list:b};$("#receiveList").html(m.receiveList(c));var d=function(){var a=$("#receiveList"),b=a.find("li"),c=b.length;if(!(1>=c)){var e=b.eq(0),f=e.outerHeight(!0);e.animate({marginTop:-f},500,function(){e.appendTo(a).css({marginTop:0}),g.timer=setTimeout(d,1e3)})}};g.timer=setTimeout(d,1e3)}})}function h(){var a={noJumpLogin:!0};l.isReceiveUserCoupon(a,function(a){if(1!=a.errCode){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data;b&&($("#getBtn").removeClass("get_btn").addClass("getted_btn"),$("#getBtn").off())}})}b.init=c,b._init=d;var i=a("module/common");i.isAndroid()&&a("external/jockey");var j=a("module/ui"),k=a("module/main"),l=a("cgi/coupon"),m=a("view/activity/rechargeSend"),n=null}),define("controller/activity/turnplate",function(a,b){function c(a){t=1,u=20,v=o.getUrlParam("prizeRecord")||!1,w=0,e(a),f(),g()}function d(a){t=null,u=null,v=null,w=null,clearTimeout(j.timer)}function e(a){var b={title:v?"抽奖记录":"大转盘",className:v?"prizeRecord":"activity_turnplate",showHeader:v?!0:!1,isTurnplateHeader:v?!0:!1},c={IMG_PATH:IMG_PATH};q.setMain(a,b),o.isIosBrowser()&&o.isIos()&&window.webkit.messageHandlers.webNavigation.postMessage({title:"幸运大转盘",colorX:""}),v?(q.setContent(s.prizeRecord(c)),$("#goBack").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),o.locationUrl("#activity/turnplate"),window.Jockey&&window.Jockey.send("showTitleBar")}),o.isIosBrowser()&&o.isIos()&&window.webkit.messageHandlers.webNavigation.postMessage({title:"",colorX:"e8552d"}),l()):(o.isApp()||o.setHistoryBack("#lotteryHall"),q.setContent(s.turnplate(c)),$("#rulesBtn").off().on("click",function(){$("#turnplateMask").show(),$("#rules").slideDown()}),$("#closeRuleBtn").off().on("click",function(a){$("#turnplateMask").hide(),$("#rules").slideUp()}),$("#prizeRecordBtn").on("click",function(){o.locationUrl("#activity/turnplate&prizeRecord=true"),window.Jockey&&window.Jockey.send("hideTitleBar")}),i())}function f(){}function g(){var a={imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/turnplate_logo.png",desc:"幸运大转盘 赢球衣和iPhone7！"};p.setShare(a)}function h(a){$("#rotatebg").css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)"})}function i(){var a={};r.getTurnplateActivityInfo(a,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data||{},c=parseInt(b.turnplateCount)||0,d=trim(b.remark)||"";$("#turnplateCount").html(c),$("#remark").html(d),$("#start").off().on("click",j)})}function j(){clearTimeout(j.timer),$("#start").off();var a={};r.rotateTurnplate(a,function(a){var b=a.data||{},c={rotate:b,IMG_PATH:IMG_PATH};if($("#trunplateNotice").html(s.trunplateNotice(c)),$("#closeNotice,#ensure").on("click",function(){n()}),$("#buyPlan").on("click",function(){o.isAndroid()?window.Jockey&&window.Jockey.send("closeWindow"):o.locationUrl("#home")}),0!=a.errCode){var d=a.msg||"";return void(-1!=d.indexOf("没有抽奖机会")&&(m(),$("#start").off().on("click",j)))}var e={twoCj1:"1",thk1:"2",poloShirt:"3",fiveCj:"4",twentyCj:"5",twoCj2:"6",thk2:"7"},f=parseInt(e[b])||0;if(!(0>=f)){w++;var g=2880,k=45,l=w*g+f*k;h(l),j.timer=setTimeout(function(){m(),i()},6300)}},function(a){$("#start").off().on("click",j)})}function k(){t++,l(!0)}function l(a){q.unsetScrollLoad();var b={pageNum:t,pageSize:u};r.getTurnplateList(b,function(b){if(0!=b.errCode)return void p.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/u);d>t&&q.setScrollLoad(k);var e=b.data&&b.data.list||[],f={list:e};a?$("#prizeRecordList").append(s.prizeRecordList(f)):$("#prizeRecordList").html(s.prizeRecordList(f))},function(){q.setScrollLoad(k)})}function m(){$("#turnplateMask").show(),$("#trunplateNotice").show()}function n(){$("#turnplateMask").hide(),$("#trunplateNotice").hide().html("")}b.init=c,b._init=d;var o=a("module/common");o.isAndroid()&&a("external/jockey");var p=a("module/ui"),q=a("module/main"),r=a("cgi/activity"),s=a("view/activity/turnplate"),t=null,u=null,v=null,w=null}),define("controller/activity/wdlszlzz",function(a,b){function c(a){l=parseInt(h.getUrlParam("webCalliOS"))||0,e(a),f()}function d(a){l=null}function e(a){var b={title:"晒米场－五大联赛之六宗最",className:"activity_wdlszlzz"},c={IMG_PATH:IMG_PATH};if(j.setMain(a,b),j.setContent(k.content(c)),h.isWeixinBrowser()){var c={title:"独家揭密:五大联赛六宗最",link:location.href.replace(/[#\?].*/g,"")+"#activity/wdlszlzz",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/activity_wdlszlzz_share.jpg",desc:"投注竞彩足球加奖10.2%"};i.setShare(c)}!l&&h.isIosBrowser()&&h.isIos()&&$("#betBtn").hide(),$("#betBtn").on("click",function(){h.isAndroidBrowser()&&h.isAndroid()?window.Jockey&&window.Jockey.send("JCZQ"):h.isIosBrowser()&&h.isIos()?window.webkit.messageHandlers.appDelegate.postMessage({name:"shaimi://bet/JCZQ"}):h.locationUrl("#match&self=true&type=1")}),$("#shareBtn").on("click",function(){g()})}function f(){}function g(){if(h.isWeixinBrowser()){var a={title:"独家揭密:五大联赛六宗最",link:location.href.replace(/[#\?].*/g,"")+"#activity/wdlszlzz",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/activity_wdlszlzz_share.jpg",desc:"投注竞彩足球加奖10.2%"};i.showShare(a)}else h.isAndroidBrowser()?window.Jockey&&window.Jockey.send("SSQHBShare",{title:"独家揭密:五大联赛六宗最",link:location.href.replace(/[#\?].*/g,"")+"#activity/wdlszlzz",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/activity_wdlszlzz_share.jpg",desc:"投注竞彩足球加奖10.2%"}):h.isIosBrowser()&&h.isIos()&&window.webkit.messageHandlers.ssqHbShare_received.postMessage({title:"独家揭密:五大联赛六宗最",link:location.href.replace(/[#\?].*/g,"")+"#activity/wdlszlzz",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/activity_wdlszlzz_share.jpg",desc:"投注竞彩足球加奖10.2%"})}b.init=c,b._init=d;var h=a("module/common");h.isAndroid()&&a("external/jockey");var i=a("module/ui"),j=a("module/main"),k=a("view/activity/wdlszlzz"),l=null}),define("controller/bindMobile",function(a,b){function c(a){e(a),f()}function d(a){clearTimeout(g.timer)}function e(a){var b={title:"绑定手机",className:"bindPhone",showHeader:!0};k.setMain(a,b),k.setContent(n.content()),$("#smsCodeBtn").on("click",g),$("#bindMobileSubmit").on("click",h)}function f(){}function g(){var a=trim($("#mobile").val())||"";if(!i.verifyMobile(a))return void j.showNotice("输入的手机号码有误");var b={mobile:a};m.sendSmsCode(b,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("倒计时("+b+")"),g.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("重新获取").on("click",g)};c()})}function h(){var a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"";if(!i.verifyMobile(a))return void j.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void j.showNotice("输入的验证码有误");var c={mobile:a,code:b};l.bindMobile(c,function(a){return 3==a.errCode?void j.showNotice(a.msg):0!=a.errCode?void j.showNotice(a.msg):(j.showNotice("您已成功绑定"),void setTimeout(function(){i.locationUrl("#sign")},1e3))})}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/user"),m=a("cgi/sms"),n=a("view/bindMobile")}),define("controller/bonusOptimize",function(a,b){function c(a){return window.editOptimizeMatch?(q=window.editOptimizeMatch[0].ticketAmount,e(a),void f()):void j.locationUrl("#myBet")}function d(a){p&&p.$destroy(),o=null,p=null,q=null,r=null}function e(a){var b={title:"奖金优化",className:"bonusOptimize",showHeader:!0,isLeftIconHeader:!0};l.setMain(a,b),l.setContent(n.content())}function f(){g()}function g(){var a=$("#optimizeTab div");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),o=parseInt($(this).attr("tab"))||1,h()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"))||0;return o==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function h(){for(var a=window.editOptimizeMatch[0].matchList,b=[],c=0,d=a.length;d>c;c++){var e=a[c]||{},f=e.matchId||0,g=e.oddsId||0,h=e.number,j=e.bettypeContent,l=e.bettypeOdds||{},m=e.bettypeValue||{},s=e.recommend||[],t=s.length,u=[];if(0>=f||0>=g||0>=t)return void k.showNotice("比赛信息异常");for(var v=0;t>v;v++){var w=parseFloat(l[s[v]]).toFixed(2),x=m[s[v]],y={matchId:f,oddsId:g,number:h,bettypeContent:j,odd:w,recommend:s[v],bettype:x};if(isNaN(w)||0>=w)return void k.showNotice("比赛赔率异常");u.push(y)}b.push(u)}for(var z=[[]],c=0;c<b.length;c++){for(var A=[],v=0;v<z.length;v++)for(var B=0;B<b[c].length;B++)A.push(z[v].concat(b[c][B]));z=A}var C=[],D=1,E=0;r=[];for(var c=0;c<z.length;c++){for(var F=1,G={},v=0;v<z[c].length;v++)F*=z[c][v].odd,F=parseFloat(F);D*=F,G.options=z[c],G.singleOdd=F,C.push(F),r.push(G)}r.sort(function(a,b){return a.singleOdd-b.singleOdd});var H=function(){var a,b=q/2,c=[],d=0,e=0,f=0;a=z.length>2?1:0;for(var g=0;g<C.length;g++)a+=z.length>2?D/C[g]:C[g];for(var g=0;g<r.length;g++){var h=r[g],i=h.singleOdd;1==o?(1==r.length?h.unitAmount=q:h.unitAmount=2*Math.round(b*D/i/a),f+=h.unitAmount):2==o?1==r.length?h.unitAmount=q:(r[0].unitAmount=2,0!=g&&(d=Math.ceil(b/i),e+=d,h.unitAmount=2*d)):3==o&&(1==r.length?h.unitAmount=q:(g!=r.length-1&&(d=Math.ceil(b/i),e+=d,h.unitAmount=2*d),r[r.length-1].unitAmount=2)),h.theoryPrize=(h.unitAmount*i).toFixed(2),isNaN(h.theoryPrize)&&(h.theoryPrize=0),c.push(h.theoryPrize)}if(1==o){if(f!=q){var j=f-q;r[0].unitAmount>Math.abs(j)&&!isNaN(r[0].unitAmount)&&(r[0].unitAmount-=j,r[0].theoryPrize=(r[0].unitAmount*r[0].singleOdd).toFixed(2))}}else if(2==o){var k=r[0];k.unitAmount=2*(b-parseInt(e)),k.unitAmount<=0&&(q-=k.unitAmount-2,k.unitAmount=2),k.theoryPrize=(k.unitAmount*k.singleOdd).toFixed(2),c.push(k.theoryPrize)}else if(3==o){var l=r[r.length-1];l.unitAmount=2*(b-parseInt(e)),l.unitAmount<=0&&(q-=l.unitAmount-2,l.unitAmount=2),l.theoryPrize=(l.unitAmount*l.singleOdd).toFixed(2),c.push(l.theoryPrize)}E=Math.max.apply(null,c)};H();var I={matchList:r,totalAmount:q,maxPrize:E};$("#vueContent").html(n.vueContent()),p=new Vue({el:"#vueContent",data:I,methods:{total:function(){this.totalAmount>1e5?(this.totalAmount=1e5,k.showNotice("最大优化金额"+1e5)):this.totalAmount<0?this.totalAmount=0:this.totalAmount<2*this.matchList.length&&k.showNotice("最小优化金额不能小于"+2*this.matchList.length),this.totalAmount%1!=0&&(this.totalAmount=Math.ceil(this.totalAmount)),q=this.totalAmount,H(),this.maxPrize=E},count:function(a){var b=0,c=[];this.matchList.forEach(function(d){d.unitAmount=2*Math.round(d.unitAmount/2),d.unitAmount&&(b+=parseInt(d.unitAmount)),a.theoryPrize=(a.unitAmount*a.singleOdd).toFixed(2),c.push(d.theoryPrize)}),this.maxPrize=Math.max.apply(null,c),this.totalAmount=b,q=b},changeValue:function(a,b){var b=parseInt(b);this.totalAmount>=1e5&&b>0||(a.unitAmount=parseInt(a.unitAmount)+b,a.unitAmount=a.unitAmount<2?a.unitAmount=2:a.unitAmount,this.count(a))},submit:function(){i()}},destroyed:function(){}})}function i(){var a=[],b=window.editOptimizeMatch[0].ticketPassType;if(r){var c=$("#protocol")[0].checked,d=2*r.length;if(!c)return void k.showNotice("请阅读并同意代购协议");if(isNaN(q)||d>q)return void k.showNotice("最小优化金额不能小于"+d+"，请重新输入");if(q%2!=0)return void k.showNotice("优化金额不能是奇数，请重新输入");for(var e=0;e<r.length;e++){var f=Math.ceil(r[e].unitAmount/2);if(0>=f)return void k.showNotice("优化金额过小，请重新输入");for(var g=r[e].options,h=[],i=0;i<g.length;i++){var l=g[i].matchId,n=g[i].oddsId,o=[];o.push(g[i].recommend);var p={matchId:l,oddsId:n,recommend:o};h.push(p)}var s={matchType:1,ticketMultiple:f,matchRecommend:h,ticketPassType:b};a.push(s)}a=JSON.stringify(a);var g={betContent:a};m.createBatchTicketOrder(g,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=trim(b.orderBatchNo),d=trim(b.payUrl);c?d?setTimeout(function(){j.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(j.getLocationHash());j.locationUrl("#ticketSuccess&orderBatchNo="+c+"&continueHash="+a)},1e3):k.showNotice("支付失败")})}window.editOptimizeMatch=null,window.editSelfSelectMatch=null}b.init=c,b._init=d,a("external/vue");var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/order"),n=a("view/bonusOptimize"),o=null,p=null,q=null,r=null}),define("controller/cdsd",function(a,b){function c(a){q=1,r=8,k.setHistoryBack("#home"),e(a),f()}function d(a){q=null,r=null}function e(a){var b={title:"实单推荐",className:"index",showHeader:!0,rightButtonText:"明星店长",rightButtonFun:function(){k.locationUrl("#userList&groupNo="+p)}};m.setMain(a,b),m.setContent(o.content())}function f(){g()}function g(){var a=$("#recommendTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),q=1,r=8,h()}),a.eq(0).click()}function h(a){m.unsetScrollLoad();var b=parseInt($("#recommendTab [matchType].active").eq(0).attr("matchType"))||0,c={matchType:b,groupNo:p,needSale:!0,needUser:!0,needAccess:!0,pageNum:q,pageSize:r};n.getPlanList(c,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&m.setScrollLoad(i);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#planList").append(o.planList(f)):$("#planList").html(o.planList(f)),$("#planList .userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d){var f=k.getLoginUser(),g=trim(f&&f.userNo||""),h=g?"?spreaderUserNo="+g:"",i={title:d,link:location.href.replace(/[#\?].*/g,"")+h+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场足球推荐专家",success:function(){l.setShare()},cancel:function(){l.setShare()}};l.showShare(i)}}),$("#planList .userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount"));if(b){var g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};l.showCreateTicketOrder(g)}}),$("#planList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&k.locationUrl("#userDetail&userNo="+b)}),$("#planList .planItem").off().on("click",j)},function(){m.setScrollLoad(i)})}function i(){q++,h(!0)}function j(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("amount")),d=trim($(this).attr("access"));if(!(!b||isNaN(c)||0>c)){if("true"==d)return void k.locationUrl("#planDetail&planNo="+b);var e={planNo:b,amount:c};l.showCreateOrder(e)}}b.init=c,b._init=d;var k=a("module/common"),l=a("module/ui"),m=a("module/main"),n=a("cgi/plan"),o=a("view/cdsd"),p="5F5E101-BC6150",q=null,r=null}),define("controller/charge",function(a,b){function c(a){r=parseInt(k.getUrlParam("financeType"))||0,k.setHistoryBack("#my"),e(a),f()}function d(a){r=null}function e(a){var b={title:0==r?"米粒充值":"彩金充值",className:"recharge",showHeader:!0,rightButtonText:"充值记录",rightButtonFun:function(){k.locationUrl("#chargeList&financeType="+r)}};l.setMain(a,b)}function f(){g(),h()}function g(){var a={};n.getUserInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=b.isABT;c&&$("#rechargeTab").show()})}function h(){var a={};p.getChargeActivityInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c={presentAmountMap:b,financeType:r};l.setContent(q.content(c)),$("#chargeList li").on("click",function(a){$("#chargeList li").removeClass("active"),$(this).addClass("active"),j()}),$("#amount").on("input",function(a){var b=parseInt($(this).val())||0;b>0&&($("#chargeList li").removeClass("active"),$("#money"+b).parents("li").addClass("active"))}),$("#chongSubmit").on("click",i),j()})}function i(){var a=100*(parseInt($("#amount").val())||0);if(isNaN(a)||0>=a)return void m.showNotice("请填写正确的充值金额");var b={amount:a};0==r?o.createChargeOrder(b,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){k.locationUrl(d)},1e3):(m.showNotice("支付成功"),setTimeout(function(){k.locationUrl("#chargeList")},1e3)):m.showNotice("支付失败")}):1==r&&o.createTicketChargeOrder(b,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){k.locationUrl(d)},1e3):(m.showNotice("支付成功"),setTimeout(function(){k.locationUrl("#chargeList")},1e3)):m.showNotice("支付失败")})}function j(a){var b=$("#chargeList li.active");b.each(function(a,b){var c=parseInt($(this).find(".chargeNum").text())||"";$("#amount").val(c)})}b.init=c,b._init=d;var k=a("module/common"),l=a("module/main"),m=a("module/ui"),n=a("cgi/user"),o=a("cgi/order"),p=a("cgi/activity"),q=a("view/charge"),r=null}),define("controller/chargeList",function(a,b){function c(a){n=parseInt(i.getUrlParam("financeType"))||0,o=1,p=20,i.setHistoryBack("#charge&financeType="+n),e(a),f()}function d(a){n=null,o=null,p=null}function e(a){var b={title:"充值记录",className:"moneyNode",showHeader:!0};k.setMain(a,b);var c={};k.setContent(m.content(c))}function f(){h()}function g(){o++,h(!0)}function h(a){k.unsetScrollLoad();var b={financeType:n,pageNum:o,pageSize:p};l.getChargeList(b,function(b){if(0!=b.errCode)return void j.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/p);
d>o&&k.setScrollLoad(g);var e=b.data&&b.data.list||[],f={list:e};a?$("#chargeList").append(m.chargeList(f)):$("#chargeList").html(m.chargeList(f))},function(){k.setScrollLoad(g)})}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/finance"),m=a("view/chargeList"),n=null,o=null,p=null}),define("controller/createPresentOrder",function(a,b){function c(a){e(a),f()}function d(a){q=null}function e(a){var b={title:"双色球红包",className:"ssqhb",showHeader:!0,rightButtonText:"分享",rightButtonFun:i},c={IMG_PATH:IMG_PATH};if(m.setMain(a,b),m.setContent(p.content(c)),$("#payBtn").on("click",h),$("#pageHeader .leftIcon_header").on("click",function(a){k.isAndroidBrowser()&&window.Jockey&&window.Jockey.send("closeWindow")}),k.isWeixinBrowser()){var c={title:"领取新年红包",link:location.href.replace(/[#\?].*/g,"")+"#createPresentOrder",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:"送你一份价值500万的新年红包，祝你2018心想事成，财源滚滚。"};l.setShare(c)}$("#presentNum").on("input",function(){var a=parseInt(this.value)||0;$("#prize").html(2*a)})}function f(){j()}function g(){var a,b=$("#greetingBtn li");b.on("click",function(c){b.removeClass("active"),$(this).addClass("active"),a=parseInt($(this).attr("tab"))||1,1==a?$("#presentRemark").val(q+"祝你新年快乐：送你一份价值500万的新年红包，祝你2018心想事成，财源滚滚。"):2==a?$("#presentRemark").val(q+"祝你财源滚滚：今年过年不送礼，新年红包表惊喜；美满幸福浴春风，百万大奖等着你"):3==a?$("#presentRemark").val(q+"祝你年年有余：送你一份价值500万的新年红包，祝你新的一年吉星高照，好运连连，事业攀高！"):4==a&&$("#presentRemark").val(q+"祝你名利双收：富贵吉祥加如意，财神已经盯上你，红包里头百万金，新的一年—大吉大利！")});var c=-1;b.each(function(b,d){var e=parseInt($(this).attr("tab"))||0;return a==e?void(c=b):void 0}),0>c&&(c=0),b.eq(c).click()}function h(){var a=parseInt($("#presentNum").val()),b=trim($("#presentRemark").val());if(k.setCache("ssqhbRemark",b),isNaN(a)||0>=a)return void l.showNotice("请输入赠送人数");if(!b)return void l.showNotice("请输入祝福语");var c={presentNum:a,presentRemark:b};n.createPresentOrder(c,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){k.locationUrl(d)},1e3):setTimeout(function(){encodeURIComponent(k.getLocationHash());k.locationUrl("#presentOrderSuccess&orderNo="+c)},1e3):l.showNotice("支付失败")})}function i(){if(k.isWeixinBrowser()){var a={title:"领取新年红包",link:location.href.replace(/[#\?].*/g,"")+"#createPresentOrder",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:"送你一份价值500万的新年红包，祝你2018心想事成，财源滚滚。"};l.showShare(a)}else k.isAndroidBrowser()?window.Jockey&&window.Jockey.send("SSQHBShare",{title:"领取新年红包",link:location.href.replace(/[#\?].*/g,"")+"#createPresentOrder",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:"送你一份价值500万的新年红包，祝你2018心想事成，财源滚滚。"}):k.isIosBrowser()&&k.isIos()&&window.webkit.messageHandlers.ssqHbShare_create.postMessage({title:"领取新年红包",link:location.href.replace(/[#\?].*/g,"")+"#createPresentOrder",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:"送你一份价值500万的新年红包，祝你2018心想事成，财源滚滚。"})}function j(){var a={};o.getUserInfo(a,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data||{},c=trim(b.realName)||"",d=trim(b.nickName)||"";q=c||d,g()})}b.init=c,b._init=d;var k=a("module/common");k.isAndroid()&&a("external/jockey");var l=a("module/ui"),m=a("module/main"),n=a("cgi/order"),o=a("cgi/user"),p=a("view/createPresentOrder"),q=null}),define("controller/createTicketOrder",function(a,b){function c(a){y=trim(r.getUrlParam("planNo"))||"",A=trim(r.getUrlParam("selfTicket")),B=parseInt(r.getUrlParam("type")),C=parseInt(r.getUrlParam("tab")),e(a),f()}function d(a){y=null,z=null,A=null,B=null,C=null}function e(a){var b=!!y,c={title:1==b?"跟单投注":"投注",className:"bet",showHeader:!0,rightButtonText:"奖金优化",rightButtonFun:p};t.setMain(a,c)}function f(){y?g():h()}function g(){if(y){var a={needUser:!0,planNo:y};u.getPlanInfo(a,function(a){if(0!=a.errCode)return void s.showNotice(a.msg);var b=a.data||{};z=b.matchList||[];var c={IMG_PATH:IMG_PATH,plan:b};t.setContent(x.content(c)),i(b.amount),j(),q(),$("#userVerifyProtocol").on("click",function(){r.locationUrl("#userVerifyProtocol&type=3")}),$("#createTicketSubmit").on("click",n)})}}function h(){if(!window.editSelfSelectMatch)return void r.historyBack();$("#pageHeader .leftIcon_header").on("click",function(a){a.preventDefault(),a.stopPropagation(),A?window.matchSelectBettype=o():window.signleSelectBettype=o()});for(var a=[],b=window.editSelfSelectMatch.length,c=0;b>c;c++){var d,e=window.editSelfSelectMatch[c]||{},f=e.match||{};d=A?f.matchId:e.matchId;var g=e.odds||{},h=g.oddsId||0,k=e.recommend||[];a.push({matchId:d,oddsId:h,recommend:k})}a=JSON.stringify(a);var l={matchRecommend:a};3==B&&(l.needYaPan=!0),w.getMatchRecommend(l,function(a){if(0!=a.errCode)return void s.showNotice(a.msg);var b=a.data||{};z=b.matchList||[];var c={self:b};A?r.setHistoryBack("#match&self=true&type="+B+"&tab="+C):r.setHistoryBack("#hotMatchDetail&matchId="+d+"&type="+z[0].type+"&tab=5"),t.setContent(x.content(c)),i(),j(),q(),$("#userVerifyProtocol").on("click",function(){r.locationUrl("#userVerifyProtocol&type=3")}),$("#createTicketSubmit").on("click",n)})}function i(a){var b=10;if(a){var c=parseInt(a/100);18==c?b=20:28==c?b=30:38==c?b=40:58==c?b=50:88==c&&(b=100)}$("#ticketMultiple").val(b),$("#ticketMultiple"+b).addClass("active");var d=$("#ticketMultiple10,#ticketMultiple100,#ticketMultiple1000");$("#ticketMultiple").on("input",function(){var a=parseInt(this.value)||0;d.removeClass("active"),$("#ticketMultiple"+a).addClass("active"),m()}),d.on("click",function(){var a=parseInt(this.id.replace(/\D/g,""))||0;isNaN(a)||0>=a||$("#ticketMultiple").val(a).trigger("input")})}function j(){if(z){var a=z.length;if(!(0>=a)){for(var b=[],c=[],d=0;a>d;d++){var e=z[d];1==e.single&&b.push(e.single);var f=d+1,g=1==f?"单关":f+"串1";c.push('<span class="'+(f==a?"active":"")+'" passType="'+f+'x1">'+g+"</span>")}b.length!=a&&c.shift(),$("#passTypeBox").html(c.join("")),$("#passTypeBox span").on("click",function(){$(this).toggleClass("active"),k()}),$("#passTypeBtn").on("click",function(){var a=$("#passTypeBox"),b=$("#passTypeIcon");a.slideToggle();var c=/icon_select_down/.test(b.attr("class"));b.attr("class","select_triangle icon_select_down"),c&&b.attr("class","select_triangle icon_select_up")}),k()}}}function k(){var a=$("#passTypeBox span.active"),b=[];a.each(function(a,c){b.push(trim(c.innerHTML))}),b.length>1?$("#passTypeIcon").hide():$("#passTypeIcon").show(),$("#passTypeText").html(b.join(",")),m()}function l(){var a=[];return $("#passTypeBox span.active").each(function(b,c){var d=trim($(c).attr("passType"));/^\d+x1$/.test(d)&&a.push(d)}),a}function m(){if(z){var a=z.length;if(!(0>=a)){for(var b=l(),c=0,d={},e=0,f=b.length;f>e;e++){var g=trim(b[e])||"",h=parseInt(g.replace(/x1$/,""));if(isNaN(h)||0>=h||h>8||h>a)return void s.showNotice("过关方式异常");var i=r.ZH(z,h)||[];if(i.length<=0)return void s.showNotice("过关方式异常");d[g]||(d[g]=[]);for(var j=0,k=i.length;k>j;j++){for(var m=i[j],n=1,o=1,p=0,q=m.length;q>p;p++){var t=m[p]||{},u=t.matchId||0,v=t.oddsId||0,w=t.bettypeOdds||{},x=t.recommend||[],y=x.length;if(0>=u||0>=v||0>=y)return void s.showNotice("比赛信息异常");o*=y;for(var A=[],B=0;y>B;B++){var C=parseFloat(w[x[B]]);if(isNaN(C)||0>=C)return void s.showNotice("比赛赔率异常");A.push(C)}var D=Math.max.apply(null,A);n*=D}c+=o,d[g].push(n)}}var E=parseInt($("#ticketMultiple").val())||0,F=E*c*2;$("#countUnit").html("共"+c+"注 "+E+"倍 "),$("#ticketAmount").html(F+"元");var G=0;for(var H in d)for(var I=d[H]||[],e=0,f=I.length;f>e;e++){var n=parseFloat(I[e])||0;if(isNaN(n)||0>=n)return void s.showNotice("比赛赔率异常");var J=r.round(2*n,2),K=J*E;G+=K}$("#maxPrize").html("理论最大奖金："+G.toFixed(2))}}}function n(){var a=$("#protocol")[0].checked,b=parseInt($("#ticketAmount").html().replace(/\D/g,"")||0),c=parseInt($("#ticketMultiple").val()||0),d=parseInt($(this).attr("planAmount")/100),e=l();if(!a)return void s.showNotice("请阅读并同意代购协议");if(e.length<=0)return void s.showNotice("请选择过关方式");if(isNaN(b)||0>=b)return void s.showNotice("总金额有误");if(isNaN(c)||0>=c)return void s.showNotice("请输入正整倍数");if(!A){if(10>c)return void s.showNotice("投注倍数最小为10，请重新输入");if(18==d&&20>c)return void s.showNotice("跟单此方案最低20倍");if(58==d&&50>c)return void s.showNotice("跟单此方案最低50倍");if(88==d&&100>c)return void s.showNotice("跟单此方案最低100倍")}if(c>1e5)return void s.showNotice("您输入的倍数过大，请重新输入");var f={},g=function(){};if(y)f={ticketMultiple:c,planNo:y,ticketPassType:e},g=v.createTicketOrder;else{var h=[],i="";3==B&&(i="JZYP");for(var j=0;j<z.length;j++){var k=z[j].matchId,m=z[j].oddsId||0,n=z[j].recommend||[],o=z[j].type;h.push({matchId:k,oddsId:m,recommend:n})}h=JSON.stringify(h),f={ticketMultiple:c,matchRecommend:h,ticketPassType:e,matchType:o,lotteryId:i},g=v.createSelfTicketOrder}g(f,function(a){if(0!=a.errCode)return void s.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){r.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(r.getLocationHash());r.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):s.showNotice("支付失败")}),window.editSelfSelectMatch=null}function o(){var a=null,b=window.editSelfSelectMatch||[];return $.each(b,function(b,c){var d,e=c.match||{},f=c.odds||{},g=c.recommend||[];d=A?e.matchId||0:c.matchId||0;var h=f.oddsId||0;0>=d||0>=h||!g||g.length<=0||(a||(a={}),a[d]={oddsId:h,recommend:g})}),a&&{selectMatch:a}||null}function p(){var a=[],b=parseInt($("#ticketAmount").html().replace(/\D/g,"")||0),c=l();return c.length>1?void s.showNotice("奖金优化暂不支持混合过关方式"):z.length>1&&"1x1"==c[0]?void s.showNotice("奖金优化不支持多串单关"):c.length<=0?void s.showNotice("请选择过关方式"):(a.push({matchList:z,ticketAmount:b,ticketPassType:c}),window.editOptimizeMatch=a,void r.locationUrl("#bonusOptimize"))}function q(){var a=0,b=z.length;$.each(z,function(b,c){var d=c.recommend||[],e=c.matchId||0,f=c.oddsId||0;0>=e||0>=f||!d||d.length<=0||(a+=d.length)}),(2==B||3==B||b>2||1==b&&a>2||2==b&&a>5)&&$("#pageHeader .rightIcon_top").hide()}b.init=c,b._init=d;var r=a("module/common"),s=a("module/ui"),t=a("module/main"),u=a("cgi/plan"),v=a("cgi/order"),w=a("cgi/match"),x=a("view/createTicketOrder"),y=null,z=null,A=null,B=null,C=null}),define("controller/demo",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={static1:"静态1",static2:"静态2",name1:"名字1",name2:"名字2",message1:"消息1",message2:"消息2",message3:"消息3",message4:"消息4"};a.setContent(g.content(b));var c=new Vue({el:"#myContent",data:b});setTimeout(function(){c.name1="变化的名字1",c.name2="变化的名字2",c.message1="变化的消息1",c.message2="变化的消息2",c.message3="变化的消息3",c.message4="变化的消息4"},3e3)}function f(){}b.init=c,b._init=d,a("external/vue");var g=(a("module/common"),a("module/ui"),a("module/main"),a("cgi/user"),a("view/demo"))}),define("controller/digitalPlanDetail",function(a,b){function c(a){x=trim(n.getUrlParam("planNo"))||"",y=trim(n.getUrlParam("transdata"))||"",y&&(n.clearCache("c=plan&m=digitalPlanInfo"),n.clearCache("c=plan&m=digitalPlanList")),e(a),f()}function d(a){x=null,y=null}function e(a){var b={title:"推荐详情",className:"expertRcmd",showHeader:!0};p.setMain(a,b)}function f(){g()}function g(){if(x){var a={needUser:!0,planNo:x};t.getDigitalPlanInfo(a,function(a){if(2==a.errCode)return void(y?(o.showAttention("支付单正在处理中，请稍等..."),setTimeout(g,5e3)):i(a.data));if(0!=a.errCode)return void o.showNotice(a.msg);o.closeAttention();var b=a.data||{},c={IMG_PATH:IMG_PATH,plan:b,Object:Object};p.setContent(w.content(c)),$("#planDetail .planpic").on("click",h),$("#userMore").on("click",function(){var a=trim($(this).attr("userNo"))||"";a&&n.locationUrl("#userDetail&userNo="+a)}),$("#bottomBox [href]").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("href"));b&&n.locationUrl(b)}),$("#upCount, #downCount").on("click",function(a){var b=trim($(this).attr("id")),c=trim($(this).attr("planNo"));if(b&&c){var d=n.getCache("planCount");if(d){if(d[b][c])return void o.showNotice("您已参与过")}else d={upCount:{},downCount:{},shareCount:{}};var e=function(a){return function(){var b=trim($(a).attr("id")),e=parseInt($("#"+b+"Num").html())||0;$("#"+b+"Num").html(e+1),d[b][c]=!0,n.setCache("planCount",d,864e8)}}(this),f="";"upCount"==b?f="planUpCount":"downCount"==b&&(f="planDownCount"),f&&t[f]({planNo:c},e,e)}});var d,e=b.user,f=b.planNo,l=b.betContentList[0],m=b.recommendCount,q=l.betContentResult||{},r=q.name;if("直选"==r){d=[];var u=l.betContent.split(":")[1];s=u.split("|")[0].split(",").join(" ")+"|"+u.split("|")[1].split(",").join(" ")+"|"+u.split("|")[2].split(",").join(" "),d.push(s)}else d=l.betContent.split(":")[1].split(",");var v=b.issue,x=e.realName,z=e.nickName,A=e.profileImg,B=e.personalImg,C=B||A,D=x||z,E=e.userNo,F=n.getLoginUser(),G=trim(F&&F.userNo||""),H=G?"?spreaderUserNo="+G:"",I={title:D+"推荐",link:location.href.replace(/[#\?].*/g,"")+H+"#digitalPlanDetail&planNo="+f,imgUrl:C,desc:v+"期 3D"+r+"推荐",success:function(){var a=parseInt($("#shareCountNum").html())||0;$("#shareCountNum").html(a+1),t.planShareCount({planNo:f})}};o.setShare(I),$("#shareCount").on("click",function(a){o.showShare(I)}),k(E),$("#addTicket").on("click",function(){n.locationUrl("#fc3d&recommend=true&bet=ture&planNo="+f),j("fc3dRecommend",{title:r,selectContent:d,unit:m})})})}}function h(a){a.preventDefault(),a.stopPropagation();var b=[];$("#planDetail .planpic").each(function(a,c){var d=trim($(this).attr("src"));d&&b.push(d)});var c=trim($(this).attr("src"))||b[0]||"";q.call("previewImage",{current:c,urls:b})}function i(a){a=(parseInt(a)||0)/100,o.showConfirm("需支付"+a+"粒米查看专家推荐<br>(1粒米=1元)",function(){var a=trim(n.getUrlParam("spreaderUserNo"))||"",b={planNo:x,spreaderUserNo:a};u.createOrder(b,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){n.locationUrl(d)},1e3):(o.showNotice("支付成功"),o.closeConfirm(),setTimeout(function(){g()},1e3)):o.showNotice("支付失败")})},function(){n.locationUrl("#")})}function j(a,b){if(null!=b){var c=[];c.push(b);var d=JSON.stringify(c);z.set(a,d)}}function k(a){var b={userNo:a};r.getUserInfo(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);var c=b.data||{},d=parseInt(c.focusStatus)||0;1==d?$("#focus").removeClass("active").html("+关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),l(a)}).show():2==d&&$("#focus").addClass("active").html("已关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),m(a)}).show()})}function l(a){var b={userNo:a};o.showConfirm("关注专家，同时关注“晒米场”微信公共号，您的微信将在第一时间收到专家推荐的更新通知。如果您觉得骚扰，可以取消关注该专家。",function(){v.createFocus(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);b.data||{};o.showNotice("添加关注成功"),o.closeConfirm(),k(a)})},function(){})}function m(a){var b={userNo:a};o.showConfirm("您将收不到专家推荐的更新通知。您确认取消关注吗？",function(){v.cancelFocus(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);b.data||{};o.showNotice("取消关注成功"),o.closeConfirm(),k(a)})},function(){})}b.init=c,b._init=d;var n=a("module/common"),o=a("module/ui"),p=a("module/main"),q=a("module/weixin"),r=a("cgi/user"),t=a("cgi/plan"),u=a("cgi/order"),v=a("cgi/focus"),w=a("view/digitalPlanDetail"),x=null,y=null,z=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/dlt",function(a,b){function c(a){q=trim(j.getUrlParam("bet"))||!1,q?j.setHistoryBack("#dlt"):j.setHistoryBack("#lotteryHall"),e(a),f()}function d(a){p=null,q=null,r=null,s.remove("dlt"),p&&p.$destroy()}function e(a){var b={title:q?"大乐透投注":"大乐透",className:"ssq",showHeader:!0,rightButtonText:"历史开奖",rightButtonFun:g};l.setMain(a,b),q?l.setContent(o.ssqBet()):l.setContent(o.ssqNum())}function f(){h(),i()}function g(){j.locationUrl("#drawHistory&lotteryId=DLT")}function h(){var a={lotteryId:"DLT"};m.lotteryIssueInfo(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data,c=b.endTime;c=c.replace(/\d{4}-(\d{2}-\d{2} \d{2}:\d{2}):\d{2}/,"$1"),r=b.issue,$("#endTime").html(c),$("#issue").html(r)})}function i(){p=new Vue({el:"#pageContent",data:{redBall:"",blueBall:"",singleUnit:0,ssqItems:"",prize:0,totalUnit:0,multiple:1,ssqCartKey:"dlt",checked:0,append:1}}),p.setDlt=function(){p.redBall=[],p.blueBall=[];for(var a=1;36>a;a++){var b={color:"red",redNum:10>a?"0"+a:a,select:!1};p.redBall.push(b)}for(var a=1;13>a;a++){var b={color:"blue",blueNum:10>a?"0"+a:a,select:!1};p.blueBall.push(b)}},p.setDlt(),p.chooseBallNum=function(a,b){var c=a,d=b,e=p.calcUnit(c,c-4)/p.calcUnit(5,2)*(p.calcUnit(d,d-1)/p.calcUnit(2,1));e>=1?this.singleUnit=e:this.singleUnit=0},p.selectBall=function(a){for(var b=0,c=0,d=0;d<p.redBall.length;d++)1==p.redBall[d].select&&b++;for(var d=0;d<p.blueBall.length;d++)1==p.blueBall[d].select&&c++;return 1==!!a.select?(a.select=!1,"red"==a.color&&b--,"blue"==a.color&&c--):(a.select=!0,"red"==a.color&&b++,"blue"==a.color&&c++),b>18?(1==!!a.select?a.select=!1:a.select=!0,void k.showNotice("最多选择18个红球")):void p.chooseBallNum(b,c)},p.calcUnit=function(a,b){return a==b?a:a*this.calcUnit(a-1,b)},p.chooseRandomBall=function(){var a=function(a,b){var c=[];switch(b){case 1:maxNumber=35;break;case 2:maxNumber=12}for(var d=0;a>d;d++){var e=Math.ceil(Math.random()*maxNumber),f=10>e?"0"+e.toString():e.toString();c.join(" ").indexOf(f)>=0?d--:c.push(f)}if(1==b)for(var d=0;d<c.length;d++)p.redBall[parseInt(c[d])-1].select=!0;if(2==b)for(var d=0;d<c.length;d++)p.blueBall[parseInt(c[d])-1].select=!0};p.setDlt(),a(5,1),a(2,2),p.chooseBallNum(5,2)},p.ensureSelect=function(){for(var a=[],b=[],c=0;c<p.redBall.length;c++)1==p.redBall[c].select&&a.push(p.redBall[c]);for(var c=0;c<p.blueBall.length;c++)1==p.blueBall[c].select&&b.push(p.blueBall[c]);if(0==a.length&&0==b.length)return p.chooseRandomBall();if(a.length<5||b.length<2)return void k.showNotice("至少选择5个红球，2个蓝球");if(2*p.singleUnit>2e4)return void k.showNotice("单次投注最多2万元");var d=p.getSelNumsInfo();p.addToStorage(d),j.locationUrl("#dlt&bet=true")},p.getSelNumsInfo=function(){for(var a=this.singleUnit,b=2*this.singleUnit,c="",d=0;d<p.redBall.length;d++)1==p.redBall[d].select&&(c+=trim(p.redBall[d].redNum)+" ");c+="+ ";for(var d=0;d<p.blueBall.length;d++)1==p.blueBall[d].select&&(c+=trim(p.blueBall[d].blueNum)+" ");return{lotteryId:"DLT",selUnit:a,selMoney:b,selnums:c.trim()}},p.addToStorage=function(a){if(null!=a){var b=p.getCartItems();b.unshift(a);var c=JSON.stringify(b);s.set(p.ssqCartKey,c)}},p.getCartItems=function(){var a=s.get(p.ssqCartKey);return null===a||void 0===a?""!=p.ssqCartKey?(s.set(p.ssqCartKey,"[]"),JSON.parse("[]")):{}:""==a?JSON.parse("[]"):JSON.parse(a)},p.initList=function(){p.totalUnit=0,p.prize=0;var a=[];s.get(p.ssqCartKey)&&(a=JSON.parse(s.get(p.ssqCartKey))),null!=a&&a.length>0&&a.forEach(function(a,b){a.redballs=a.selnums.split("+")[0].trim().split(" "),a.blueballs=a.selnums.split("+")[1].trim().split(" "),p.totalUnit+=a.selUnit,p.prize+=a.selMoney*p.multiple*p.append}),p.ssqItems=a},p.initList(),p.cancel=function(a){var b=p.getCartItems(),c=[];b.forEach(function(b,d){b.selnums!=a.selnums&&c.push(b)});var d=JSON.stringify(c);s.set(p.ssqCartKey,d),p.initList()},p.addRandomList=function(a){function b(){function a(a,b,c,d){for(var e=0;a>e;e++){var f=Math.ceil(35*Math.random());f=10>f?"0"+f.toString():f.toString(),c.join(" ").indexOf(f)>=0?e--:c=c.join(" ").replace(-1,f).split(" ")}for(var g=0;a>g;g++){var h=Math.ceil(12*Math.random());h=10>h?"0"+h.toString():h.toString(),d.join(" ").indexOf(h)>=0?e--:d=d.join(" ").replace(-1,h).split(" ")}return c.sort().join(" ")+" + "+d.sort().join(" ")}for(var b=1,c=5,d=2,e=[],f=[],g=0;c>g;g++)e.push(-1);for(var h=0;d>h;h++)f.push(-1);var i=a(c,d,e,f);return{lotteryId:"DLT",selUnit:b,selMoney:2*b,selnums:i.trim()}}for(var c=0;a>c;c++){var d=b();p.addToStorage(d),p.initList()}},p.$watch("multiple",function(a){isDefined(a)&&(a=1>a?1:a>99?99:a,p.multiple=a,p.prize=p.multiple*p.totalUnit*2*p.append)}),p.moneyAppend=function(){p.checked=!p.checked,1==p.checked?p.append=1.5:p.append=1,p.prize=p.multiple*p.totalUnit*2*p.append},p.changeValue=function(a){p.multiple=parseInt(p.multiple)+a},p.backToSsq=function(){j.locationUrl("#dlt")},p.createSubmit=function(){var a=$("#protocol")[0].checked,b=p.checked?1:0;if(!a)return void k.showNotice("请阅读并同意代购协议");if(!isDefined(p.multiple)||!/^[0-9]+$/.test(p.multiple))return void k.showNotice("请输入正整数倍数");if(p.totalUnit<=0||p.prize<=0)return void k.showNotice("请至少选择一注");var c=p.getCartItems(),d=[];c.forEach(function(a,b){d.push(a.selnums.split("+")[0].trim().split(" ").join(",")+"+"+a.selnums.split("+")[1].trim().split(" "))}),d=d.join(";");var e={ticketMultiple:p.multiple,issue:r,lotteryId:"DLT",ticketAppend:b,betContent:d};n.createDigitalTicketOrder(e,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){j.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(j.getLocationHash());j.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):k.showNotice("支付失败"),s.remove("dlt")})},p.destroyed=function(){}}b.init=c,b._init=d,a("external/vue");var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/lottery"),n=a("cgi/order"),o=a("view/dlt"),p=null,q=null,r=null,s=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/download",function(a,b){function c(a){m=!!j.getUrlParam("auto")||!1,e(a),i()}function d(a){m=null}function e(a){j.isAndroidBrowser()||j.isIosBrowser()?g(a):f(a),m&&h()}function f(a){var b={className:"pcDownload"};k.setMain(a,b),k.setContent(l.pc({IMG_PATH:IMG_PATH})),$("#androidQrCode").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#androidQrCode").fadeOut(function(){$("#androidQrCode").removeClass("show")})}),$("#iosQrCode").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#iosQrCode").fadeOut(function(){$("#iosQrCode").removeClass("show")})}),$("#androidBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#androidQrCode").fadeIn(function(){$("#androidQrCode").addClass("show")})}),$("#iphoneBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#iosQrCode").fadeIn(function(){$("#iosQrCode").addClass("show")})})}function g(a){var b={className:"mobileDownload"};k.setMain(a,b),k.setContent(l.mobile({IMG_PATH:IMG_PATH})),$("#mobileDownAndriod").click(function(){j.locationUrl("http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/other/android/com.shaimii_3.5.0.apk")}),$("#mobileDownIos").on("click",function(){j.locationUrl("https://itunes.apple.com/us/app/id1154395135?l=zh&ls=1&mt=8")})}function h(){j.locationUrl("http://a.app.qq.com/o/simple.jsp?pkgname=com.shaimichang.myapplication")}function i(){}b.init=c,b._init=d;var j=a("module/common"),k=(a("module/ui"),a("module/main")),l=a("view/download"),m=null}),define("controller/drawHistory",function(a,b){function c(a){p=trim(i.getUrlParam("lotteryId"))||"",n=1,o="JSK3"==p||"GX11X5"==p?20:8,e(a),f()}function d(a){n=null,o=null,p=null}function e(a){var b={SSQ:"双色球历史开奖",JSK3:"快3历史开奖",DLT:"大乐透历史开奖",GX11X5:"乐11选5开奖",FC3D:"3D开奖"},c={title:b[p],className:"drawHistory",showHeader:!0,isLeftIconHeader:!0};k.setMain(a,c),"SSQ"==p||"DLT"==p?k.setContent(m.SSQ()):"JSK3"==p?k.setContent(m.JSK3()):"GX11X5"==p?k.setContent(m.GX11X5()):"FC3D"==p&&k.setContent(m.FC3D())}function f(){g()}function g(a){k.unsetScrollLoad();var b={lotteryId:p,pageNum:n,pageSize:o};l.lotteryIssueList(b,function(b){if(0!=b.errCode)return void j.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/o);d>n&&k.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e,Date:Date};"SSQ"==p||"DLT"==p?a?$("#SSQdrawList").append(m.SSQdrawList(f)):$("#SSQdrawList").html(m.SSQdrawList(f)):"JSK3"==p?a?$("#K3drawList").append(m.K3drawList(f)):$("#K3drawList").html(m.K3drawList(f)):"GX11X5"==p?a?$("#GX11X5DrawList").append(m.GX11X5DrawList(f)):$("#GX11X5DrawList").html(m.GX11X5DrawList(f)):"FC3D"==p&&(a?$("#fc3dDrawList").append(m.fc3dDrawList(f)):$("#fc3dDrawList").html(m.fc3dDrawList(f)))},function(){k.setScrollLoad(h)})}function h(){n++,g(!0)}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/lottery"),m=a("view/drawHistory"),n=null,o=null,p=null}),define("controller/editDigitalPlan",function(a,b){function c(a){s=[],m.setHistoryBack("#my"),e(a),f()}function d(a){s=null,m.clearCache("fc3dRecommend")}function e(a){var b={title:"发起推荐",className:"recommend",showHeader:!0},c=g();c.length>0&&(b.rightButtonText="修改推荐",b.rightButtonFun=function(){m.locationUrl("#fc3d&recommend=true"),m.clearCache("fc3dRecommend")}),o.setMain(a,b);var d={recommendContent:c};o.setContent(r.content(d)),$("#editSubmit").on("click",l),$("#selectMatch").on("click",function(a){m.locationUrl("#fc3d&recommend=true")}),m.isWeixinBrowser()?$("#fileSelectBox,#fileSelectedBox").on("click",i):$("#fileSelect,#fileSelected").on("change",k).show()}function f(){h()}function g(){var a=t.get("fc3dRecommend");return null===a||void 0===a?(t.set("fc3dRecommend","[]"),JSON.parse("[]")):""==a?JSON.parse("[]"):JSON.parse(a)}function h(){var a={};q.getPlanPrice(a,function(a){if(0!=a.errCode)return void n.showNotice(a.msg);var b=a.data||[],c={list:b};$("#amountList").html(r.amountList(c));var d=$("#amountList [amount]");d.on("click",function(a){d.removeClass("active"),$(this).addClass("active");var b=parseInt($(this).attr("amount"))||0;!isNaN(b)&&b>=0?$("#amount").val(b):$("#amount").val("")})})}function i(a){p.call("chooseImage",{count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){s=[];var b=a.localIds,c=[];$.each(b,function(a,b){c.push('<img class="planpicSmall img-responsive" src="'+b+'" />'),s.push(b)}),$("#fileList").html(c.join("")),$("#fileList .planpicSmall").on("click",j);var d=s.length;if(!(0>=d)){var e=$("#fileSelectBox"),f=$("#fileSelectedBox");d>0?(e.hide(),f.show()):(f.hide(),e.show())}}})}function j(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("src"))||s[0]||"";p.call("previewImage",{current:b,urls:s})}function k(a){s=[];var b={gif:!0,jpg:!0,jpeg:!0,png:!0},c=a.target.files||[];$.each(c,function(a,c){if(c.type)/\bimage\b/i.test(c.type)&&s.push(c);else{var d=trim(c.name),e=d.lastIndexOf(".");if(-1!=e){var f=d.substr(e+1).toLowerCase();b[f]&&s.push(c)}}});var d=s.length;if(!(0>=d)){var e=[],f=0,g=function(a){f++,e.push('<img class="planpicSmall" src="'+a.target.result+'" />'),f==d&&$("#fileList").html(e.join(""))};$.each(s,function(a,b){var c=new FileReader;c.onload=g,c.readAsDataURL(b)});var h=$("#fileSelectBox"),i=$("#fileSelectedBox");d>0?(h.hide(),i.show()):(i.hide(),h.show())}}function l(){var a=trim($("#content").val()),b=parseInt($("#amount").val()),c="FC3D",d=parseInt($("#issue").html()),e=s.length;if(0>=e&&(""==a||a.length<50))return void n.showNotice("分析文字不能少于50个字");if(isNaN(b)||0>b)return void n.showNotice("请选择方案定价");var f={"直选":"ZHX","和值":"ZHXHZ","组三":"ZU3","组六":"ZU6"},h=g(),i=[];h.forEach(function(a,b){"直选"==a.title?a.selectContent=a.selectContent.join("").split("|")[0].trim().split(" ")+"|"+a.selectContent.join("").split("|")[1].trim().split(" ")+"|"+a.selectContent.join("").split("|")[2].trim().split(" "):a.selectContent=a.selectContent.join(","),i.push(f[a.title]+":"+a.selectContent)}),i=i.join(";");var j=function(a){n.closeLoading(),q.createDigitalPlan(a,function(a){if(0!=a.errCode)return void n.showNotice(a.msg);var b=a.data||{},c=trim(b.planNo);return c?(n.showNotice("推荐发布成功"),void setTimeout(function(){m.locationUrl("#digitalPlanDetail&planNo="+c)},1e3)):void n.showNotice("方案生成异常")})},k={betContent:i,content:a,amount:b,matchType:0,issue:d,lotteryId:c},l=1e4;if(e>0&&(l=10*e*1e3),n.showLoading(l),e>0){var o=[],r=0;if(m.isWeixinBrowser())for(var t=0;e>t;t++){var u=trim(s[t]);p.call("uploadImage",{localId:u,isShowProgressTips:0,success:function(a){var b=a.serverId;r++,o.push(b),r==e&&(k.file=o,j(k))}})}else $.each(s,function(a,b){lrz(b).then(function(a){r++,o.push(a.file),r==e&&(k.file=o,j(k))})})}else j(k)}b.init=c,b._init=d,a("external/localResizeIMG");var m=a("module/common"),n=a("module/ui"),o=a("module/main"),p=a("module/weixin"),q=a("cgi/plan"),r=a("view/editDigitalPlan"),s=null,t=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/editPlan",function(a,b){function c(a){u=parseInt(n.getUrlParam("matchType"))||0,v=[],n.setHistoryBack("#my"),e(a),f()}function d(a){u=null,v=null,w=null}function e(a){var b={title:"发起推荐",className:"recommend",showHeader:!0,isRecommendHeader:!0};window.editPlanSelectMatch&&(b.rightButtonText="修改比赛",b.rightButtonFun=function(){window.matchSelectBettype=i(),n.locationUrl("#match&type="+u)}),p.setMain(a,b)}function f(){g()}function g(){var a=$("#recommendTab span");a.on("click",function(b){if(a.removeClass("active"),$(this).addClass("active"),w=parseInt($(this).attr("tab")),1==w){$("#pageHeader .rightIcon_top").show();var c={JSON:JSON,matchList:window.editPlanSelectMatch||[]};p.setContent(t.recommend(c)),$("#selectMatch").on("click",function(a){n.locationUrl("#match")})}else 2==w&&(window.editPlanSelectMatch=null,$("#pageHeader .rightIcon_top").hide(),p.setContent(t.replay()));$("#editSubmit").on("click",m),n.isWeixinBrowser()?$("#fileSelectBox,#fileSelectedBox").on("click",j):$("#fileSelect,#fileSelected").on("change",l).show(),h()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"));return d==w?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(){var a={};r.getPlanPrice(a,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||[],c={list:b};$("#amountList").html(t.amountList(c));var d=$("#amountList [amount]");d.on("click",function(a){d.removeClass("active"),$(this).addClass("active");var b=parseInt($(this).attr("amount"))||0;!isNaN(b)&&b>=0?$("#amount").val(b):$("#amount").val("")})})}function i(){var a=null,b=window.editPlanSelectMatch||[];return $.each(b,function(b,c){var d=c.match||{},e=c.odds||{},f=c.recommend||[],g=d.matchId||0,h=e.oddsId||0;0>=g||0>=h||!f||f.length<=0||(a||(a={}),a[g]={oddsId:h,recommend:f})}),a&&{selectMatch:a}||null}function j(a){q.call("chooseImage",{count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){v=[];var b=a.localIds,c=[];$.each(b,function(a,b){c.push('<img class="planpicSmall img-responsive" src="'+b+'" />'),v.push(b)}),$("#fileList").html(c.join("")),$("#fileList .planpicSmall").on("click",k);var d=v.length;if(!(0>=d)){var e=$("#fileSelectBox"),f=$("#fileSelectedBox");d>0?(e.hide(),f.show()):(f.hide(),e.show())}}})}function k(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("src"))||v[0]||"";q.call("previewImage",{current:b,urls:v})}function l(a){v=[];var b={gif:!0,jpg:!0,jpeg:!0,png:!0},c=a.target.files||[];$.each(c,function(a,c){if(c.type)/\bimage\b/i.test(c.type)&&v.push(c);else{var d=trim(c.name),e=d.lastIndexOf(".");if(-1!=e){var f=d.substr(e+1).toLowerCase();b[f]&&v.push(c)}}});var d=v.length;if(!(0>=d)){var e=[],f=0,g=function(a){f++,e.push('<img class="planpicSmall" src="'+a.target.result+'" />'),f==d&&$("#fileList").html(e.join(""))};$.each(v,function(a,b){var c=new FileReader;c.onload=g,c.readAsDataURL(b)});var h=$("#fileSelectBox"),i=$("#fileSelectedBox");d>0?(h.hide(),i.show()):(i.hide(),h.show())}}function m(){var a=trim($("#matchRecommend").val()),b=trim($("#title").val()),c=trim($("#content").val()),d=parseInt($("#amount").val()),e=v.length;if(1==w){if(0>=u)return void o.showNotice("赛事类型有误");if(""==a)return void o.showNotice("请选择赛事");if(0>=e&&(""==c||c.length<50))return void o.showNotice("分析文字不能少于50个字");if(isNaN(d)||0>d)return void o.showNotice("请选择方案定价")}else if(2==w){
if(""==b||b.length<5)return void o.showNotice("标题不能少于5个字");if(0>=e&&o.showNotice("请上传图片"),""==c||0==c.length)return void o.showNotice("复盘文字不能为空")}var f,g=function(a){o.closeLoading(),1==w?r.createPlan(a,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||{},c=trim(b.planNo);return c?(o.showNotice("推荐发布成功"),void setTimeout(function(){n.locationUrl("#planDetail&planNo="+c)},1e3)):void o.showNotice("方案生成异常")}):2==w&&s.createReplay(a,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||{},c=trim(b.replayNo);return c?(o.showNotice("复盘发布成功"),void setTimeout(function(){n.locationUrl("#replayDetail&replayNo="+c)},1e3)):void o.showNotice("复盘生成异常")})};1==w?f={matchRecommend:a,content:c,amount:d,matchType:u,title:b}:2==w&&(f={title:b,content:c});var h=1e4;if(e>0&&(h=10*e*1e3),o.showLoading(h),e>0){var i=[],j=0;if(n.isWeixinBrowser())for(var k=0;e>k;k++){var l=trim(v[k]);q.call("uploadImage",{localId:l,isShowProgressTips:0,success:function(a){var b=a.serverId;j++,i.push(b),j==e&&(f.file=i,g(f))}})}else $.each(v,function(a,b){lrz(b).then(function(a){j++,i.push(a.file),j==e&&(f.file=i,g(f))})})}else g(f);window.matchSelectBettype=null,window.editPlanSelectMatch=null}b.init=c,b._init=d,a("external/localResizeIMG");var n=a("module/common"),o=a("module/ui"),p=a("module/main"),q=a("module/weixin"),r=a("cgi/plan"),s=a("cgi/replay"),t=a("view/editPlan"),u=null,v=null,w=null}),define("controller/error",function(a,b){function c(a){j=decodeURIComponent(trim(g.getUrlParam("url")))||"/",e(a),f()}function d(a){j=null}function e(a){var b={className:"error"};h.setMain(a,b),h.setContent(i.content()),$("#backBtn").on("click",function(a){g.locationUrl(j)})}function f(){}b.init=c,b._init=d;var g=a("module/common"),h=(a("module/ui"),a("module/main")),i=a("view/error"),j=null}),define("controller/fc3d",function(a,b){function c(a){G=trim(y.getUrlParam("bet"))||!1,I=trim(y.getUrlParam("recommend"))||!1,J=parseInt(y.getUrlParam("channel")),K=trim(y.getUrlParam("planNo")),H=I?"fc3dRecommend":"fc3d",I&&G||(G?y.setHistoryBack("#fc3d"):I?y.setHistoryBack("#editDigitalPlan"):y.setHistoryBack("#lotteryHall")),e(a),f()}function d(a){I&&G&&L.remove("fc3dRecommend"),F=null,G=null,H=null,I=null,J=null,K=null,clearTimeout(v.timer),L.remove("fc3d")}function e(a){var b={title:G?"3D投注":"3D",className:"fc3d",showHeader:!0,rightButtonText:I?"确定":"开奖",rightButtonFun:I?x:g};I&&G&&(b.rightButtonText=""),A.setMain(a,b);var c={recommend:I};G?(A.setContent(E.fc3dBet()),$("#submitBtn").on("click",w)):(A.setContent(E.fc3dNum(c)),$("#ensureBtn").on("click",p))}function f(){h(),G&&r(),v(),3==J&&D.getUserInfo({},function(){},!0)}function g(){y.locationUrl("#drawHistory&lotteryId=FC3D")}function h(){var a=$("#typeList .item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),F=parseInt($(this).attr("type"))||1,$("#price").html("0 元"),$("#unit").html("注数：0 注"),1==F?k():2==F?l():3==F?m():4==F&&m()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return F==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function i(a){if(null!=a){var b=j();b.unshift(a);var c=JSON.stringify(b);L.set(H,c)}}function j(){var a=L.get(H);return null===a||void 0===a?""!=H?(L.set(H,"[]"),JSON.parse("[]")):{}:""==a?JSON.parse("[]"):JSON.parse(a)}function k(){for(var a=[],b=0;10>b;b++){var c={num:b,select:!1};a.push(c)}var d={optionalNum:a};$("#numList").html(E.ZHX(d)),n()}function l(){for(var a=[],b=0;28>b;b++){var c={num:b,select:!1};a.push(c)}var d={HzNum:a};$("#numList").html(E.HZ(d)),n()}function m(){for(var a=[],b=0;10>b;b++){var c={num:b,select:!1};a.push(c)}var d={ZxNum:a,type:F};$("#numList").html(E.ZUX(d)),n()}function n(){var a=$("#numBox .num_item_5,#numBox .num_item_6");a.on("click",function(){$(this).toggleClass("active"),o()})}function o(){var a,b=$("#numBox li.active"),c=$("#firstNum li.active").length||0,d=$("#secondNum li.active").length||0,e=$("#thirdNum li.active").length||0;if(1==F)a=c*d*e;else if(2==F){var f=[],g=$("#numBox li.active span");a=0;var h={0:1,1:3,2:6,3:10,4:15,5:21,6:28,7:36,8:45,9:55,10:63,11:69,12:73,13:75,14:75,15:73,16:69,17:63,18:55,19:45,20:36,21:28,22:21,23:15,24:10,25:6,26:3,27:1};g.each(function(a,b){var c=parseInt($(b).html());f.push(c)});for(var i=0;i<f.length;i++)a+=parseInt(h[f[i]])}else 3==F?a=2*y.ZH(b,F-1).length:4==F&&(a=y.ZH(b,F-1).length);$("#price").html(2*a+" 元"),$("#unit").html("注数："+a+" 注")}function p(){var a=parseInt($("#unit").html().replace(/\D/g,""));if(0>=a)return void z.showNotice("不满一注");var b=trim($("#typeList .item.active span").html());"和值"==b&&(b="直选和值");var c=q();i({title:b,selectContent:c,unit:a}),y.locationUrl("#fc3d&bet=ture")}function q(){var a,b=[];if(1==F){var c=$("#firstNum li.active"),d=$("#secondNum li.active"),e=$("#thirdNum li.active"),f=[],g=[],h=[];c.each(function(a,b){var c=$(b).find(".num").html();f.push(c)}),d.each(function(a,b){var c=$(b).find(".num").html();g.push(c)}),e.each(function(a,b){var c=$(b).find(".num").html();h.push(c)}),f.length>0&&g.length>0&&h.length>0&&b.push(f.join(" ")+" | "+g.join(" ")+" | "+h.join(" "))}else a=$("#numBox li.active"),a.each(function(a,c){var d=$(c).find(".num").html();b.push(d)});return b}function r(){var a=j();if(!a||a.length<=0)return void y.historyBack();var b={selectContent:a};$("#fc3dList").html(E.fc3dList(b)),s(),t(),u()}function s(){var a=j(),b=a.length;if(!(0>b)){for(var c=0,d=0,e=a.length;e>d;d++)unit=a[d].unit,c+=unit;var f=parseInt($("#multiple").val())||0,g=f*c*2;$("#totalUnit").html(c),$("#price").html(g)}}function t(){var a=1;$("#addMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b+=parseInt(a),b=b>9999?9999:b,$("#multiple").val(b).trigger("input")}),$("#minusMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b-=a,b=a>b?a:b,$("#multiple").val(b).trigger("input")}),$("#multiple").on("input",function(){var a=parseInt($("#multiple").val())||0;a=a=1>a?1:a>9999?9999:a,$("#multiple").val(a),s()})}function u(){$("#fc3dList .del_btn").on("click",function(a){var b=$(this).parents("li");b.remove();var c=b.attr("compare"),d=j(),e=[];d.forEach(function(a,b){a.title+a.selectContent.join(" ")!=c&&e.push(a)});var f=JSON.stringify(e);L.set(H,f),s()})}function v(){clearTimeout(v.timer);var a={lotteryId:"FC3D"};B.lotteryIssueInfo(a,function(a){if(0!=a.errCode)return void z.showNotice(a.msg);var b=a.data,c=b.issue,d=(b.countDown,b.endTime);d=d.replace(/\d{4}-(\d{2}-\d{2} \d{2}:\d{2}):\d{2}/,"$1"),$("#time").html(d),$("#issue").html(c)})}function w(){var a=$("#protocol")[0].checked,b=parseInt($("#multiple").val()),c=parseInt($("#issue").html()),d=parseInt($("#totalUnit").html()),e=parseInt($("#price").html());if(0>=d||0>=e)return void z.showNotice("请至少选择一注");if(!a)return void z.showNotice("请阅读并同意代购协议");if(!isDefined(b)||!/^[0-9]+$/.test(b))return void z.showNotice("请输入正整数倍数");var f={"直选":"ZHX","直选和值":"ZHXHZ","组三":"ZU3","组六":"ZU6"},g=j(),h=[];g.forEach(function(a,b){"直选"==a.title?a.selectContent=a.selectContent.join("").split("|")[0].trim().split(" ")+"|"+a.selectContent.join("").split("|")[1].trim().split(" ")+"|"+a.selectContent.join("").split("|")[2].trim().split(" "):a.selectContent=a.selectContent.join(","),h.push(f[a.title]+":"+a.selectContent)}),h=h.join(";");var i;i=K?{ticketMultiple:b,planNo:K}:{ticketMultiple:b,issue:c,lotteryId:"FC3D",betContent:h},C.createDigitalTicketOrder(i,function(a){if(0!=a.errCode)return void z.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){y.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(y.getLocationHash());y.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):z.showNotice("支付失败"),L.remove(H)})}function x(){var a=q();if(a.length<=0)return void z.showNotice("请选择推荐内容");var b=trim($("#typeList .item.active span").html()),c=parseInt($("#issue").html());i({issue:c,title:b,selectContent:a}),y.locationUrl("#editDigitalPlan")}b.init=c,b._init=d,a("external/vue");var y=a("module/common"),z=a("module/ui"),A=a("module/main"),B=a("cgi/lottery"),C=a("cgi/order"),D=a("cgi/user"),E=a("view/fc3d"),F=null,G=null,H=null,I=null,J=null,K=null,L=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/focusList",function(a,b){function c(a){u=1,v=10,w&&o.setHistoryBack("#home"),e(a),f()}function d(a){u=null,v=null}function e(a){var b={title:"",className:"attention",showHeader:!0,isFocusHeader:!0,showFooter:w?!0:!1};q.setMain(a,b);var c=$("#focusTab span");c.on("click",function(a){c.removeClass("active"),$(this).addClass("active");var b=parseInt($(this).attr("type"))||0;1==b?(q.setContent(t.focusListBox()),$("#jumpFocus").on("click",function(a){$("#showNoFocusList").hide(),$("#noFocusList [userNo]").each(function(a,b){var c=parseInt($(b).attr("status"))||0;return 2==c?(h(),!1):void 0})}),h()):2==b&&(q.setContent(t.userListBox()),m())}),c.eq(0).click()}function f(){}function g(){u++,h(!0)}function h(a){q.unsetScrollLoad();var b={pageNum:u,pageSize:v};r.getFocusList(b,function(b){if(0!=b.errCode)return void p.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/v);d>u&&q.setScrollLoad(g);var e=b.data&&b.data.list||[];if(0==e.length)return $("#showNoFocusList").show(),void i();$("#showNoFocusList").hide();var f={IMG_PATH:IMG_PATH,list:e};a?$("#focusList").append(t.focusList(f)):$("#focusList").html(t.focusList(f));var h=$("#focusList .attention_list_box");h.off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&o.locationUrl("#userDetail&userNo="+b)})},function(){q.setScrollLoad(g)})}function i(){var a={groupNo:"5F5E103-BC6152",pageNum:1,pageSize:200};s.getUserList(a,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b};$("#noFocusList").html(t.noFocusList(c)),$("#noFocusList [userNo]").each(function(a,b){l.call(b)})})}function j(a){var b=this,c=$(b).attr("userNo")||"";if(c){var d={userNo:c};p.showConfirm("关注专家，同时关注“晒米场”微信公共号，您的微信将在第一时间收到专家推荐的更新通知。如果您觉得骚扰，可以取消关注该专家。",function(){r.createFocus(d,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);a.data||{};p.showNotice("添加关注成功"),p.closeConfirm(),$(b).attr("status","2"),l.call(b)})},function(){})}}function k(a){var b=this,c=$(b).attr("userNo")||"";if(c){var d={userNo:c};p.showConfirm("您将收不到专家推荐的更新通知。您确认取消关注吗？",function(){r.cancelFocus(d,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);a.data||{};p.showNotice("取消关注成功"),p.closeConfirm(),$(b).attr("status","1"),l.call(b)})},function(){})}}function l(){var a=parseInt($(this).attr("status"))||0;if(!(0>=a)){var b="",c="",d=null;1==a?(b="+关注",c="attention_focus",d=j):2==a&&(b="已关注",c="attention_focus active",d=k),$(this).attr("class",c).html(b).off().on("click",d)}}function m(){var a={pageNum:1,pageSize:10};s.getGroupList(a,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};$("#groupList").html(t.groupList(c));var d=$("#groupList .item");d.on("click",function(a){$("#groupList .item").removeClass("active"),$(this).addClass("active");var b=trim($(this).attr("groupNo"));n(b)});var e=d.eq(0);e.click();var f=e.position();$("#groupList").scrollLeft(f.left)})}function n(a){if(a){var b={groupNo:a,pageNum:1,pageSize:200};s.getUserList(b,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data&&a.data.list||[],c=b.length||0,d=4-c%4;4==d&&(d=0);for(var e=0;d>e;e++)b.push({nickName:"",profileImg:IMG_PATH+"user_default.png"});var f={IMG_PATH:IMG_PATH,list:b};$("#userList").html(t.userList(f)),$("#userList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&o.locationUrl("#userDetail&userNo="+b)})})}}b.init=c,b._init=d;var o=a("module/common"),p=a("module/ui"),q=a("module/main"),r=a("cgi/focus"),s=a("cgi/user"),t=a("view/focusList"),u=null,v=null,w=o.isWeixinBrowser()}),define("controller/girlPlan",function(a,b){function c(a){q=1,r=5,s=!0,l.setHistoryBack("#home"),e(a),f()}function d(a){q=null,r=null,s=null}function e(a){var b={title:"美女推波",className:"belle",isScrollHeader:!0};n.setMain(a,b);var c={};n.setContent(p.content(c)),$("#backBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),l.historyBack()}),$("#homeBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),l.locationUrl("#home")}),h()}function f(){j(),g()}function g(){var a={imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/mntb.png",desc:"美女推波"};m.setShare(a)}function h(){$("#pageContent").on("scroll",function(){var a=this,b=a.scrollHeight,c=a.offsetHeight,d=a.scrollTop,e=50;if(d>e?$("#pageHeader").show().attr("class","header fade_in"):$("#pageHeader").attr("class","header fade_out"),s){var f=b-c;30>=f-d&&i()}})}function i(){q++,j(!0)}function j(a){s=!1;var b={needGirl:!0,needUser:!0,needAccess:!0,pageNum:q,pageSize:r};o.getPlanList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);s=d>q;var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#planList").append(p.planList(f)):$("#planList").html(p.planList(f)),$("#planList .userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d){var f=l.getLoginUser(),g=trim(f&&f.userNo||""),h=g?"?spreaderUserNo="+g:"",i={title:d,link:location.href.replace(/[#\?].*/g,"")+h+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场美女推波",success:function(){m.setShare()},cancel:function(){m.setShare()}};m.showShare(i)}}),$("#planList .userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount"));if(b){var g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};m.showCreateTicketOrder(g)}}),$("#planList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)}),$("#planList .planItem").off().on("click",k)},function(){s=!0})}function k(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=parseInt($(this).attr("matchNum"))||0;if(b&&0>=c)return void l.locationUrl("#userDetail&userNo="+b);var d=trim($(this).attr("planNo")),e=parseInt($(this).attr("amount")),f=trim($(this).attr("access"));if(!(!d||isNaN(e)||0>e)){if("true"==f)return void l.locationUrl("#planDetail&planNo="+d);var g={planNo:d,amount:e};m.showCreateOrder(g)}}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/plan"),p=a("view/girlPlan"),q=null,r=null,s=null}),define("controller/gx11x5",function(a,b){function c(a){J=trim(C.getUrlParam("bet"))||!1,L="gx11x5",J?C.setHistoryBack("#gx11x5"):C.setHistoryBack("#lotteryHall"),e(a),f()}function d(a){I=null,J=null,K=null,L=null,clearTimeout(z.timer),M.remove("gx11x5")}function e(a){var b={title:J?"乐11选5投注":"乐11选5",className:"k3",showHeader:!0,isDigitalHeader:J?!1:!0,isLeftIconHeader:J?!0:!1,rightButtonText:"助手",rightButtonFun:function(){var a=trim($("#assistantMenu").css("display"));"none"==a?h():i()}};E.setMain(a,b),J?(E.setContent(H.gx11x5Bet()),$("#submitBtn").on("click",A)):(E.setContent(H.gx11x5Num()),$("#ensureBtn").on("click",t)),$("#digitalTitleWrap").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($("#navWrap").css("display"));"none"==b?j():k()})}function f(){l(),J&&v(),z(),B()}function g(){C.locationUrl("#drawHistory&lotteryId=GX11X5")}function h(){$("#assistantMenu").show(),$("#pageContainer").off().on("click",i),$("#assistantMenuContent").off().on("click",function(a){a.preventDefault(),a.stopPropagation()}),$("#recentlyDraw").on("click",g),$("#digitalRule").on("click",function(){C.locationUrl("#lotteryRules&lotteryId=GX11X5")})}function i(){$("#assistantMenu").hide(),$("#pageContainer").off("click"),$("#assistantMenuContent").off("click")}function j(){$("#navWrap").show(),$("#pageContainer").off().on("click",k),$("#typeList").off().on("click",function(a){a.preventDefault(),a.stopPropagation()})}function k(){$("#navWrap").hide(),$("#pageContainer").off("click"),$("#typeList").off("click")}function l(){var a=$("#typeList .item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active");var c=$(this).find(".type").html();I=parseInt($(this).attr("type"))||1,$("#price").html("0 元"),$("#unit").html("注数：0 注"),$("#digitalTitleTxt").html(c),I>=1&&7>=I?o():8==I?p():9==I?q():10==I?q():11==I?q():12==I&&q(),k()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return I==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function m(a){if(null!=a){var b=n();b.unshift(a);var c=JSON.stringify(b);M.set(L,c)}}function n(){var a=M.get(L);return null===a||void 0===a?""!=L?(M.set(L,"[]"),JSON.parse("[]")):{}:""==a?JSON.parse("[]"):JSON.parse(a)}function o(){for(var a=[],b=1;12>b;b++){var c={num:b,select:!1};a.push(c)}var d={optionalNum:a,type:I};$("#numList").html(H.optional(d)),r()}function p(){for(var a=[],b=1;12>b;b++){var c={num:b,select:!1};a.push(c)}var d={optionalNum:a};$("#numList").html(H.Q1(d)),r()}function q(){for(var a=[],b=1;12>b;b++){var c={num:b,select:!1};a.push(c)}var d={optionalNum:a};if(9==I?$("#numList").html(H.Q2ZHX(d)):10==I?$("#numList").html(H.Q2ZUX(d)):11==I?$("#numList").html(H.Q3ZHX(d)):12==I&&$("#numList").html(H.Q3ZUX(d)),9==I||11==I){var e=$("#numBox .num_item_6");e.on("click",function(a){var b=(trim(this.className),$(this).parents("#numBox").eq(0)),c=$(this).data("value"),d=this.parentNode,e=b.find(".num_wrap");e.each(function(a,b){d!=b&&$(b).find('[data-value="'+c+'"]').removeClass("active")}),$(this).toggleClass("active"),s()})}else(10==I||12==I)&&r()}function r(){var a=$("#numBox .num_item_6");a.on("click",function(){$(this).toggleClass("active"),s()})}function s(){var a,b=$("#numBox li.active"),c=$("#firstNum li.active").length||0,d=$("#secondNum li.active").length||0,e=$("#thirdNum li.active").length||0;a=I>=1&&7>=I?C.ZH(b,I+1).length:9==I?c*d:11==I?c*d*e:parseInt(b.length),$("#price").html(2*a+" 元"),$("#unit").html("注数："+a+" 注")}function t(){var a=parseInt($("#unit").html().replace(/\D/g,""));if(0>=a)return void D.showNotice("不满一注");var b=trim($("#typeList .item.active .type").html()),c=u();m({title:b,recommend:c,unit:a}),C.locationUrl("#gx11x5&bet=ture")}function u(){var a,b=[];if(9==I||11==I){var c=$("#firstNum li.active"),d=$("#secondNum li.active"),e=$("#thirdNum li.active"),f=[],g=[],h=[];c.each(function(a,b){var c=$(b).find(".num").html();c=10>c?"0"+c:c,f.push(c)}),d.each(function(a,b){var c=$(b).find(".num").html();c=10>c?"0"+c:c,g.push(c)}),e.each(function(a,b){var c=$(b).find(".num").html();c=10>c?"0"+c:c,h.push(c)}),9==I?b.push(f.join("　")+" , "+g.join("　")):11==I&&b.push(f.join("　")+" , "+g.join("　")+" , "+h.join("　"))}else a=$("#numBox li.active"),a.each(function(a,c){var d=$(c).find(".num").html();d=10>d?"0"+d:d,b.push(d)});return b}function v(){var a=n();if(!a||a.length<=0)return void C.historyBack();var b={selectContent:a};$("#gx11x5List").html(H.gx11x5List(b)),w(),x(),y()}function w(){var a=n(),b=a.length;if(!(0>b)){for(var c=0,d=0,e=a.length;e>d;d++)unit=a[d].unit,c+=unit;var f=parseInt($("#multiple").val())||0,g=f*c*2;$("#totalUnit").html(c),$("#price").html(g)}}function x(){var a=1;$("#addMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b+=parseInt(a),b=b>9999?9999:b,$("#multiple").val(b).trigger("input")}),$("#minusMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b-=a,b=a>b?a:b,$("#multiple").val(b).trigger("input")}),$("#multiple").on("input",function(){var a=parseInt($("#multiple").val())||0;a=a=1>a?1:a>9999?9999:a,$("#multiple").val(a),w()})}function y(){$("#gx11x5List .del_btn").on("click",function(a){var b=$(this).parents("li");b.remove();var c=b.attr("compare"),d=n(),e=[];d.forEach(function(a,b){a.title+a.recommend.join(" ")!=c&&e.push(a)});var f=JSON.stringify(e);M.set(L,f),w()})}function z(){clearTimeout(z.timer);var a={lotteryId:"GX11X5"};F.lotteryIssueInfo(a,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);var b=a.data,c=b.issue,d=b.countDown,e=function(){if(d--,d>0){var a=Math.floor(d/60/60),b=Math.floor(d/60%60),f=Math.floor(d%60);a=10>a?"0"+a:a,b=10>b?"0"+b:b,f=10>f?"0"+f:f,a>0?$("#time").html(a+":"+b+":"+f):$("#time").html(b+":"+f),$("#issue").html(c),z.timer=setTimeout(e,1e3)}else D.showAlert("现在"+c+"期已截止，新一期正在销售"),z()};e()})}function A(){var a=$("#protocol")[0].checked,b=parseInt($("#multiple").val()),c=parseInt($("#issue").html()),d=parseInt($("#totalUnit").html()),e=parseInt($("#price").html());if(0>=d||0>=e)return void D.showNotice("请至少选择一注");if(!a)return void D.showNotice("请阅读并同意代购协议");if(!isDefined(b)||!/^[0-9]+$/.test(b))return void D.showNotice("请输入正整数倍数");var f={"任二":"RX2","任三":"RX3","任四":"RX4","任五":"RX5","任六":"RX6","任七":"RX7","任八":"RX8","前一":"Q1","前二直选":"Q2ZHX","前二组选":"Q2ZUX","前三直选":"Q3ZHX","前三组选":"Q3ZUX"},g=n(),h=[];g.forEach(function(a,b){"前二直选"==a.title?a.recommend=a.recommend.join("").split(",")[0].trim().split("　")+"|"+a.recommend.join("").split(",")[1].trim().split("　"):"前三直选"==a.title?a.recommend=a.recommend.join("").split(",")[0].trim().split("　")+"|"+a.recommend.join("").split(",")[1].trim().split("　")+"|"+a.recommend.join("").split(",")[2].trim().split("　"):a.recommend=a.recommend.join(","),h.push(f[a.title]+":"+a.recommend)}),h=h.join(";");var i={ticketMultiple:b,issue:c,lotteryId:"GX11X5",betContent:h};G.createDigitalTicketOrder(i,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){C.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(C.getLocationHash());C.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):D.showNotice("支付失败"),M.remove("gx11x5")})}function B(){E.unsetScrollLoad();var a={lotteryId:"GX11X5"};F.lotteryIssueList(a,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);var b=a.data&&a.data.list||[],c=b[0].issue,d=b[0].drawNumber||"";d=d.split(","),$("#lastIssue").html(c),$("#result").html('<span class="last_draw_num">'+d[0]+'</span><span class="last_draw_num">'+d[1]+'</span><span class="last_draw_num">'+d[2]+'</span><span class="last_draw_num">'+d[3]+'</span><span class="last_draw_num">'+d[4]+"</span>")})}b.init=c,b._init=d,a("external/vue");var C=a("module/common"),D=a("module/ui"),E=a("module/main"),F=a("cgi/lottery"),G=a("cgi/order"),H=a("view/gx11x5"),I=null,J=null,K=null,L=null,M=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/home",function(a,b){function c(a){J=1,K=8,L=!0,e(a),f()}function d(a){J=null,K=null,L=null,clearTimeout(w.timer),clearTimeout(x.timer),clearTimeout(y.timer)}function e(a){var b={title:"晒米场",className:"index",showFooter:!0};C.setMain(a,b);var c={IMG_PATH:IMG_PATH};C.setContent(I.content(c)),k(),$("#signBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),A.locationUrl("#sign")}),l()}function f(){n(),j(),v(),i(),h(),y(),g(),z()}function g(){if(A.isWeixinBrowser()){var a={desc:"竞彩实单推荐平台, 足球篮球赛事预测"};B.setShare(a)}}function h(){var a=$("#recommendTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),J=1,K=8,o()}),a.eq(0).click()}function i(){var a=$("#hotMatchTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),u()}),a.eq(0).click()}function j(){var a=$("#userTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active");var c=trim($(this).attr("userType"));1==c?p():2==c?q():3==c&&r()}),a.eq(0).click()}function k(){$(".banner [groupNo]").on("click",function(a){var b=trim($(this).attr("groupNo"));b&&("jxzp"==b?A.locationUrl("#jxzpList"):"girlPlan"==b?A.locationUrl("#girlPlan"):"5F5E101-BC6150"==b?A.locationUrl("#cdsd"):"bet"==b?A.locationUrl("#ticketFollow"):"free"==b?A.locationUrl("#sign"):"cphb"==b?A.locationUrl("#createPresentOrder"):"replay"==b?A.locationUrl("#replayList"):A.locationUrl("#userList&groupNo="+b))})}function l(){$("#pageContent").on("scroll",function(){var a=this,b=a.scrollHeight,c=a.offsetHeight,d=a.scrollTop;if(L){var e=b-c;30>=e-d&&m()}})}function m(){J++,o(!0)}function n(){var a={};F.getBannerList(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};$("#bannerList").html(I.bannerList(c)),$("#dotList").html(I.dotList(c)),s()})}function o(a){L=!1;var b=parseInt($("#recommendTab [matchType].active").eq(0).attr("matchType"))||0,c={matchType:b,needHome:!0,needUser:!0,needAccess:!0,pageNum:J,pageSize:K};D.getPlanList(c,function(b){if(0!=b.errCode)return void B.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/K);L=d>J;var e=b.data&&b.data.list||[];if(e.length<=0&&!o.first)return o.first=!0,void $("#recommendTab span").eq(1).click();var f={IMG_PATH:IMG_PATH,list:e};a?$("#planList").append(I.planList(f)):$("#planList").html(I.planList(f)),$("#planList .userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d&&A.isWeixinBrowser()){var f=A.getLoginUser(),h=trim(f&&f.userNo||""),i=h?"?spreaderUserNo="+h:"",j={title:d,link:location.href.replace(/[#\?].*/g,"")+i+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场足球推荐专家",success:function(){g()},cancel:function(){g()}};B.showShare(j)}}),$("#planList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&A.locationUrl("#userDetail&userNo="+b)}),$("#planList .planItem").off().on("click",t),$("#planList .userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount"));if(b){var g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};B.showCreateTicketOrder(g)}})},function(){L=!0})}function p(){var a={groupNo:"5F5E103-BC6152",pageNum:1,pageSize:23};E.getUserList(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,type:1};$("#userList").html(I.userList(c)),$("#userList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&A.locationUrl("#userDetail&userNo="+b)}),$("#readMore").off().on("click",function(a){A.locationUrl("#userList&groupNo=5F5E103-BC6152")})})}function q(){var a={pageNum:1,pageSize:7};E.getWinRateRankList(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,type:2};$("#userList").html(I.userList(c)),$("#userList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&A.locationUrl("#userDetail&userNo="+b)}),$("#readMore").off().on("click",function(a){A.locationUrl("#userRankList&type=2")})})}function r(){var a={pageNum:1,pageSize:7};E.getProfitRateRankList(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,type:3};$("#userList").html(I.userList(c)),$("#userList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&A.locationUrl("#userDetail&userNo="+b)}),$("#readMore").off().on("click",function(a){A.locationUrl("#userRankList&type=3")})})}function s(){$("#bannerList").slidesjs({width:375,height:125,navigation:!1,pagination:!1,play:{active:!1,effect:"slide",interval:3e3,auto:!0,swap:!0,pauseOnHover:!1,restartDelay:2500},callback:{loaded:function(a){},start:function(a){},complete:function(a){var b=a-1,c=$("#dotList .dot");c.removeClass("active"),c.eq(b).addClass("active")}}})}function t(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("amount")),d=trim($(this).attr("access"));if(!(!b||isNaN(c)||0>c)){if("true"==d)return void A.locationUrl("#planDetail&planNo="+b);var e={planNo:b,amount:c};B.showCreateOrder(e)}}function u(){clearTimeout(w.timer),clearTimeout(x.timer);var a=parseInt($("#hotMatchTab [type].active").eq(0).attr("type"))||0,b={type:a,pageNum:1,pageSize:1,status:4};G.getHotMatchList(b,function(b){if(0!=b.errCode)return void B.showNotice(b.msg);var c=(b.data&&b.data.totalCount||0,b.data&&b.data.list||[]);if(c.length<=0)return void(1==a?u.first||(u.first=!0,$("#hotMatchTab span").eq(1).click()):2==a&&$("#matchList").html(""));var d={IMG_PATH:IMG_PATH,list:c};$("#matchList").html(I.matchList(d)),$("#matchList .hotGame_box").on("click",function(b){A.locationUrl("#hotMatch&type="+a)}),1==a?w():2==a&&x()})}function v(){if(A.isLogin()){var a={};E.getUserInfo(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data||{},c=b.isABT;c?$("#bet").show():$("#trader").show()})}else $("#trader").show()}function w(){var a="http://i.sporttery.cn/api/match_live_2/get_match_updated";$.ajax({url:a,type:"get",dataType:"script",cache:!1,success:function(){for(var a=window.match_updated||[],b=0,c=a.length;c>b;b++){var d=a[b].m_id||0,e=a[b].minute||0,f=a[b].fs_h||0,g=a[b].fs_a||0,h=trim(a[b].status);0>=d||(e>0?($("#beginTime"+d).hide(),$("#minute"+d).html(e+"<sup>'</sup>").show()):($("#minute"+d).hide(),$("#beginTime"+d).show()),"Playing"==h?($("#vs"+d).hide(),$("#score"+d).html(f+"&nbsp;:&nbsp;"+g).show()):($("#score"+d).hide(),$("#vs"+d).show()))}w.timer=setTimeout(w,15e3)}})}function x(){var a=new Date,b=A.formatDate(a,"yyyy-MM-dd"),c="http://u1.tiyufeng.com/v2/game/date_game_list?date="+b;$.ajax({url:c,type:"get",dataType:"jsonp",cache:!1,jsonp:"callBack",jsonpCallback:"basketBallScore",success:function(a){var b=[],c=[],d=[];$(".hotGame_box .basketballHome").each(function(a,c){var e=trim($(this).text()),f=$(this).parents("li.hotGame_box").attr("sportterymatchid");b.push(e),d.push(f)}),$(".hotGame_box .basketballAway").each(function(a,b){var d=trim($(this).text());c.push(d)});for(var e=0,f=a.length;f>e;e++)for(var g=parseInt(a[e].gameStatus)||1,h=trim(a[e].homeName)||"",i=trim(a[e].guestName)||"",j=parseInt(a[e].homeScore)||0,k=parseInt(a[e].guestScore)||0,l=(trim(a[e].itemName)||"",trim(a[e].leagueName)||"",trim(a[e].statusDesc)||""),m=0,n=b.length;n>m;m++)if(b[m]==h&&c[m]==i){var o=d[m];"第一节"==l||"第二节"==l||"中场"==l||"第三节"==l||"第四节"==l?($("#beginTime"+o).hide(),$("#minute"+o).html(l).show()):($("#minute"+o).hide(),$("#beginTime"+o).show()),2==g?($("#vs"+o).hide(),$("#score"+o).html(k+"&nbsp;-&nbsp;"+j).show()):($("#score"+o).hide(),$("#vs"+o).show())}x.timer=setTimeout(x,15e3)}})}function y(){clearTimeout(y.timer);var a={pageNum:1,pageSize:8};E.getUserRankList(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);var b=a.data&&a.data.list||[];if(!(b.length<=0)){var c={list:b};$("#rankList").html(I.rankList(c)),$("#rankBox").off().on("click",function(a){A.locationUrl("#userRankList")}).show();var d=function(){var a=$("#rankList"),b=a.find("li"),c=b.length;if(!(1>=c)){var e=b.eq(0),f=e.outerHeight(!0);e.animate({marginTop:-f},500,function(){e.appendTo(a).css({marginTop:0}),y.timer=setTimeout(d,5e3)})}};y.timer=setTimeout(d,5e3)}})}function z(){var a={};H.getFloatIconInfo(a,function(a){if(0!=a.errCode)return void B.showNotice(a.msg);$("#pageContainer").append(I.floatIcon());var b=a.data,c=b.width/3+"px",d=b.height/3+"px",e=b.href,f=b.src;$("#floatImgWrap").css({width:c,height:d}),$("#floatImg").attr("src",f),$("#floatImgWrap").on("click",function(a){a.preventDefault(),a.stopPropagation(),A.locationUrl(e)})})}b.init=c,b._init=d,a("external/jquery.slides");var A=a("module/common"),B=a("module/ui"),C=a("module/main"),D=a("cgi/plan"),E=a("cgi/user"),F=(a("cgi/order"),
a("cgi/banner")),G=a("cgi/match"),H=a("cgi/floatIcon"),I=a("view/home"),J=null,K=null,L=null}),define("controller/hotMatch",function(a,b){function c(a){w=parseInt(r.getUrlParam("type"))||1,x=1,y=8,r.setHistoryBack("#home"),e(a),f()}function d(a){w=null,x=null,y=null,j(),clearTimeout(p.timer),clearTimeout(q.timer)}function e(a){var b={title:"",className:"hotGame",showHeader:!0,isHotMatchHeader:!0,showFooter:!0,rightButtonText:"筛选",rightButtonFun:function(){var a=trim($("#matchFilter").css("display"));"none"==a?i():j()}};t.setMain(a,b),t.setContent(v.content())}function f(){l()}function g(){x++,o(!0)}function h(){$("#selectLeague").val("");var a=parseInt($("#matchStatusBox [matchStatus].active").eq(0).attr("matchStatus"))||4,b={type:w,status:a,pageNum:1,pageSize:200};u.getHotMatchLeagueList(b,function(a){if(0!=a.errCode)return void s.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};$("#leagueList").html(v.leagueList(c)),$("#leagueList .hot_markSon").on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).toggleClass("active")}),$("#checkedAll").on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).addClass("active"),$("#leagueList .hot_markSon").addClass("active")}),$("#inverse").off().on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).addClass("active"),$("#leagueList .hot_markSon").toggleClass("active")}),$("#ensure").off().on("click",k);var d=[];$.each(b,function(a,b){var c=trim(b.league);c&&d.push(c)}),$("#selectLeague").val(d.join("|"))})}function i(){$("#matchFilterTab span").removeClass("active"),$("#matchFilter").show(),$("#pageHeader,#matchFilter").off().on("click",j),$("#matchFilterTab,#leagueList").off().on("click",function(a){a.preventDefault(),a.stopPropagation()})}function j(){$("#matchFilter").hide(),$("#pageHeader,#matchFilter").off("click"),$("#matchFilterTab,#leagueList").off("click")}function k(){var a=$("#leagueList .hot_markSon.active"),b=[];return a.each(function(a,c){var d=trim(c.innerHTML);d&&b.push(d)}),b.length<=0?void s.showNotice("至少选择一个联赛"):($("#selectLeague").val(b.join("|")),j(),x=1,y=8,void o())}function l(){var a=$("#matchTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),w=parseInt($(this).attr("type"))||1,m()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return w==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function m(){var a=$("#matchStatusBox .ui-flex_item");a.off().on("click",function(b){a.removeClass("active"),$(this).addClass("active"),h(),x=1,y=8,o()}),a.eq(0).click()}function n(a){var b=trim($("#selectLeague").val()),c=$("#leagueList .hot_markSon"),d=[];if(c.each(function(a,b){var c=trim(b.innerHTML);c&&d.push(c)}),d.join("|")!=b&&b&&(b=b.split("|"),b&&b.length>0)){var d=[];$(b).each(function(a,b){b=trim(b),b&&d.push(b)}),a.league=d}}function o(a){t.unsetScrollLoad(),clearTimeout(p.timer),clearTimeout(q.timer);var b=parseInt($("#matchStatusBox [matchStatus].active").eq(0).attr("matchStatus"))||4,c={type:w,status:b,pageNum:x,pageSize:y};n(c),u.getHotMatchList(c,function(c){if(0!=c.errCode)return void s.showNotice(c.msg);var d=c.data&&c.data.totalCount||0,e=Math.ceil(d/y);e>x&&t.setScrollLoad(g);var f=c.data&&c.data.list||[],h={IMG_PATH:IMG_PATH,list:f};a?$("#matchList").append(v.matchList(h)):$("#matchList").html(v.matchList(h)),$("#matchList .hotGame_box").on("click",function(a){var b=parseInt($(this).attr("matchId"));isNaN(b)||0>=b||r.locationUrl("#hotMatchDetail&matchId="+b+"&type="+w)}),4==b&&f.length>0&&(1==w?p():2==w&&q())},function(){t.setScrollLoad(g)})}function p(){var a="//i.sporttery.cn/api/match_live_2/get_match_updated";$.ajax({url:a,type:"get",dataType:"script",cache:!1,success:function(){for(var a=window.match_updated||[],b=0,c=a.length;c>b;b++){var d=a[b].m_id||0,e=a[b].minute||0,f=a[b].fs_h||0,g=a[b].fs_a||0,h=trim(a[b].status);0>=d||(e>0?($("#beginTime"+d).hide(),$("#minute"+d).html(e+"<sup>'</sup>").show()):($("#minute"+d).hide(),$("#beginTime"+d).show()),"Playing"==h?($("#vs"+d).hide(),$("#score"+d).html(f+"&nbsp;-&nbsp;"+g).show()):($("#score"+d).hide(),$("#vs"+d).show()))}p.timer=setTimeout(p,15e3)}})}function q(){var a=new Date,b=r.formatDate(a,"yyyy-MM-dd"),c="//u1.tiyufeng.com/v2/game/date_game_list?date="+b;$.ajax({url:c,type:"get",dataType:"jsonp",cache:!1,jsonp:"callBack",jsonpCallback:"basketBallScore",success:function(a){var b=[],c=[],d=[];$(".hotGame_box .basketballHome").each(function(a,c){var e=trim($(this).text().replace("(主)","")),f=$(this).parents("li.hotGame_box").attr("sportterymatchid");b.push(e),d.push(f)}),$(".hotGame_box .basketballAway").each(function(a,b){var d=trim($(this).text());c.push(d)});for(var e=0,f=a.length;f>e;e++)for(var g=parseInt(a[e].gameStatus)||1,h=trim(a[e].homeName)||"",i=(trim(a[e].guestName)||"",parseInt(a[e].homeScore)||0),j=parseInt(a[e].guestScore)||0,k=(trim(a[e].itemName)||"",trim(a[e].leagueName)||"",trim(a[e].statusDesc)||""),l=0,m=b.length;m>l;l++)if(b[l]==h){var n=d[l];"第一节"==k||"第二节"==k||"中场"==k||"第三节"==k||"第四节"==k?($("#beginTime"+n).hide(),$("#minute"+n).html(k).show()):($("#minute"+n).hide(),$("#beginTime"+n).show()),2==g?($("#vs"+n).hide(),$("#score"+n).html(j+"&nbsp;-&nbsp;"+i).show()):($("#score"+n).hide(),$("#vs"+n).show())}q.timer=setTimeout(q,15e3)}})}b.init=c,b._init=d;var r=a("module/common"),s=a("module/ui"),t=a("module/main"),u=a("cgi/match"),v=a("view/hotMatch"),w=null,x=null,y=null}),define("controller/hotMatchDetail",function(a,b){function c(a){M=parseInt(C.getUrlParam("type"))||1,O=parseInt(C.getUrlParam("matchId"))||0,P=parseInt(C.getUrlParam("tab"))||1,W={},U=1,V=8,C.setHistoryBack("#hotMatch&type="+M),window.signleSelectBettype||(window.signleSelectBettype={selectMatch:{}}),e(a),f()}function d(a){M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=null,X=null,clearTimeout(A.timer),clearTimeout(B.timer)}function e(a){var b={title:"热门赛事",className:"hotGame"};E.setMain(a,b);var c={type:M,IMG_PATH:IMG_PATH};E.setContent(L.content(c)),$("#backBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),C.historyBack(),window.signleSelectBettype=null}),$("#homeBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),C.locationUrl("#home")})}function f(){h(),i(),1==M?m():q()}function g(){var a={desc:"【"+T+"】"+R+" vs "+S+"-晒米场专家推荐汇总"};D.setShare(a)}function h(){var a={};H.getUserInfo(a,function(a){return 0!=a.errCode?void D.showNotice(a.msg):void(N=a.data||{})})}function i(){if(!(isNaN(O)||0>=O)){var a={matchId:O};F.getMatchInfo(a,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);X=a.data||{},T=trim(X.league)||"",R=trim(X.home)||"",S=trim(X.away)||"";var b=trim(X.result)||"",c=X.isSale||!1;c&&$("#tabDg").show();var d={IMG_PATH:IMG_PATH,match:X};if($("#match").html(L.match(d)),1!=M||b?2!=M||b||B():A(),5==P){1==M?$("#moreGame").html(L.football(d)):2==M&&$("#moreGame").html(L.basketball(d)),l();var e=$(".matchBettype"),f=e.find("td[recommend]");f.on("click",function(a){var b=trim(this.className),c=$(this).parents(".matchBettype")[0],d=$(c).find("td.active");if(-1==b.indexOf("active")&&d.length>=6)return void D.showNotice("同种玩法最多选择6个");e.each(function(a,b){c!=b&&$(b).find("td").removeClass("active")}),$(this).toggleClass("active");var f=$(".matchBettype:has(td.active)"),g=f.length;g>0?$("#btnWarp").show():$("#btnWarp").hide()}),$("#sumbitBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),k()})}g()})}}function j(){var a=$(".matchBettype:has(td.active)");a=a.eq(0);var b=parseInt(a.attr("oddsId"));if(!(isNaN(b)||0>=b)){var c=[],d=a.find("td.active");d.each(function(a,b){var d=trim($(b).attr("recommend"));d&&c.push(d)}),window.signleSelectBettype.selectMatch[O]={oddsId:b,recommend:c}}}function k(){j();var a=[],b=window.signleSelectBettype.selectMatch||{},c={};$.each(X.bettype,function(a,b){var d=parseInt(b.oddsId)||0;isNaN(d)||0>=d||(c[d]=b)}),$.each(b,function(b,d){b=parseInt(b);var e=parseInt(d.oddsId),f=d.recommend||[];isNaN(b)||0>=b||isNaN(e)||0>=e||!f||f.length<=0||!X||!c[e]||a.push({match:X,matchId:b,odds:c[e],recommend:f})}),window.signleSelectBettype=null,window.editSelfSelectMatch=a,C.locationUrl("#createTicketOrder")}function l(){if(!(isNaN(O)||0>=O)){var a=window.signleSelectBettype.selectMatch||{},b=a[O]||{},c=parseInt(b.oddsId),d=b.recommend||[];if(!(isNaN(c)||0>=c||!d||d.length<=0)){var e=$(".table_wrap .matchBettype"),f={};$.each(e,function(a,b){var c=parseInt($(b).attr("oddsId"));isNaN(c)||0>=c||$(b).find("td[recommend]").each(function(a,b){var d=trim($(b).attr("recommend"));d&&(f[c+"|"+d]=b)})}),$.each(d,function(a,b){b&&f[c+"|"+b]&&$(f[c+"|"+b]).addClass("active")});var g=$(".matchBettype:has(td.active)"),h=g.length;h>0?$("#btnWarp").show():$("#btnWarp").hide()}}}function m(){n(),o()}function n(){if(!(isNaN(O)||0>=O)){var a={matchId:O};J.hasSmlrInfo(a,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);var b=a.data||!1;p("smlr",b)})}}function o(){if(!(isNaN(O)||0>=O)){var a={matchId:O};K.hasJxzpInfo(a,function(a){if(0!=a.errCode)return void D.showNotice(a.msg);var b=a.data||[],c=b.length;p("jxzp",c>0);for(var d=0;c>d;d++)$("#jxzpType"+b[d]).addClass("checked").show()})}}function p(a,b){W[a]=b,"smlr"in W&&"jxzp"in W&&(W.smlr&&$("#tabLr").show(),W.jxzp&&$("#tabJx").show(),q())}function q(){var a=$("#tabBox [tab]");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),P=parseInt($(this).attr("tab")),$("#tabContent1,#tabContent2,#tabContent3,#tabContent4,#tabContent5").hide(),$("#tabContent"+P).show(),Q=null,U=1,V=8,1==P?s.call($("#planList")):2==P?r():3==P?w():4==P?x():5==P&&i()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"));return d==P?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function r(){var a=$("#groupBox [groupNo]");a.off().on("click",function(b){a.removeClass("active"),$(this).addClass("active"),Q=trim($(this).attr("groupNo")),U=1,V=8,s.call($("#groupPlanList"))}),a.eq(0).click()}function s(a){var b=this;if(!(isNaN(O)||0>=O)){E.unsetScrollLoad();var c={groupNo:Q,matchId:O,needUser:!0,needAccess:!0,pageNum:U,pageSize:V};G.getPlanList(c,function(c){if(0!=c.errCode)return void D.showNotice(c.msg);var d=c.data&&c.data.totalCount||0,e=Math.ceil(d/V);e>U&&E.setScrollLoad(t);var f=c.data&&c.data.list||[],h={IMG_PATH:IMG_PATH,list:f,type:M};a?b.append(L.planList(h)):b.html(L.planList(h)),b.find(".userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d){var f=C.getLoginUser(),h=trim(f&&f.userNo||""),i=h?"?spreaderUserNo="+h:"",j={title:d,link:location.href.replace(/[#\?].*/g,"")+i+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场足球推荐专家",success:function(){g()},cancel:function(){g()}};D.showShare(j)}}),b.find(".userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount"));if(b){var g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};D.showCreateTicketOrder(g)}}),b.find(".userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&C.locationUrl("#userDetail&userNo="+b)}),b.find(".planItem").off().on("click",u)},function(){E.setScrollLoad(t)})}}function t(){U++,1==P?s.call($("#planList"),!0):2==P&&s.call($("#groupPlanList"),!0)}function u(a){a.preventDefault(),a.stopPropagation();var b=function(){var a=[];O&&a.push("matchId="+O),M&&a.push("type="+M),P&&a.push("tab="+P),a.length>0&&C.setHistoryBack("#hotMatchDetail&"+a.join("&"))},c=trim($(this).attr("planNo")),d=parseInt($(this).attr("amount")),e=trim($(this).attr("access"));if(!(!c||isNaN(d)||0>d)){if("true"==e)return C.locationUrl("#planDetail&planNo="+c),void b();var f={planNo:c,amount:d,callback:b};D.showCreateOrder(f)}}function v(){var a={matchId:O,type:M};I.createSmlrOrder(a,function(a){if(0!=a.errCode)return void showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){C.locationUrl(d)},1e3):(D.showNotice("解锁成功"),setTimeout(function(){w()},1e3)):showNotice("支付失败")})}function w(){var a={matchId:O};J.getSmlrInfo(a,function(a){if(2==a.errCode)$("#unclockHot").show(),$("#buyHotCold").off().on("click",function(){v()});else if(0==a.errCode){$("#unclockHot").hide();var b=a.data||{},c=b.maxRecommendRateKey||"",d=parseInt((b[c]||{}).recommendRate)||0,e=0!=d,f={smlrInfo:b,showRecommendRate:e};$("#smlrInfo").html(L.smlrInfo(f));var g=3.6,h=d,i=g*h;$(".circle.p"+h+" .bar").css({"-webkit-transform":"rotate("+i+"deg)",transform:"rotate("+i+"deg)"})}else D.showNotice(a.msg)})}function x(){var a=$("#jxzpTypeBox [jxzpType].checked");a.off().on("click",function(b){a.removeClass("active"),$(this).addClass("active"),z()}),a.eq(0).click()}function y(){var a={matchId:O,type:M};I.createJxzpOrder(a,function(a){if(0!=a.errCode)return void showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){C.locationUrl(d)},1e3):(D.showNotice("解锁成功"),setTimeout(function(){z()},1e3)):showNotice("支付失败")})}function z(){var a=$("#jxzpTypeBox [jxzpType].active").eq(0),b=parseInt(a.attr("jxzpType")),c={matchId:O,type:b};K.getJxzpInfo(c,function(a){if(2==a.errCode)$("#jxzpTypeBox").hide(),$("#unclockJxzp").show(),$("#buyJxzp").off().on("click",function(){y()});else if(0==a.errCode){$("#unclockJxzp").hide(),$("#jxzpTypeBox").show();var b=a.data||{},c=Object.keys(b).length>0,d={jxzp:b,IMG_PATH:IMG_PATH,showJxzp:c};$("#jxzpInfo").html(L.jxzpInfo(d))}else D.showNotice(a.msg)})}function A(){var a="//i.sporttery.cn/api/match_live_2/get_match_updated";$.ajax({url:a,type:"get",dataType:"script",cache:!1,success:function(){for(var a=window.match_updated||[],b=0,c=a.length;c>b;b++){var d=a[b].m_id||0,e=a[b].minute||0,f=a[b].fs_h||0,g=a[b].fs_a||0,h=trim(a[b].status);0>=d||(e>0?($("#beginTime"+d).hide(),$("#minute"+d).html(e+"<sup>'</sup>").show()):($("#minute"+d).hide(),$("#beginTime"+d).show()),"Playing"==h?($("#vs"+d).hide(),$("#score"+d).html(f+"&nbsp;-&nbsp;"+g).show()):($("#score"+d).hide(),$("#vs"+d).show()))}A.timer=setTimeout(A,15e3)}})}function B(){var a=new Date,b=C.formatDate(a,"yyyy-MM-dd"),c="http://u1.tiyufeng.com/v2/game/date_game_list?date="+b;$.ajax({url:c,type:"get",dataType:"jsonp",cache:!1,jsonp:"callBack",jsonpCallback:"basketBallScore",success:function(a){var b=[],c=[],d=[];$("#teamBox .basketballHome").each(function(a,c){var e=trim($(this).text().replace("(主)","")),f=$("#teamBox").attr("sportterymatchid");b.push(e),d.push(f)}),$("#teamBox .basketballAway").each(function(a,b){var d=trim($(this).text());c.push(d)});for(var e=0,f=a.length;f>e;e++)for(var g=parseInt(a[e].gameStatus)||1,h=trim(a[e].homeName)||"",i=trim(a[e].guestName)||"",j=parseInt(a[e].homeScore)||0,k=parseInt(a[e].guestScore)||0,l=(trim(a[e].itemName)||"",trim(a[e].leagueName)||"",trim(a[e].statusDesc)||""),m=0,n=b.length;n>m;m++)if(b[m]==h&&c[m]==i){var o=d[m];"第一节"==l||"第二节"==l||"中场"==l||"第三节"==l||"第四节"==l?($("#beginTime"+o).hide(),$("#minute"+o).html(l).show()):($("#minute"+o).hide(),$("#beginTime"+o).show()),2==g?($("#vs"+o).hide(),$("#score"+o).html(k+"&nbsp;-&nbsp;"+j).show()):($("#score"+o).hide(),$("#vs"+o).show())}B.timer=setTimeout(B,15e3)}})}b.init=c,b._init=d;var C=a("module/common"),D=a("module/ui"),E=a("module/main"),F=a("cgi/match"),G=a("cgi/plan"),H=a("cgi/user"),I=a("cgi/order"),J=(a("cgi/combo"),a("cgi/smlr")),K=a("cgi/jxzp"),L=a("view/hotMatchDetail"),M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=null,X=null}),define("controller/index",function(a,b){function c(a){n=trim(j.getUrlParam("mock"))||"",e(a),f()}function d(a){n=null}function e(a){"user"==n?(a.setContent(m.mockUser()),g()):j.isWeixinBrowser()||j.isIosBrowser()||j.isAndroidBrowser()?j.locationUrl("#officialSite"):j.locationUrl("#officialSite")}function f(){}function g(){var a={pageNum:1,pageSize:200,mock:!0};l.getGroupList(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data&&a.data.list||[],c=[];$.each(b,function(a,b){var d=trim(b.groupNo),e=trim(b.name);c.push('<option value="'+d+'">'+e+"</option>")}),$("#groupId").html(c.join("")),$("#groupId").on("change",function(a){var b=trim(this.value);h(b)}),h($("#groupId").val())})}function h(a){if(a=trim(a)){var b={groupNo:a,pageNum:1,pageSize:200,mock:!0};l.getUserList(b,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data&&a.data.list||[],c=[];$.each(b,function(a,b){var d=trim(b.userNo),e=(trim(b.tag),trim(b.nickName)),f=trim(b.realName);f=f?"("+f+")":"",c.push("<li><span>用户："+e+f+'</span>　<span><a userNo="'+d+'" href="javascript:;">走起</a></span></li>')}),$("#userList").html(c.join("")),$("#userList a").on("click",function(a){var b=trim($("#password").val()),c=trim($(this).attr("userNo"));if(!b)return void k.showNotice("请填入密码");var d={password:b,userNo:c};i(d,function(a){return 0!=a.errCode?void k.showNotice(a.msg):(j.clearCache(),void j.locationUrl("./#my","_blank"))})})})}}function i(a,b,c,d){var e="?c=user&m=mockUser",f={password:a.password,userNo:a.userNo};j.callCGI(e,"post",f,b,c,d)}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=(a("module/main"),a("cgi/user")),m=a("view/index"),n=null}),define("controller/invitation/gpcConsumeList",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"高频彩消费",className:"generalize",showHeader:!0,isLeftIconHeader:!0};j.setMain(a,b);var c={IMG_PATH:IMG_PATH};j.setContent(l.content(c))}function f(){g()}function g(){var a={};k.getStatisticsList(a,function(a){if(0!=a.errCode)return void i.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,Date:Date};$("#gpcConsumeList").html(l.gpcConsumeList(c));var d=$("#gpcConsumeList .gpcConsumeDate"),e=$("#gpcConsumeList .gpcConsumeContent");d.on("click",function(a){var b=$(this).find(".arrow").eq(0),c=/arrow_down/.test(b.attr("class"));d.find(".arrow").attr("class","arrow arrow_down"),e.hide(),c&&(b.attr("class","arrow arrow_up"),$(this).next().eq(0).show())}),$(".menu_bar").on("click",function(){var a=$(this).attr("time");h.locationUrl("#invitation/seachConsumeList&ticketType=2&time="+a)})})}b.init=c,b._init=d;var h=a("module/common"),i=a("module/ui"),j=a("module/main"),k=a("cgi/channel"),l=a("view/invitation/gpcConsumeList")}),define("controller/invitation/incomeList",function(a,b){function c(a){n=trim(i.getUrlParam("detail"))||!1,e(a),f()}function d(a){n=null,i.clearCache("incomeDetail")}function e(a){var b={title:"我的收益",className:"generalize",showHeader:!0,isLeftIconHeader:!0};if(n){var c=i.getCache("incomeDetail");b.title=c.month+"月收益详情"}k.setMain(a,b),n?k.setContent(m.incomeDetail()):k.setContent(m.content())}function f(){g(),n&&h()}function g(){var a={};l.getStatisticsList(a,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,Date:Date};$("#incomeList").html(m.incomeList(c));var d=$("#incomeList .incomeDate"),e=$("#incomeList .incomeContent");d.on("click",function(a){var b=$(this).find(".arrow").eq(0),c=/arrow_down/.test(b.attr("class"));d.find(".arrow").attr("class","arrow arrow_down"),e.hide(),c&&(b.attr("class","arrow arrow_up"),$(this).next().eq(0).show())}),$(".menu_bar").on("click",function(){var a=parseInt($(this).attr("jcFund")),b=parseInt($(this).attr("gpFund")),c=$(this).attr("month");i.setCache("incomeDetail",{jcFund:a,gpFund:b,month:c}),i.locationUrl("#invitation/incomeList&detail=true")})})}function h(){var a=i.getCache("incomeDetail"),b={incomeData:a};$("#detailData").html(m.detailData(b))}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/channel"),m=a("view/invitation/incomeList"),n=null}),define("controller/invitation/index",function(a,b){function c(a){j.setHistoryBack("#my"),e(a),f()}function d(a){}function e(a){var b={title:"我的邀请",className:"generalize",showHeader:!0,isLeftIconHeader:!0};l.setMain(a,b);var c={IMG_PATH:IMG_PATH};l.setContent(n.content(c)),$("#pageHeader .leftIcon_header").on("click",function(a){j.isAndroidBrowser()?window.Jockey&&window.Jockey.send("closeWindow"):j.isIosBrowser()&&j.locationUrl("#my")}),g()}function f(){i(),h()}function g(){var a=new Clipboard("#copyBtn");a.on("success",function(a){k.showNotice("内容已复制"),a.clearSelection()}),a.on("error",function(a){k.showNotice('请选择"拷贝"进行复制')})}function h(){var a=$("#tabList .menu_bar");a.on("click",function(a){var b=parseInt($(this).attr("tab"));1==b?j.locationUrl("#invitation/incomeList"):2==b?j.locationUrl("#invitation/inviteUserList"):3==b?j.locationUrl("#invitation/gpcConsumeList"):4==b&&j.locationUrl("#invitation/jjcConsumeList")})}function i(){var a={};m.getShareLink(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||"";if($("#shareLink").val(b),$("#shareBtn").on("click",function(){if(j.isWeixinBrowser()){var a={title:"彩票礼包大派送",link:b,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/invitation_share_logo.jpg",desc:"亲爱的，我送你一个128元彩票大礼包"};k.showShare(a)}else j.isAndroidBrowser()?window.Jockey&&window.Jockey.send("YQShare",{title:"彩票礼包大派送",link:b,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/invitation_share_logo.jpg",desc:"亲爱的，我送你一个128元彩票大礼包"}):j.isIosBrowser()&&j.isIos()&&window.webkit.messageHandlers.myInvitationShare.postMessage({title:"彩票礼包大派送",link:b,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/invitation_share_logo.jpg",desc:"亲爱的，我送你一个128元彩票大礼包"})}),j.isWeixinBrowser()){var c={title:"彩票礼包大派送",link:b,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/invitation_share_logo.jpg",desc:"亲爱的，我送你一个128元彩票大礼包"};k.setShare(c)}})}b.init=c,b._init=d,a("external/clipboard");var j=a("module/common");j.isAndroid()&&a("external/jockey");var k=a("module/ui"),l=a("module/main"),m=a("cgi/channel"),n=a("view/invitation/index")}),define("controller/invitation/inviteUserList",function(a,b){function c(a){m=1,n=20,e(a),f()}function d(a){}function e(a){var b={title:"邀请人数",className:"generalize",showHeader:!0,isLeftIconHeader:!0};j.setMain(a,b),j.setContent(l.content())}function f(){g()}function g(a){j.unsetScrollLoad();var b={pageNum:m,pageSize:n};k.getChannelUserList(b,function(b){if(0!=b.errCode)return void i.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/n);d>m&&j.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e};a?$("#userList").append(l.userList(f)):$("#userList").html(l.userList(f))},function(){j.setScrollLoad(h)})}function h(){m++,g(!0)}b.init=c,b._init=d;var i=(a("module/common"),a("module/ui")),j=a("module/main"),k=a("cgi/channel"),l=a("view/invitation/inviteUserList"),m=null,n=null}),define("controller/invitation/jjcConsumeList",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"竞技彩消费",className:"generalize",showHeader:!0,isLeftIconHeader:!0};j.setMain(a,b);var c={IMG_PATH:IMG_PATH};j.setContent(l.content(c))}function f(){g()}function g(){var a={};k.getStatisticsList(a,function(a){if(0!=a.errCode)return void i.showNotice(a.msg);var b=a.data&&a.data.list||[],c={IMG_PATH:IMG_PATH,list:b,Date:Date};$("#jjcConsumeList").html(l.jjcConsumeList(c));var d=$("#jjcConsumeList .jjcConsumeDate"),e=$("#jjcConsumeList .jjcConsumeContent");d.on("click",function(a){var b=$(this).find(".arrow").eq(0),c=/arrow_down/.test(b.attr("class"));d.find(".arrow").attr("class","arrow arrow_down"),e.hide(),c&&(b.attr("class","arrow arrow_up"),$(this).next().eq(0).show())}),$(".menu_bar").on("click",function(){var a=$(this).attr("time");h.locationUrl("#invitation/seachConsumeList&ticketType=1&time="+a)})})}b.init=c,b._init=d;var h=a("module/common"),i=a("module/ui"),j=a("module/main"),k=a("cgi/channel"),l=a("view/invitation/jjcConsumeList")}),define("controller/invitation/login",function(a,b){function c(a){e(a),f()}function d(a){clearTimeout(g.timer)}function e(a){var b={title:"登录",className:"activity_cpdhb"},c={IMG_PATH:IMG_PATH};n.setMain(a,b),n.setContent(q.content(c)),$("#smsCodeBtn").on("click",i),$("#loginSubmit").on("click",h)}function f(){}function g(){var a=trim($("#mobile").val())||"",b=trim($("#validate").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");var c={mobile:a,code:b};p.sendSmsCode(c,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("</span>倒计时("+b+")"),g.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("</span>重新获取").on("click",i)};c(),j()})}function h(){var a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void m.showNotice("输入的验证码有误");var c={mobile:a,code:b};o.mobileToggleUser(c,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=decodeURIComponent($.trim(l.getUrlParam("toHash")));b=b&&/^#/.test(b)&&b||"#charge&financeType=1",m.clear(),l.clearCache(),l.locationUrl(b)})}function i(){var a=trim($("#mobile").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");j();var b={IMG_PATH:IMG_PATH};$("#pageContainer").append(q.confirm(b)),$("#sureBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),g()}),$("#cancelBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),j()}),k(),$("#validateImage").on("click",function(){k()})}function j(){$("#confirmBox").remove()}function k(){$("#validateImage").attr("src",PROXY+"?c=verificationCode&m=image&_"+(new Date).getTime())}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/user"),p=a("cgi/sms"),q=a("view/invitation/login")}),define("controller/invitation/seachConsumeList",function(a,b){function c(a){p=parseInt(k.getUrlParam("ticketType"))||"",s=trim(k.getUrlParam("time"))||"",q=1,r=20,e(a),f()}function d(a){p=null,q=null,r=null,s=null}function e(a){var b={title:"",className:"generalize",showHeader:!0,isLeftIconHeader:!0},c=parseInt(s.substring(4,6));1==p?b.title=c+"月竞技彩消费":2==p&&(b.title=c+"月高频彩消费"),m.setMain(a,b),m.setContent(o.content()),$("#searchSubmit").on("click",g);var d=parseInt(s.substring(0,4)),e={1:31,2:h(d),3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31},f=s+"01",i=s+e[c];$("#beginTime").val(f),$("#endTime").val(i),$("#beginTime,#endTime").keydown(function(a){var b=trim($(this).val());return 8==a.keyCode&&b&&6==b.length?void a.preventDefault():void 0}),$("#beginTime,#endTime").on("input",function(a){var b=trim($(this).val());b.length>8&&(b=b.slice(0,8),$(this).val(b))}),$("#beginTime").on("input",function(){var a=trim($(this).val());a=parseInt(a.substring(6,8)),a>e[c]&&$(this).val(s+(e[c]-1))}),$("#endTime").on("input",function(){var a=trim($(this).val());a=parseInt(a.substring(6,8)),a>e[c]&&$(this).val(s+e[c])})}function f(){i()}function g(){q=1,i()}function h(a){return a%4!=0||a%100==0&&a%400!=0?28:29}function i(a){m.unsetScrollLoad();var b=trim($("#userName").val())||null,c=parseInt($("#orderId").val())||null,d=trim($("#beginTime").val())||null,e=trim($("#endTime").val())||null;if(8!=d.length||8!=e.length)return void l.showNotice("输入日期有误");if(d>e)return void l.showNotice("输入开始日期有误");var f={userName:b,orderId:c,ticketType:p,beginTime:d,endTime:e,pageNum:q,pageSize:r};n.getChannelOrderList(f,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&m.setScrollLoad(j);var e=b.data&&b.data.list||[],f={list:e};a?$("#consumeList").append(o.consumeList(f)):$("#consumeList").html(o.consumeList(f))})}function j(){q++,i(!0)}b.init=c,b._init=d;var k=a("module/common"),l=a("module/ui"),m=a("module/main"),n=a("cgi/channel"),o=a("view/invitation/seachConsumeList"),p=null,q=null,r=null,s=null}),define("controller/jsk3",function(a,b){function c(a){M=trim(F.getUrlParam("bet"))||!1,P=trim(F.getUrlParam("rules"))||!1,N=1,O="JSK3",M?F.setHistoryBack("#jsk3"):F.setHistoryBack("#lotteryHall"),e(a),f()}function d(a){L=null,M=null,N=null,O=null,clearTimeout(C.timer),Q.remove("JSK3")}function e(a){var b={title:M?"快3投注":"江苏快3",className:"k3",showHeader:!0,isDigitalHeader:M?!1:!0,isLeftIconHeader:M?!0:!1,rightButtonText:"助手",rightButtonFun:function(){var a=trim($("#assistantMenu").css("display"));"none"==a?g():h()}};H.setMain(a,b),M?(H.setContent(K.k3Bet()),$("#submitBtn").on("click",D)):(H.setContent(K.k3Num()),$("#ensureBtn").on("click",w)),$("#digitalTitleWrap").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($("#navWrap").css("display"));"none"==b?j():k()})}function f(){l(),M&&y(),C(),E()}function g(){$("#assistantMenu").show(),$("#pageContainer").off().on("click",h),$("#assistantMenuContent").off().on("click",function(a){a.preventDefault(),a.stopPropagation()}),$("#recentlyDraw").on("click",i),$("#digitalRule").on("click",function(){F.locationUrl("#lotteryRules&lotteryId=JSK3")})}function h(){$("#assistantMenu").hide(),$("#pageContainer").off("click"),$("#assistantMenuContent").off("click")}function i(){F.locationUrl("#drawHistory&lotteryId=JSK3")}function j(){$("#navWrap").show(),$("#pageContainer").off().on("click",k),$("#typeList").off().on("click",function(a){a.preventDefault(),a.stopPropagation()})}function k(){$("#navWrap").hide(),$("#pageContainer").off("click"),$("#typeList").off("click")}function l(){var a=$("#typeList .item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),L=parseInt($(this).attr("type"))||1;var c=$(this).find(".type").html();$("#prize").html("0 元"),$("#unit").html("注数：0 注"),$("#digitalTitleTxt").html(c),1==L?o():2==L?s():3==L?t():4==L?p():5==L?q():6==L&&r(),k()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return L==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function m(a){if(null!=a){var b=n();b.unshift(a);var c=JSON.stringify(b);Q.set(O,c)}}function n(){var a=Q.get(O);return null===a||void 0===a?""!=O?(Q.set(O,"[]"),JSON.parse("[]")):{}:""==a?JSON.parse("[]"):JSON.parse(a)}function o(){function a(a){var b=$("#tabBar .tab_item"),c=$("#numWrap .num_item_4"),d=j[a],e=h.indexOf(d);e>-1&&h.splice(e,1),i=g([h.join(",")])||[],b.each(function(a,b){var c=$(this);btnValue=c.data("value"),e=h.indexOf(btnValue),e>-1?c.addClass("active"):c.removeClass("active")}),c.each(function(a,b){var c=$(this),d=c.data("value"),e=i.indexOf(d);e>-1?c.addClass("active"):c.removeClass("active")}),v()}function b(){var a=$("#tabBar .tab_item"),b=i.sort(function(a,b){return a-b}),c=[];c=b.toString()===[3,4,5,6,7,8,9,10].toString()?["small"]:b.toString()===[11,12,13,14,15,16,17,18].toString()?["big"]:b.toString()===[4,6,8,10,12,14,16,18].toString()?["even"]:b.toString()===[3,5,7,9,11,13,15,17].toString()?["odd"]:b.toString()===[4,6,8,10].toString()?["small","even"]:b.toString()===[3,5,7,9].toString()?["small","odd"]:b.toString()===[12,14,16,18].toString()?["big","even"]:b.toString()===[11,13,15,17].toString()?["big","odd"]:[],h=c;for(var d=0,e=a.length;e>d;d++){var f=a[d],g=$(f).data("value"),j=c.indexOf(g);j>-1?$(f).addClass("active"):$(f).removeClass("active")}v()}for(var c=[],d=3;19>d;d++){var e={award:3==d||18==d?award=240:4==d||17==d?award=80:5==d||16==d?award=40:6==d||15==d?award=25:7==d||14==d?award=16:8==d||13==d?award=12:9==d||12==d?award=10:10!=d&&11!=d||(award=9),num:d};c.push(e)}var f={hzNum:c};$("#numList").html(K.HZ(f));var g=function(a){var b={small:[3,4,5,6,7,8,9,10],big:[11,12,13,14,15,16,17,18],even:[4,6,8,10,12,14,16,18],odd:[3,5,7,9,11,13,15,17],"small,even":[4,6,8,10],"even,small":[4,6,8,10],"small,odd":[3,5,7,9],"odd,small":[3,5,7,9],"big,even":[12,14,16,18],"even,big":[12,14,16,18],"big,odd":[11,13,15,17],"odd,big":[11,13,15,17]};return b[a]},h=[],i=[],j={small:"big",big:"small",even:"odd",odd:"even"},k=$("#tabBar .tab_item");k.on("click",function(b){var c=$(this);if(c.hasClass("active")){c.removeClass("active");
var d=h.indexOf(c.data("value"));d>-1&&h.splice(d,1)}else c.addClass("active"),h.push(c.data("value"));a(c.data("value"))});var l=$("#numWrap .num_item_4");l.on("click",function(a){var c=$(this);if(c.hasClass("active")){c.removeClass("active");var d=i.indexOf(c.data("value"));d>-1&&i.splice(d,1)}else c.addClass("active"),i.push(c.data("value"));b()})}function p(){$("#numList").html(K.STH());var a=$("#tabBar .ui-flex_item");a.on("click",function(){$("#prize").html("0 元"),$("#unit").html("注数：0 注"),a.removeClass("active"),$(this).addClass("active");var b=$(this).index();$("p.tips").hide().eq(b).show(),$("#numBox ul").hide().eq(b).show(),$("#numBox li").removeClass("active")}),u()}function q(){$("#numList").html(K.SBT()),u()}function r(){$("#numList").html(K.SLH()),u()}function s(){if($("#numList").html(K.ETH()),$("#tabBar .ui-flex_item").on("click",function(){$("#prize").html("0 元"),$("#unit").html("注数：0 注"),$("#tabBar .ui-flex_item").removeClass("active"),$(this).addClass("active");var a=$(this).index();$("p.tips").hide().eq(a).show(),$("#numBox div.tabBox").hide().eq(a).show(),$("#numBox li").removeClass("active"),N=$(this).attr("tab")}),1==N){var a=$("#numBox .num_item_3");a.on("click",function(a){var b=(trim(this.className),$(this).parents("#numBox").eq(0)),c=$(this).data("value"),d=this.parentNode,e=b.find(".num_wrap");e.each(function(a,b){d!=b&&$(b).find('[data-value="'+c+'"]').removeClass("active")}),$(this).toggleClass("active"),v()})}else 2==N&&u()}function t(){$("#numList").html(K.EBT()),u()}function u(){var a=$("#numBox .num_item_4, #numBox .num_item_3, #numBox .num_item_1");a.on("click",function(){$(this).toggleClass("active"),v()})}function v(){var a,b=$("#numBox li.active");if(5==L)a=F.ZH(b,3).length;else if(3==L)a=F.ZH(b,2).length;else if(2==L&&1==N){var c=$("#EDXTH li.active").length||0,d=$("#EDXBTH li.active").length||0;a=c*d}else a=parseInt(b.length);$("#prize").html(2*a+" 元"),$("#unit").html("注数："+a+" 注")}function w(){var a=parseInt($("#unit").html().replace(/\D/g,""));if(0>=a)return void G.showNotice("不满一注");var b=trim($("#typeList .item.active .type").html()),c=trim($("#tabBar .ui-flex_item.active").html())||"",d=x();m({title:b+c,recommend:d,unit:a}),F.locationUrl("#jsk3&bet=ture")}function x(){var a,b=[];if(2==L&&1==N){var c=$("#EDXTH li.active"),d=$("#EDXBTH li.active"),e=[],f=[];c.each(function(a,b){var c=$(b).find(".twoNum").html();e.push(c)}),d.each(function(a,b){var c=$(b).find(".twoNum").html();f.push(c)}),b.push(e.join(" ")+" # "+f.join(" "))}else a=$("#numBox li.active"),a.each(function(a,c){var d=$(c).find(".num").html();b.push(d)});return b}function y(){var a=n();if(!a||a.length<=0)return void F.historyBack();var b={selectContent:a};$("#k3List").html(K.k3List(b)),z(),A(),B()}function z(){var a=n(),b=a.length;if(!(0>b)){for(var c=0,d=0,e=a.length;e>d;d++)unit=a[d].unit,c+=unit;var f=parseInt($("#multiple").val())||0,g=f*c*2;$("#totalUnit").html(c),$("#prize").html(g)}}function A(){var a=1;$("#addMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b+=parseInt(a),b=b>9999?9999:b,$("#multiple").val(b).trigger("input")}),$("#minusMultiple").on("click",function(){var b=parseInt($("#multiple").val())||0;b-=a,b=a>b?a:b,$("#multiple").val(b).trigger("input")}),$("#multiple").on("input",function(){var a=parseInt($("#multiple").val())||0;a=a=1>a?1:a>9999?9999:a,$("#multiple").val(a),z()})}function B(){$("#k3List .del_btn").on("click",function(a){var b=$(this).parents("li");b.remove();var c=b.attr("compare"),d=n(),e=[];d.forEach(function(a,b){a.recommend.join(" ")!=c&&e.push(a)});var f=JSON.stringify(e);Q.set(O,f),z()})}function C(){clearTimeout(C.timer);var a={lotteryId:"JSK3"};I.lotteryIssueInfo(a,function(a){if(0!=a.errCode)return void G.showNotice(a.msg);var b=a.data,c=b.issue,d=b.countDown,e=function(){if(d--,d>0){var a=Math.floor(d/60/60),b=Math.floor(d/60%60),f=Math.floor(d%60);a=10>a?"0"+a:a,b=10>b?"0"+b:b,f=10>f?"0"+f:f,a>0?$("#time").html(a+":"+b+":"+f):$("#time").html(b+":"+f),$("#issue").html(c),C.timer=setTimeout(e,1e3)}else G.showAlert("现在"+c+"期已截止，新一期正在销售"),C()};e()})}function D(){var a=$("#protocol")[0].checked,b=parseInt($("#multiple").val()),c=parseInt($("#issue").html()),d=parseInt($("#totalUnit").html()),e=parseInt($("#prize").html());if(0>=d||0>=e)return void G.showNotice("请至少选择一注");if(!a)return void G.showNotice("请阅读并同意代购协议");if(!isDefined(b)||!/^[0-9]+$/.test(b))return void G.showNotice("请输入正整数倍数");var f={"二同号单选":"2TDX","二同号复选":"2TFX","二不同":"2BT","三同号单选":"3TDX","三同号通选":"3TTX","三连号":"3LTX","三不同":"3BT","和值":"HZ"},g=n(),h=[];g.forEach(function(a,b){"三同号通选"==a.title?a.recommend="777":"三连号"==a.title?a.recommend="789":"二同号单选"==a.title?a.recommend=a.recommend.join("").split("#")[0].trim().split(" ")+"#"+a.recommend.join("").split("#")[1].trim().split(" "):a.recommend=a.recommend.join(","),h.push(f[a.title]+":"+a.recommend)}),h=h.join(";");var i={ticketMultiple:b,issue:c,lotteryId:"JSK3",betContent:h};J.createDigitalTicketOrder(i,function(a){if(0!=a.errCode)return void G.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){F.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(F.getLocationHash());F.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):G.showNotice("支付失败"),Q.remove("JSK3")})}function E(){H.unsetScrollLoad();var a={lotteryId:"JSK3"};I.lotteryIssueList(a,function(a){if(0!=a.errCode)return void G.showNotice(a.msg);var b=a.data&&a.data.list||[],c=b[0].issue,d=b[0].drawNumber||"";d=d.split(",");var e="icon_dice_"+d[0],f="icon_dice_"+d[1],g="icon_dice_"+d[2];$("#lastIssue").html(c),$("#result").html('<i class="'+e+'"></i><i class="'+f+'"></i><i class="'+g+'"></i>')})}b.init=c,b._init=d,a("external/vue");var F=a("module/common"),G=a("module/ui"),H=a("module/main"),I=a("cgi/lottery"),J=a("cgi/order"),K=a("view/jsk3"),L=null,M=null,N=null,O=null,P=null,Q=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/jxzpComboList",function(a,b){function c(a){q=1,r=8,j.setHistoryBack("#home"),e(a),f()}function d(a){q=null,r=null}function e(a){var b={title:"极限追盘",className:"follow",showHeader:!0};l.setMain(a,b);var c={};l.setContent(p.content(c))}function f(){g(),h()}function g(){var a={};n.getJxzpStatistics(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=b.winPercent||"0.00";$("#SPFnum").html(c+"%"),$("#SYPnum").html(c+"%"),$("#DXQnum").html(c+"%"),c=c.split("."),$("#winPercentFront").html(c[0]),$("#winPercentEnd").html(c[1]+"%")})}function h(){var a={comboType:1,pageNum:q,pageSize:r};m.getComboList(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=(a.data&&a.data.totalCount||0,a.data&&a.data.list||[]),c={IMG_PATH:IMG_PATH,list:b};$("#comboList").html(p.comboList(c)),$("#comboList .jx").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("comboNo")),c=parseInt($(this).attr("amount"))||0;b&&c>0&&i(b,c)})})}function i(a,b){b=(parseInt(b)||0)/100,k.showConfirm("需支付"+b+"粒米查看极限追盘<br>(1粒米=1元)",function(){var b={comboNo:a};o.createComboOrder(b,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){j.locationUrl(d)},1e3):(k.showNotice("支付成功"),setTimeout(function(){j.locationUrl("#jxzpList")},1e3)):k.showNotice("支付失败")})},function(){})}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/combo"),n=a("cgi/jxzp"),o=a("cgi/order"),p=a("view/jxzpComboList"),q=null,r=null}),define("controller/jxzpList",function(a,b){function c(a){o=parseInt(j.getUrlParam("type"))||1,p=1,q=8,j.setHistoryBack("#home"),e(a),f()}function d(a){o=null,p=null,q=null}function e(a){var b={title:"极限追盘",className:"follow",showHeader:!0};l.setMain(a,b);var c={};l.setContent(n.content(c))}function f(){g()}function g(){var a=$("#tabBox [type]");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),o=parseInt($(this).attr("type")),p=1,q=8,i()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"));return d==o?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(){p++,i(!0)}function i(a){l.unsetScrollLoad();var b={type:o,pageNum:p,pageSize:q};m.getJxzpList(b,function(b){if(2==b.errCode)j.locationUrl("#jxzpComboList");else if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&l.setScrollLoad(h);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#jxzpList").append(n.jxzpList(f)):$("#jxzpList").html(n.jxzpList(f))},function(){l.setScrollLoad(h)})}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/jxzp"),n=a("view/jxzpList"),o=null,p=null,q=null}),define("controller/jzypExplain",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"晒米竞足亚盘入门秘籍",className:"jzyp_explain"},c={IMG_PATH:IMG_PATH};if(i.setMain(a,b),i.setContent(j.content(c)),g.isWeixinBrowser()){var c={title:"晒米竞足亚盘入门秘籍",link:location.href.replace(/[#\?].*/g,"")+"#jzypExplain",imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/jzypExplain/jzyp_explain_share.jpg",desc:"投注竞彩足球加奖10.2%"};h.setShare(c)}}function f(){}b.init=c,b._init=d;var g=a("module/common"),h=a("module/ui"),i=a("module/main"),j=a("view/jzypExplain")}),define("controller/login",function(a,b){function c(a){e(a),f()}function d(a){clearTimeout(g.timer)}function e(a){var b={title:"登录",className:"login"},c={IMG_PATH:IMG_PATH};n.setMain(a,b),n.setContent(q.content(c)),$("#smsCodeBtn").on("click",i),$("#loginSubmit").on("click",h),l.isWeixinBrowser()&&$("#wxLoginSubmit").on("click",o.login).show()}function f(){}function g(){var a=trim($("#mobile").val())||"",b=trim($("#validate").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");var c={mobile:a,code:b};p.sendSmsCode(c,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html('<span class="ver_line"></span>倒计时('+b+")"),g.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html('<span class="ver_line"></span>重新获取').on("click",i)};c(),j()})}function h(){var a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void m.showNotice("输入的验证码有误");var c={mobile:a,code:b};o.mobileToggleUser(c,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=decodeURIComponent($.trim(l.getUrlParam("toHash")));b=b&&/^#/.test(b)&&b||"#home",m.clear(),l.clearCache(),l.locationUrl(b)})}function i(){var a=trim($("#mobile").val())||"";if(!l.verifyMobile(a))return void m.showNotice("输入的手机号码有误");j();var b={IMG_PATH:IMG_PATH};$("#pageContainer").append(q.confirm(b)),$("#sureBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),g()}),$("#cancelBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),j()}),k(),$("#validateImage").on("click",function(){k()})}function j(){$("#confirmBox").remove()}function k(){$("#validateImage").attr("src",PROXY+"?c=verificationCode&m=image&_"+(new Date).getTime())}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/user"),p=a("cgi/sms"),q=(a("cgi/verificationCode"),a("view/login"))}),define("controller/lotteryHall",function(a,b){function c(a){n=parseInt(h.getUrlParam("channel")),e(a),f()}function d(a){n=null}function e(a){var b={title:"购彩大厅",className:"lotteryHall",showHeader:!0,isSimpleHeader:!0,showFooter:!0};l.setMain(a,b)}function f(){g(),3==n&&k.getUserInfo({},function(){},!0)}function g(){var a={};j.lotteryList(a,function(a){if(0!=a.errCode)return void i.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b,Object:Object,IMG_PATH:IMG_PATH};l.setContent(m.content(c)),$("#lotteryList .flex_item[lotteryId]").on("click",function(){var a=trim($(this).attr("lotteryId"))||"",b=a.toLowerCase();"JCZQ"==a?h.locationUrl("#match&self=true&type=1"):"JCLQ"==a?h.locationUrl("#match&self=true&type=2"):"JZYP"==a?h.locationUrl("#match&self=true&type=3"):"SJBCGJ"==a?h.locationUrl("#worldCup2018"):"XYDZP"==a?h.locationUrl("#activity/turnplate"):"ZXKJ"==a?h.locationUrl("#recentAwards"):h.locationUrl("#"+b)})})}b.init=c,b._init=d;var h=a("module/common"),i=a("module/ui"),j=a("cgi/lottery"),k=a("cgi/user"),l=a("module/main"),m=a("view/lotteryHall"),n=null}),define("controller/lotteryRules",function(a,b){function c(a){j=trim(g.getUrlParam("lotteryId")),e(a),f()}function d(a){j=null}function e(a){var b={JSK3:"快3玩法说明",GX11X5:"乐11选5玩法说明"},c={title:b[j],className:"play_explain",showHeader:!0,isLeftIconHeader:!0};h.setMain(a,c),"JSK3"==j?h.setContent(i.k3Rules()):"GX11X5"==j&&h.setContent(i.gx11x5Rules())}function f(){}b.init=c,b._init=d;var g=a("module/common"),h=(a("module/ui"),a("module/main")),i=a("view/lotteryRules"),j=null}),define("controller/match",function(a,b){function c(a){x=parseInt(s.getUrlParam("type"))||0,A=trim(s.getUrlParam("self"))||!1,B=parseInt(s.getUrlParam("tab"))||1,window.matchSelectBettype||(window.matchSelectBettype={curMatch:{},selectMatch:{}}),A?s.setHistoryBack("#lotteryHall"):s.setHistoryBack("#editPlan"),e(a),f()}function d(a){x=null,y=null,z=null,A=null,B=null}function e(a){if(A){var b={1:"竞彩足球",2:"竞彩篮球",3:"竞足亚盘"};options={title:b[x],className:"selectMatch",showHeader:!0,rightButtonText:"筛选",isFootballHeader:1==x?!0:!1,rightButtonFun:function(){var a=trim($("#matchFilter").css("display"));"none"==a?p():q()}}}else options={title:"足球",className:"selectMatch",showHeader:!0,isMatchHeader:!0,rightButtonText:"确定",rightButtonFun:i};u.setMain(a,options),u.setContent(w.content())}function f(){A?(o(),m(),1==x&&A?h():j()):g()}function g(){var a=$("#matchTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),x=parseInt($(this).attr("type"))||1,j()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return x==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function h(){var a=$("#footballTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),B=parseInt($(this).attr("tab"))||1,j(),2==B?$(".rightIcon_top").hide():$(".rightIcon_top").show()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"))||0;return d==B?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function i(){if(isNaN(x)||0>=x||1!=x&&2!=x&&3!=x)return t.showNotice("赛事类型有误"),void setTimeout(function(){s.locationUrl("#editPlan")},1e3);l();var a=[],b=window.matchSelectBettype.selectMatch||{};if($.each(b,function(b,c){b=parseInt(b);var d=parseInt(c.oddsId),e=c.recommend||[];isNaN(b)||0>=b||isNaN(d)||0>=d||!e||e.length<=0||!y[b]||!z[d]||a.push({match:y[b],odds:z[d],recommend:e})}),a.length<=0)return void t.showNotice("请选择一场比赛");if(a.length>8)return void t.showNotice("最多只能选择8场比赛");if(!A&&1==a.length){var c=a[0].recommend||[],d=a[0].odds||{},e=trim(d.bettypeContent)||"",f=d.bettypeOdds||{};if("beta"!=ENV&&("SPF"==e||"RQSPF"==e)){if(1!=c.length)return void t.showNotice("胜平负单关推荐只能单选");var g=c[0]||"",h=f[g]||0;if(1.5>h)return void t.showNotice("胜平负单关推荐只能选1.5以上的赔率")}}for(var i={BF:'"比分"',BQC:'"半全场"',SFC:'"胜分差"'},j=0,k=a.length;k>j;j++){var d=a[j].odds||{},e=trim(d.bettypeContent)||"";if("ZJQ"==e&&k>6)return void t.showNotice("包含'总进球'玩法的比赛,最多选6场");if(("BF"==e||"BQC"==e||"SFC"==e)&&k>4)return void t.showNotice("包含"+i[e]+"玩法的比赛,最多选4场")}window.matchSelectBettype=null,A?(window.editSelfSelectMatch=a,s.locationUrl("#createTicketOrder&selfTicket=true&type="+x+"&tab="+B)):(window.editPlanSelectMatch=a,s.locationUrl("#editPlan&matchType="+x))}function j(){var a={type:x};1==x&&2==B&&(a.needSingle=!0),3==x&&(a.type=1,a.needYaPan=!0),n(a),v.getMatchList(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);var b=a.data&&a.data.list||[];y={},z={},$.each(b,function(a,b){var c=b.matchList||[];$.each(c,function(a,b){var c=parseInt(b.matchId)||0,d=trim(b.beginTime),e=new Date(d.replace(/-/g,"/"));b.bDate=s.formatDate(e,"MM-DD"),b.bTime=s.formatDate(e,"HH:II"),isNaN(c)||0>=c||(y[c]=b,$.each(b.bettype,function(a,b){var c=parseInt(b.oddsId)||0;isNaN(c)||0>=c||(z[c]=b)}))})});var c={list:b};1==x?A?1==B?$("#matchList").html(w.football(c)):2==B&&$("#matchList").html(w.SPFDG(c)):$("#matchList").html(w.football(c)):2==x?$("#matchList").html(w.basketball(c)):3==x&&$("#matchList").html(w.JZYP(c)),k();var d=$("#matchList .matchBettype td[recommend]");d.on("click",function(a){var b=trim(this.className),c=$(this).parents(".match_table").eq(0),d=parseInt(c.attr("matchId"));if(!(isNaN(d)||0>=d)){var e=this.parentNode,f=$(e).find("td.active");if(!A)if(1==x){if(-1==b.indexOf("active")&&f.length>=2)return void t.showNotice("胜平负玩法最多选择两个")}else if(2==x&&-1==b.indexOf("active")&&f.length>=1)return void t.showNotice("胜负或大小分玩法最多选择一个");var g=c.find(".matchBettype");g.each(function(a,b){e!=b&&$(b).find("td").removeClass("active")}),3==x&&$(this).siblings("td."+d+"v").removeClass("active"),$(this).toggleClass("active"),$("#moreBettype"+d).removeClass("current"),delete window.matchSelectBettype.selectMatch[d],A&&m()}}),$("#matchList td.more_game").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).parents(".match_table").eq(0),c=parseInt(b.attr("matchId"));isNaN(c)||0>=c||!y[c]||(window.matchSelectBettype.curMatch=y[c],l(),A?s.locationUrl("#matchMoreBettype&self="+A+"&type="+x):s.locationUrl("#matchMoreBettype&type="+x))});var e=$("#matchList .matchDate"),f=$("#matchList .matchContent");e.on("click",function(a){var b=$(this).find(".arrow").eq(0),c=/arrow_down/.test(b.attr("class"));e.find(".arrow").attr("class","arrow arrow_down"),f.hide(),c&&(b.attr("class","arrow arrow_up"),$(this).next().eq(0).show())})})}function k(){var a=$("#matchList .matchBettype"),b={};$.each(a,function(a,c){var d=parseInt($(c).attr("oddsId"));isNaN(d)||0>=d||$(c).find("td[recommend]").each(function(a,c){var e=trim($(c).attr("recommend"));e&&(b[d+"|"+e]=c)})});var c=window.matchSelectBettype.selectMatch||{};$.each(c,function(a,c){a=parseInt(a);var d=parseInt(c.oddsId),e=c.recommend||[];if(!(isNaN(a)||0>=a||isNaN(d)||0>=d||!e||e.length<=0)){var f=!1;$.each(e,function(a,c){c&&b[d+"|"+c]&&($(b[d+"|"+c]).addClass("active"),f=!0)}),f||$("#moreBettype"+a).addClass("current")}})}function l(){var a=$("#matchList .matchBettype:has(td.active)");a.each(function(a,b){var c=parseInt($(b).attr("oddsId"));if(!(isNaN(c)||0>=c)){var d=$(b).parents(".match_table").eq(0),e=parseInt(d.attr("matchId"));if(!(isNaN(e)||0>=e)){var f=[],g=$(b).find("td.active");g.each(function(a,b){var c=trim($(b).attr("recommend"));c&&f.push(c)}),window.matchSelectBettype.selectMatch[e]={oddsId:c,recommend:f}}}})}function m(){l();var a=window.matchSelectBettype.selectMatch||{},b=Object.keys(a).length;$("#selectNum").html(b),b>0?$("#buyList").show():$("#buyList").hide(),$("#createTicketSubmit").off().on("click",i)}function n(a){var b=trim($("#selectLeague").val()),c=$("#leagueList .hot_markSon"),d=[];if(c.each(function(a,b){var c=trim(b.innerHTML);c&&d.push(c)}),d.join("|")!=b&&b&&(b=b.split("|"),b&&b.length>0)){var d=[];$(b).each(function(a,b){b=trim(b),b&&d.push(b)}),a.league=d}}function o(){$("#selectLeague").val("");var a={type:x,status:1,pageNum:1,pageSize:200};3==x&&(a.type=1,a.needYaPan=!0),v.getMatchLeagueList(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};$("#leagueList").html(w.leagueList(c)),$("#leagueList .hot_markSon").on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).toggleClass("active")}),$("#checkedAll").on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).addClass("active"),$("#leagueList .hot_markSon").addClass("active")}),$("#inverse").off().on("click",function(a){$("#matchFilterTab span").removeClass("active"),$(this).addClass("active"),$("#leagueList .hot_markSon").toggleClass("active")}),$("#ensure").off().on("click",r);var d=[];$.each(b,function(a,b){var c=trim(b.league);c&&d.push(c)}),$("#selectLeague").val(d.join("|"))})}function p(){$("#matchFilterTab span").removeClass("active"),$("#matchFilter").show(),$("#pageHeader,#matchFilter").off().on("click",q),$("#matchFilterTab,#leagueList").off().on("click",function(a){a.preventDefault(),a.stopPropagation()})}function q(){$("#matchFilter").hide(),$("#pageHeader,#matchFilter").off("click"),$("#matchFilterTab,#leagueList").off("click")}function r(){var a=$("#leagueList .hot_markSon.active"),b=[];return a.each(function(a,c){var d=trim(c.innerHTML);d&&b.push(d)}),b.length<=0?void t.showNotice("至少选择一个联赛"):($("#selectLeague").val(b.join("|")),q(),void j())}b.init=c,b._init=d;var s=a("module/common"),t=a("module/ui"),u=a("module/main"),v=a("cgi/match"),w=a("view/match"),x=null,y=null,z=null,A=null,B=null}),define("controller/matchMoreBettype",function(a,b){function c(a){return m=parseInt(i.getUrlParam("type"))||0,o=trim(i.getUrlParam("self"))||!1,isNaN(m)||0>=m||1!=m&&2!=m?(j.showNotice("赛事类型有误"),void setTimeout(function(){i.locationUrl("#editPlan")},1e3)):window.matchSelectBettype?(n=window.matchSelectBettype.curMatch,o?i.setHistoryBack("#match&self="+o+"&type="+m):i.setHistoryBack("#match&type="+m),e(a),void f()):void(o?i.locationUrl("#match&self="+o):i.locationUrl("#match"))}function d(a){m=null,n=null,o=null}function e(a){var b=(n.home||"").substr(0,5),c=(n.away||"").substr(0,5),d=b+" VS "+c;2==m&&(d=c+" VS "+b+"(主)");var e={title:d,className:"moreGame",showHeader:!0,rightButtonText:"确定",rightButtonFun:g},f={match:n};k.setMain(a,e),1==m?k.setContent(l.football(f)):2==m&&k.setContent(l.basketball(f)),h();var i=$(".matchBettype"),p=i.find("td[recommend]");p.on("click",function(a){var b=trim(this.className),c=$(this).parents(".matchBettype")[0],d=$(c).find("td.active"),e=$(c).attr("bettypeContent");if(o){if(-1==b.indexOf("active")&&d.length>=6)return void j.showNotice("同种玩法最多选择6个")}else if(2!=m||e){if(-1==b.indexOf("active")&&d.length>=3)return void j.showNotice("同种玩法最多选择三个")}else if(-1==b.indexOf("active")&&d.length>=1)return void j.showNotice("胜负或大小分玩法最多选择一个");i.each(function(a,b){c!=b&&$(b).find("td").removeClass("active")}),$(this).toggleClass("active")})}function f(){}function g(){var a=parseInt(n.matchId);if(!(isNaN(a)||0>=a)){var b=$(".matchBettype:has(td.active)"),c=b.length;if(0>=c)return void j.showNotice("请选择一种玩法");b=b.eq(0);var d=parseInt(b.attr("oddsId"));if(!(isNaN(d)||0>=d)){var e=[],f=b.find("td.active");f.each(function(a,b){var c=trim($(b).attr("recommend"));c&&e.push(c)}),window.matchSelectBettype.selectMatch[a]={oddsId:d,recommend:e},o?i.locationUrl("#match&self="+o+"&type="+m):i.locationUrl("#match&type="+m)}}}function h(){var a=parseInt(n.matchId);if(!(isNaN(a)||0>=a)){var b=window.matchSelectBettype.selectMatch||{},c=b[a]||{},d=parseInt(c.oddsId),e=c.recommend||[];if(!(isNaN(d)||0>=d||!e||e.length<=0)){var f=$(".table_wrap .matchBettype"),g={};$.each(f,function(a,b){var c=parseInt($(b).attr("oddsId"));isNaN(c)||0>=c||$(b).find("td[recommend]").each(function(a,b){var d=trim($(b).attr("recommend"));d&&(g[c+"|"+d]=b)})}),$.each(e,function(a,b){b&&g[d+"|"+b]&&$(g[d+"|"+b]).addClass("active")})}}}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("view/matchMoreBettype"),m=null,n=null,o=null}),define("controller/my",function(a,b){function c(a){o=parseInt(j.getUrlParam("tab"))||4,q=1,r=8,j.setHistoryBack("#home"),e(a),f()}function d(a){o=null,p=null,q=null,r=null,s=null,t=null}function e(a){var b={title:"我的",className:"user",showFooter:!0};l.setMain(a,b);var c={IMG_PATH:IMG_PATH};l.setContent(n.content(c))}function f(){g()}function g(){var a={};m.getUserInfo(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=trim(b.realName)||"",d=trim(b.nickName)||"",e=trim(b.profileImg)||"",f=trim(b.personalImg)||"",g=f||e||IMG_PATH+"user_profile.png",l=c||d;b.tag;s=b.isABT,p=b.userRight||{},t=b.isChannel,$("#userImg").attr("src",g),$("#userName").html(l),p[1]?($("#editPlan").show(),$("#editPlan").on("click",function(a){j.locationUrl("#editPlan")})):p[3]&&($("#editPlan").show(),$("#editPlan").on("click",function(a){j.locationUrl("#editDigitalPlan")})),$("#topBox [href]").on("click",function(a){var b=trim($(this).attr("href"));b&&j.locationUrl(b)}),h(0),s?(h(1),$("#handsel").show()):$("#handsel").hide(),i()})}function h(a){a=parseInt(a)||0;var b={financeType:a};m.getUserFinanceInfo(b,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data||{},d=(parseInt(c.chargeAmount)||0)/100,e=(parseInt(c.incomeAmount)||0)/100,f=c.mobile||"";if(f?$(".phone_num").append(f):($("#noNum").show(),$("#bindMobile").on("click",function(){j.locationUrl("#bindMobile")})),0==a){var g=d+e;0>g&&(g=0),$("#userBalance").html(g)}if(1==a){var h=d+e;h=h.toFixed(2),0>h&&(h=0),$("#handselBalance").html(h)}})}function i(){var a={userRight:p,isABT:s,isChannel:t,isWeixinBrowser:j.isWeixinBrowser()};$("#tabList").html(n.tabList(a)),p[1]||p[2]||p[3]||s?$("#tabList").show():$("#tabList").hide();var b=$("#tabList .user_menu_item");b.on("click",function(a){o=parseInt($(this).attr("tab")),1==o?j.locationUrl("#myBet"):2==o?j.locationUrl("#myCoupon"):3==o?j.locationUrl("#myFinance"):4==o?p[1]?j.locationUrl("#myPlan"):p[3]&&j.locationUrl("#myDigitalPlan"):5==o?j.locationUrl("#myShare"):6==o?j.locationUrl("#myTrade"):7==o?j.locationUrl("#focusList"):8==o?j.locationUrl("#presentOrderList"):9==o&&j.locationUrl("#invitation/index")})}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/user"),n=(a("cgi/plan"),a("cgi/order"),a("view/my")),o=null,p=null,q=null,r=null,s=null,t=null}),define("controller/myBet",function(a,b){function c(a){o=parseInt(j.getUrlParam("tab"))||0,p=1,q=15,j.setHistoryBack("#my"),e(a),f()}function d(a){o=null,p=null,q=null}function e(a){var b={title:"我的投注",className:"user",showHeader:!0,isLeftIconHeader:!0};l.setMain(a,b);var c={IMG_PATH:IMG_PATH};l.setContent(n.content(c))}function f(){i()}function g(a){l.unsetScrollLoad();var b,c=[];0==o?b=0:1==o?b=1:2==o?b=2:3==o&&(b=0,c=[4,5,6]);var d={pageNum:p,pageSize:q,ticketType:b,ticketStatus:c};m.getTicketOrderList(d,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&l.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e,IMG_PATH:IMG_PATH};a?$("#ticketOrderList").append(n.ticketOrderList(f)):$("#ticketOrderList").html(n.ticketOrderList(f)),$("#ticketOrderList [href]").off().on("click",function(a){var b=trim($(this).attr("href"));b&&j.locationUrl(b)}),$("#ticketOrderList .doct_item").off().on("click",function(a){var b=trim($(this).attr("orderNo"));j.locationUrl("#ticketOrderDetail&orderNo="+b)})},function(){l.setScrollLoad(h)})}function h(){p++,g(!0)}function i(){var a=$("#tabList .ui-flex_item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),o=parseInt($(this).attr("tab")),p=1,q=15,g()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"));return d==o?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/order"),n=a("view/myBet"),o=null,p=null,q=null}),define("controller/myCoupon",function(a,b){function c(a){o=trim(j.getUrlParam("illustrate")),p=parseInt(j.getUrlParam("state")),q=1,r=15,e(a),f()}function d(a){o=null,p=null,q=null,r=null}function e(a){var b={};b=o?{title:"优惠券使用说明",className:"coupon",showHeader:!0,isLeftIconHeader:!0}:{title:"优惠券",className:"coupon",showHeader:!0,rightButtonText:"说明",rightButtonFun:function(){j.locationUrl("#myCoupon&illustrate=true")}},m.setMain(a,b),o?m.setContent(n.couponIllustrate()):m.setContent(n.coupon())}function f(){g()}function g(){var a=$("#tabBox .ui-flex_item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),p=parseInt($(this).attr("state"))||1,q=1,r=15,h()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("state"))||0;return p==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function h(a){var b={state:p,pageNum:q,pageSize:r};l.getUserCouponList(b,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=b.data&&b.data.availableCount||0,e=b.data&&b.data.distributeCount||0;$("#availableCount").html("("+d+")"),$("#distributeCount").html("("+e+")");var f=Math.ceil(c/r);f>q&&m.setScrollLoad(i);var g=b.data&&b.data.list||[],h={list:g,IMG_PATH:IMG_PATH,state:p};a?$("#couponList").append(n.couponList(h)):$("#couponList").html(n.couponList(h)),$(".use_btn").on("click",function(){var a=$(this).attr("couponType");1==a?j.locationUrl("#lotteryHall"):2==a&&j.locationUrl("#charge&financeType=1")})},function(){m.setScrollLoad(i)})}function i(){q++,h(!0)}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("cgi/coupon"),m=a("module/main"),n=a("view/myCoupon"),o=null,p=null,q=null,r=null}),define("controller/myDigitalPlan",function(a,b){function c(a){o=1,p=15,e(a),f()}function d(a){o=null,p=null}function e(a){var b={title:"我的晒米",className:"user",showHeader:!0,isLeftIconHeader:!0};l.setMain(a,b);var c={IMG_PATH:IMG_PATH};l.setContent(n.content(c))}function f(){g()}function g(a){l.unsetScrollLoad();var b={pageNum:o,pageSize:p};m.getDigitalPlanList(b,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=b.data&&b.data.totalIncomeCount||0,e=b.data&&b.data.totalIncomeAmount||0;$("#recommendIncomeCount").html(d),$("#recommendIncomeAmount").html(e/100);var f=Math.ceil(c/p);f>o&&l.setScrollLoad(i);var g=b.data&&b.data.list||[],m={list:g,IMG_PATH:IMG_PATH};a?$("#recommendList").append(n.recommendList(m)):$("#recommendList").html(n.recommendList(m)),$("#recommendList [href]").off().on("click",function(a){var b=trim($(this).attr("href"));b&&j.locationUrl(b)}),$("#recommendList .planItem").off().on("click",h)},function(){l.setScrollLoad(i)})}function h(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("amount")),d=trim($(this).attr("access"));if(!(!b||isNaN(c)||0>c)){if("true"==d)return void j.locationUrl("#digitalPlanDetail&planNo="+b);var e={planNo:b,amount:c};k.showCreateOrder(e)}}function i(){o++,g(!0)}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/plan"),n=a("view/myDigitalPlan"),o=null,p=null}),define("controller/myFinance",function(a,b){function c(a){o=parseInt(j.getUrlParam("financeType"))||1,p=1,q=20,j.setHistoryBack("#my"),e(a),f()}function d(a){o=null,p=null,q=null}function e(a){var b={title:"账户明细",className:"moneyNode",showHeader:!0,isFinanceHeader:!0};l.setMain(a,b);var c={};l.setContent(n.content(c))}function f(){i()}function g(){p++,h(!0)}function h(a){l.unsetScrollLoad();var b={financeType:o,pageNum:p,pageSize:q};m.getFinanceRecordList(b,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&l.setScrollLoad(g);var e=b.data&&b.data.list||[],f={list:e};a?$("#financeRecordList").append(n.financeRecordList(f)):$("#financeRecordList").html(n.financeRecordList(f)),$("#financeRecordList [remark]").off().on("click",function(a){var b=trim($(this).attr("remark"))||"";b&&k.showAlert(b)})},function(){l.setScrollLoad(g)})}function i(){var a=$("#financeTab [financeType]");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),o=parseInt($(this).attr("financeType")),p=1,q=20,h()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("financeType"));return d==o?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/finance"),n=a("view/myFinance"),o=null,p=null,q=null}),define("controller/myPlan",function(a,b){function c(a){p=parseInt(k.getUrlParam("recommendType"))||0,q=1,r=15,e(a),f()}function d(a){p=null,q=null,r=null}function e(a){var b={title:"我的晒米",className:"user",
showHeader:!0,isLeftIconHeader:!0};m.setMain(a,b);var c={IMG_PATH:IMG_PATH};m.setContent(o.content(c))}function f(){j()}function g(a){m.unsetScrollLoad();var b={pageNum:q,pageSize:r,recommendType:p};n.getPlanList(b,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=b.data&&b.data.totalIncomeCount||0,e=b.data&&b.data.totalIncomeAmount||0;$("#recommendIncomeCount").html(d),$("#recommendIncomeAmount").html(e/100);var f=Math.ceil(c/r);f>q&&m.setScrollLoad(i);var g=b.data&&b.data.list||[],j={list:g};a?$("#recommendList").append(o.recommendList(j)):$("#recommendList").html(o.recommendList(j)),$("#recommendList [href]").off().on("click",function(a){var b=trim($(this).attr("href"));b&&k.locationUrl(b)}),$("#recommendList .planItem").off().on("click",h)},function(){m.setScrollLoad(i)})}function h(a){a.preventDefault(),a.stopPropagation();var b=function(){p&&k.setHistoryBack("#my")},c=trim($(this).attr("planNo")),d=parseInt($(this).attr("amount")),e=trim($(this).attr("access"));if(!(!c||isNaN(d)||0>d)){if("true"==e)return k.locationUrl("#planDetail&planNo="+c),void b();var f={planNo:c,amount:d,callback:b};l.showCreateOrder(f)}}function i(){q++,g(!0)}function j(){var a=$("#typeList .ui-flex_item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),p=parseInt($(this).attr("recommendType")),1==p||2==p?$("#countNum").hide():$("#countNum").show(),q=1,r=15,g()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("recommendType"));return d==p?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}b.init=c,b._init=d;var k=a("module/common"),l=a("module/ui"),m=a("module/main"),n=a("cgi/plan"),o=a("view/myPlan"),p=null,q=null,r=null}),define("controller/myShare",function(a,b){function c(a){o=1,p=15,e(a),f()}function d(a){o=null,p=null}function e(a){var b={title:"分享收成",className:"user",showHeader:!0,isLeftIconHeader:!0};l.setMain(a,b);var c={IMG_PATH:IMG_PATH};l.setContent(n.content(c))}function f(){g()}function g(a){l.unsetScrollLoad();var b={needUser:!0,needSpread:!0,needPlanAccess:!0,pageNum:o,pageSize:p};m.getOrderList(b,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=b.data&&b.data.totalAmount||0;$("#spreadIncomeCount").html(c),$("#spreadIncomeAmount").html(d/100);var e=Math.ceil(c/p);e>o&&l.setScrollLoad(i);var f=b.data&&b.data.list||[],g={IMG_PATH:IMG_PATH,list:f};a?$("#spreadList").append(n.spreadList(g)):$("#spreadList").html(n.spreadList(g)),$("#spreadList [href]").off().on("click",function(a){var b=trim($(this).attr("href"));b&&j.locationUrl(b)}),$("#spreadList .planItem").off().on("click",h)},function(){l.setScrollLoad(i)})}function h(a){a.preventDefault(),a.stopPropagation();var b=function(){j.setHistoryBack("#my")},c=trim($(this).attr("planNo")),d=parseInt($(this).attr("amount")),e=trim($(this).attr("access")),f=parseInt($(this).attr("planType"));if(!(!c||isNaN(d)||0>d)){if("true"==e)return void(1==f?j.locationUrl("#planDetail&planNo="+c):2==f&&j.locationUrl("#digitalPlanDetail&planNo="+c));var g={planNo:c,amount:d,callback:b};k.showCreateOrder(g)}}function i(){o++,getRecommendList(!0)}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/order"),n=a("view/myShare"),o=null,p=null}),define("controller/myTrade",function(a,b){function c(a){p=1,q=15,e(a),f()}function d(a){p=null,q=null,r=null}function e(a){var b={title:"已购推荐",className:"user",showHeader:!0,isLeftIconHeader:!0};m.setMain(a,b);var c={IMG_PATH:IMG_PATH};m.setContent(o.content(c))}function f(){g()}function g(){var a=$("#tabList .ui-flex_item");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),r=parseInt($(this).attr("tab")),p=1,q=15,h()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"));return d==r?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(a){m.unsetScrollLoad();0==r?planType=1:1==r&&(planType=2);var b={pageNum:p,pageSize:q,planType:planType};n.getOrderList(b,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=b.data&&b.data.totalAmount||0;$("#orderCount").html(c),$("#orderAmount").html(d/100);var e=Math.ceil(c/q);e>p&&m.setScrollLoad(j);var f=b.data&&b.data.list||[],g={list:f,IMG_PATH:IMG_PATH};0==r?a?$("#orderList").append(o.orderList(g)):$("#orderList").html(o.orderList(g)):1==r&&(a?$("#orderList").append(o.digitalOrderList(g)):$("#orderList").html(o.digitalOrderList(g))),$("#orderList [href]").off().on("click",function(a){var b=trim($(this).attr("href"));b&&k.locationUrl(b)}),$("#orderList .planItem").off().on("click",i)},function(){m.setScrollLoad(j)})}function i(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("amount")),d=trim($(this).attr("access"));if(!(!b||isNaN(c)||0>c)){if("true"==d)return void(0==r?k.locationUrl("#planDetail&planNo="+b):1==r&&k.locationUrl("#digitalPlanDetail&planNo="+b));var e={planNo:b,amount:c};l.showCreateOrder(e)}}function j(){p++,h(!0)}b.init=c,b._init=d;var k=a("module/common"),l=a("module/ui"),m=a("module/main"),n=a("cgi/order"),o=a("view/myTrade"),p=null,q=null,r=null}),define("controller/officialSite",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"晒米场官网",className:"officialSite"},c={IMG_PATH:IMG_PATH};j.setMain(a,b),i.isAndroidBrowser()||i.isIosBrowser()?h(c):g(c)}function f(){}function g(a){j.setContent(k.pc(a)),$("#hoverCode,#topCode").hover(function(a){a.preventDefault(),a.stopPropagation(),$("#topCode").show()},function(a){a.preventDefault(),a.stopPropagation(),$("#topCode").hide()}),$("#androidQrCode").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#androidQrCode").fadeOut(function(){$("#androidQrCode").removeClass("show")})}),$("#iosQrCode").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#iosQrCode").fadeOut(function(){$("#iosQrCode").removeClass("show")})}),$("#topAndroidBtn,#bottomAndroidBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#androidQrCode").fadeIn(function(){$("#androidQrCode").addClass("show")})}),$("#topIphoneBtn,#bottomIphoneBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#iosQrCode").fadeIn(function(){$("#iosQrCode").addClass("show")})})}function h(a){j.setContent(k.mobile(a)),$("#mobileTopDownAndriod,#mobileBottomDownAndriod").click(function(){i.locationUrl("http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/other/android/com.shaimii_3.5.0.apk")}),$("#mobileTopDownIos,#mobileBottomDownIos").on("click",function(){i.locationUrl("https://itunes.apple.com/us/app/id1154395135?l=zh&ls=1&mt=8")})}b.init=c,b._init=d;var i=a("module/common"),j=(a("module/ui"),a("module/main")),k=a("view/officialSite")}),define("controller/pc",function(a,b){function c(a){$("body").css("overflow","hidden"),e(a),f()}function d(a){$("body").css("overflow","auto")}function e(a){a.setContent(g.content())}function f(){}b.init=c,b._init=d;var g=(a("module/common"),a("module/ui"),a("module/main"),a("view/pc"))}),define("controller/planDetail",function(a,b){function c(a){w=trim(n.getUrlParam("planNo"))||"",x=trim(n.getUrlParam("transdata"))||"",x&&(n.clearCache("c=plan&m=planInfo"),n.clearCache("c=plan&m=planList")),e(a),f()}function d(a){w=null,x=null,j()}function e(a){var b={title:"推荐详情",className:"expertRcmd",showHeader:!0};p.setMain(a,b)}function f(){g()}function g(){if(w){var a={needUser:!0,planNo:w};s.getPlanInfo(a,function(a){if(2==a.errCode)return void(x?(o.showAttention("支付单正在处理中，请稍等..."),setTimeout(g,5e3)):i(a.data));if(0!=a.errCode)return void o.showNotice(a.msg);o.closeAttention();var b=a.data||{},c={IMG_PATH:IMG_PATH,plan:b};(function(){j();var a=n.getCache("ticketOrderHint"),c=b.isSale;c&&!a&&($("body").append(v.mask()),a=!0,n.setCache("ticketOrderHint",a,1728e5)),$("#ticketOrderMask").on("click",function(){j()})})();p.setContent(v.content(c)),$("#planDetail .planpic").on("click",h),$("#userMore").on("click",function(){var a=trim($(this).attr("userNo"))||"";a&&n.locationUrl("#userDetail&userNo="+a)}),$("#bottomBox [href]").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("href"));b&&n.locationUrl(b)}),$("#upCount, #downCount").on("click",function(a){var b=trim($(this).attr("id")),c=trim($(this).attr("planNo"));if(b&&c){var d=n.getCache("planCount");if(d){if(d[b][c])return void o.showNotice("您已参与过")}else d={upCount:{},downCount:{},shareCount:{}};var e=function(a){return function(){var b=trim($(a).attr("id")),e=parseInt($("#"+b+"Num").html())||0;$("#"+b+"Num").html(e+1),d[b][c]=!0,n.setCache("planCount",d,864e8)}}(this),f="";"upCount"==b?f="planUpCount":"downCount"==b&&(f="planDownCount"),f&&s[f]({planNo:c},e,e)}}),$("#addTicket").on("click",function(){n.locationUrl("#createTicketOrder&planNo="+e)});var d=b.user,e=b.planNo,f=b.matchList[0],l=d.realName,m=d.nickName,q=d.profileImg,r=d.personalImg,t=r||q,u=l||m,w=d.userNo,y=n.getLoginUser(),z=trim(y&&y.userNo||""),A=z?"?spreaderUserNo="+z:"",B={title:u+"推荐",link:location.href.replace(/[#\?].*/g,"")+A+"#planDetail&planNo="+e,imgUrl:t,desc:"【"+f.league+"】"+f.home+" vs "+f.away+"|晒米场",success:function(){var a=parseInt($("#shareCountNum").html())||0;$("#shareCountNum").html(a+1),s.planShareCount({planNo:e})}};o.setShare(B),$("#shareCount").on("click",function(a){o.showShare(B)}),k(w)})}}function h(a){a.preventDefault(),a.stopPropagation();var b=[];$("#planDetail .planpic").each(function(a,c){var d=trim($(this).attr("src"));d&&b.push(d)});var c=trim($(this).attr("src"))||b[0]||"";q.call("previewImage",{current:c,urls:b})}function i(a){a=(parseInt(a)||0)/100,o.showConfirm("需支付"+a+"粒米查看专家推荐<br>(1粒米=1元)",function(){var a=trim(n.getUrlParam("spreaderUserNo"))||"",b={planNo:w,spreaderUserNo:a};t.createOrder(b,function(a){if(0!=a.errCode)return void o.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){n.locationUrl(d)},1e3):(o.showNotice("支付成功"),o.closeConfirm(),setTimeout(function(){g()},1e3)):o.showNotice("支付失败")})},function(){n.locationUrl("#")})}function j(){$("#ticketOrderMask").remove()}function k(a){var b={userNo:a};r.getUserInfo(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);var c=b.data||{},d=parseInt(c.focusStatus)||0;1==d?$("#focus").removeClass("active").html("+关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),l(a)}).show():2==d&&$("#focus").addClass("active").html("已关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),m(a)}).show()})}function l(a){var b={userNo:a};o.showConfirm("关注专家，同时关注“晒米场”微信公共号，您的微信将在第一时间收到专家推荐的更新通知。如果您觉得骚扰，可以取消关注该专家。",function(){u.createFocus(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);b.data||{};o.showNotice("添加关注成功"),o.closeConfirm(),k(a)})},function(){})}function m(a){var b={userNo:a};o.showConfirm("您将收不到专家推荐的更新通知。您确认取消关注吗？",function(){u.cancelFocus(b,function(b){if(0!=b.errCode)return void o.showNotice(b.msg);b.data||{};o.showNotice("取消关注成功"),o.closeConfirm(),k(a)})},function(){})}b.init=c,b._init=d;var n=a("module/common"),o=a("module/ui"),p=a("module/main"),q=a("module/weixin"),r=a("cgi/user"),s=a("cgi/plan"),t=a("cgi/order"),u=a("cgi/focus"),v=a("view/planDetail"),w=null,x=null}),define("controller/presentOrderList",function(a,b){function c(a){r=parseInt(k.getUrlParam("type"))||1,p=1,q=10,k.setHistoryBack("#my"),e(a),f()}function d(a){r=null,p=null,q=null}function e(a){var b={title:"双色球红包",className:"ssqhb",showHeader:!0,isLeftIconHeader:!0};m.setMain(a,b),m.setContent(o.content()),$("#presentTicket").on("click",function(){k.locationUrl("#createPresentOrder")}),$("#pageHeader .leftIcon_header").on("click",function(a){k.isAndroidBrowser()?window.Jockey&&window.Jockey.send("closeWindow"):k.isIosBrowser()&&k.locationUrl("#my")})}function f(){g()}function g(){var a=$("#typeBtn [type]");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),r=parseInt($(this).attr("type"))||1,p=1,q=10,1==r?h():2==r&&j()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"));return d==r?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function h(a){m.unsetScrollLoad();var b={pageNum:p,pageSize:q};n.presentOrderList(b,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&m.setScrollLoad(i);var e=b.data&&b.data.list||[],f={type:r,list:e,IMG_PATH:IMG_PATH};a?$("#prentOrderList").append(o.prentOrderList(f)):$("#prentOrderList").html(o.prentOrderList(f)),$("#prentOrderList li").on("click",function(){var a=trim($(this).attr("orderNo"));k.locationUrl("#receivedOrder&self=true&orderNo="+a)})},function(){m.setScrollLoad(i)})}function i(){p++,1==r?h(!0):2==r&&j(!0)}function j(a){m.unsetScrollLoad();var b={type:r,pageNum:p,pageSize:q};n.receivedOrderList(b,function(b){if(0!=b.errCode)return void l.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&m.setScrollLoad(i);var e=b.data&&b.data.list||[],f={list:e,IMG_PATH:IMG_PATH};a?$("#prentOrderList").append(o.receiveOrderList(f)):$("#prentOrderList").html(o.receiveOrderList(f)),$("#prentOrderList li").on("click",function(){var a=trim($(this).attr("orderNo"));k.locationUrl("#ticketOrderDetail&orderNo="+a)})},function(){m.setScrollLoad(i)})}b.init=c,b._init=d;var k=a("module/common");k.isAndroid()&&a("external/jockey");var l=a("module/ui"),m=a("module/main"),n=a("cgi/order"),o=a("view/presentOrderList"),p=null,q=null,r=null}),define("controller/presentOrderSuccess",function(a,b){function c(a){k=trim(g.getUrlParam("orderNo"))||"",e(a),f()}function d(a){k=null}function e(a){var b={title:"付款成功",className:"ssqhb",showHeader:!0,isSupplierHeader:!0,rightButtonText:"我的",rightButtonFun:function(){g.locationUrl("#presentOrderList")}},c={IMG_PATH:IMG_PATH,isApp:g.isApp()};i.setMain(a,b),i.setContent(j.content(c));var d=g.getCache("ssqhbRemark")||"快来抢红包";if($("#shareWechat").on("click",function(){g.isAndroidBrowser()?window.Jockey&&window.Jockey.send("shareWechat",{title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d}):g.isIosBrowser()&&g.isIos()&&window.webkit.messageHandlers.ssqHbShareToFriend.postMessage({title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d})}),$("#shareWechatMoments").on("click",function(){g.isAndroidBrowser()?window.Jockey&&window.Jockey.send("shareWechatMoments",{title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d}):g.isIosBrowser()&&g.isIos()&&window.webkit.messageHandlers.ssqHbShareToCircle.postMessage({title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d})}),$("#shareBtn").on("click",function(){if(g.isWeixinBrowser()){var a={title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d};h.showShare(a)}}),g.isWeixinBrowser()){var c={title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+k,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:d};h.setShare(c)}}function f(){}b.init=c,b._init=d;var g=a("module/common");g.isAndroid()&&a("external/jockey");var h=a("module/ui"),i=a("module/main"),j=(a("cgi/order"),a("view/presentOrderSuccess")),k=null}),define("controller/receivedOrder",function(a,b){function c(a){z=trim(s.getUrlParam("orderNo"))||"",A=trim(s.getUrlParam("self"))||"",B=1,C=8,e(a),f()}function d(a){z=null,B=null,C=null,A=null,D=null}function e(a){var b={title:"双色球红包",className:"ssqhb",showHeader:!0,rightButtonText:"分享",rightButtonFun:k},c={IMG_PATH:IMG_PATH};if(u.setMain(a,b),u.setContent(y.content(c)),s.isWeixinBrowser()){var c={title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+z,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:D||"快来领双色球红包"};t.setShare(c)}$("#ssqhbDownload").on("click",function(){s.locationUrl("#lotteryHall")}),$("#closeSsqHbBanner").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(this).parents("#ssqhbDownload").remove()})}function f(){g(),h()}function g(){var a={orderNo:z};v.presentOrderInfo(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);var b=a.data||{},c=b.receivedOrderNo,d=b.presentNum,e=b.presentReceived;D=b.presentRemark||"快来抢红包";var f=b.presentStatus,g=b.user||{},h=g.nickName,i=g.realName,l=i||h,m={presentOrderInfo:b,IMG_PATH:IMG_PATH,self:A};$("#presentOrderInfo").html(y.presentOrderInfo(m)),3==f?$("#receiveTitle").html("共"+d+"红包，"+(d-e)+"个已过期退款"):$("#receiveTitle").html("已领取"+e+"/"+d+"个"),c?$("#receivedBtn").on("click",function(){s.locationUrl("#ticketOrderDetail&orderNo="+c)}):$("#receiveBtn").on("click",function(){j(),s.setCache("ssqhbUserName",l)}),$("#shareBtn").on("click",function(){k()}),$("#continuePresent").on("click",function(){s.locationUrl("#createPresentOrder")})})}function h(a){u.unsetScrollLoad();var b={type:1,pageNum:B,pageSize:C,orderNo:z};v.receivedOrderList(b,function(b){if(0!=b.errCode)return void t.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/C);d>B&&u.setScrollLoad(i);var e=b.data&&b.data.list||[],f={list:e,IMG_PATH:IMG_PATH};a?$("#receiveList").append(y.receiveList(f)):$("#receiveList").html(y.receiveList(f))},function(){u.setScrollLoad(i)})}function i(){B++,h(!0)}function j(){var a={orderNo:z,noJumpLogin:!0};v.receiveOrder(a,function(a){if(1==a.errCode)m();else{if(0!=a.errCode)return void t.showNotice(a.msg);s.locationUrl("#receivedOrderSuccess")}})}function k(){if(s.isWeixinBrowser()){var a={title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+z,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:D};t.showShare(a)}else s.isAndroidBrowser()?window.Jockey&&window.Jockey.send("SSQHBShare",{title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+z,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:D}):s.isIosBrowser()&&s.isIos()&&window.webkit.messageHandlers.ssqHbShare_received.postMessage({title:"免费领取双色球红包",link:location.href.replace(/[#\?].*/g,"")+"#receivedOrder&orderNo="+z,imgUrl:"http://caifu-1251177394.cosgz.myqcloud.com/dist/shaimi/img/ssqhb_share.jpg",desc:D})}function l(){var a=trim($("#mobile").val())||"",b=trim($("#validate").val())||"";if(!s.verifyMobile(a))return void t.showNotice("输入的手机号码有误");var c={mobile:a,code:b};w.sendSmsCode(c,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("倒计时("+b+")"),l.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("重新获取").on("click",p)};c(),q()})}function m(){n();var a={IMG_PATH:IMG_PATH};$("#pageContainer").append(y.ssqhbMaskBox(a)),$("#smsCodeBtn").on("click",p),$("#loginSubmit").on("click",o),$("#closePopBtn").off().on("click",n)}function n(){$("#ssqhbMask").remove(),clearTimeout(l.timer)}function o(){var a=trim($("#mobile").val())||"",b=trim($("#smsCode").val())||"";if(!s.verifyMobile(a))return void t.showNotice("输入的手机号码有误");if(6!=b.length||/\D/.test(b))return void t.showNotice("输入的验证码有误");var c={mobile:a,code:b};x.mobileToggleUser(c,function(a){return 0!=a.errCode?void t.showNotice(a.msg):(t.showNotice("登录成功"),void n())})}function p(){var a=trim($("#mobile").val())||"";if(!s.verifyMobile(a))return void t.showNotice("输入的手机号码有误");q();var b={IMG_PATH:IMG_PATH};$("#pageContainer").append(y.confirm(b)),$("#sureBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),l()}),$("#cancelBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),q()}),r(),$("#validateImage").on("click",function(){r()})}function q(){$("#confirmBox").remove()}function r(){$("#validateImage").attr("src",PROXY+"?c=verificationCode&m=image&_"+(new Date).getTime())}b.init=c,b._init=d;var s=a("module/common");s.isAndroid()&&a("external/jockey");var t=a("module/ui"),u=a("module/main"),v=a("cgi/order"),w=a("cgi/sms"),x=a("cgi/user"),y=a("view/receivedOrder"),z=null,A=null,B=null,C=null,D=null}),define("controller/receivedOrderSuccess",function(a,b){function c(a){e(a),f()}function d(a){g.clearCache("ssqhbUserName")}function e(a){var b={title:"领取成功",className:"ssqhb",showHeader:!0,isSimpleHeader:!0},c={IMG_PATH:IMG_PATH};h.setMain(a,b),h.setContent(i.content(c)),$("#sendSsqHb").on("click",function(){g.locationUrl("#createPresentOrder")}),$("#checkSsqHb").on("click",function(){g.locationUrl("#presentOrderList&type=2")});var d=g.getCache("ssqhbUserName");$("#senderName").html(d)}function f(){}b.init=c,b._init=d;var g=a("module/common"),h=(a("module/ui"),a("module/main")),i=(a("cgi/order"),a("view/receivedOrderSuccess"))}),define("controller/recentAwards",function(a,b){function c(a){m=1,n=8,e(a),f()}function d(a){m=null,n=null}function e(a){var b={title:"最新开奖",className:"recentAwards",showHeader:!0,isLeftIconHeader:!0};j.setMain(a,b);var c={IMG_PATH:IMG_PATH};j.setContent(l.content(c))}function f(){g()}function g(){var a={};k.lotteryIssueList(a,function(a){if(0!=a.errCode)return void i.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b,Date:Date};$("#drawList").html(l.drawList(c)),$("#drawList .draw_item").on("click",function(){var a=trim($(this).attr("lotteryId"));h.locationUrl("#drawHistory&lotteryId="+a)})})}b.init=c,b._init=d,a("external/jquery.slides");var h=a("module/common"),i=a("module/ui"),j=a("module/main"),k=(a("cgi/user"),a("cgi/order"),a("cgi/lottery")),l=a("view/recentAwards"),m=null,n=null}),define("controller/replayDetail",function(a,b){function c(a){t=trim(l.getUrlParam("replayNo"))||"",u=trim(l.getUrlParam("transdata"))||"",u&&(l.clearCache("c=replay&m=planInfo"),l.clearCache("c=replay&m=planList")),e(a),f()}function d(a){t=null,u=null}function e(a){var b={title:"复盘详情",className:"expertRcmd",showHeader:!0};n.setMain(a,b)}function f(){g()}function g(){if(t){var a={replayNo:t};q.getReplayInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);m.closeAttention();var b=a.data||{},c={IMG_PATH:IMG_PATH,replay:b};n.setContent(s.content(c)),$("#replayDetail .planpic").on("click",h),$("#userMore").on("click",function(){var a=trim($(this).attr("userNo"))||"";a&&l.locationUrl("#userDetail&userNo="+a)}),$("#bottomBox [href]").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("href"));b&&l.locationUrl(b)}),$("#upCount, #downCount").on("click",function(a){var b=trim($(this).attr("id")),c=trim($(this).attr("replayNo"));if(b&&c){var d=l.getCache("replayCount");if(d){if(d[b][c])return void m.showNotice("您已参与过")}else d={upCount:{},downCount:{},shareCount:{}};var e=function(a){return function(){var b=trim($(a).attr("id")),e=parseInt($("#"+b+"Num").html())||0;$("#"+b+"Num").html(e+1),d[b][c]=!0,l.setCache("replayCount",d,864e8)}}(this),f="";"upCount"==b?f="replayUpCount":"downCount"==b&&(f="replayDownCount"),f&&q[f]({replayNo:c},e,e)}});var d=b.user,e=b.replayNo,f=d.realName,g=d.nickName,j=d.profileImg,k=d.personalImg,o=k||j,p=f||g,r=d.userNo,t=l.getLoginUser(),u=trim(t&&t.userNo||""),v=u?"?spreaderUserNo="+u:"",w={title:p+"的复盘",link:location.href.replace(/[#\?].*/g,"")+v+"#replayDetail&replayNo="+e,imgUrl:o,desc:"",success:function(){var a=parseInt($("#shareCountNum").html())||0;$("#shareCountNum").html(a+1),q.planShareCount({replayNo:e})}};m.setShare(w),$("#shareCount").on("click",function(a){m.showShare(w)}),i(r)})}}function h(a){a.preventDefault(),a.stopPropagation();var b=[];$("#replayDetail .planpic").each(function(a,c){var d=trim($(this).attr("src"));d&&b.push(d)});var c=trim($(this).attr("src"))||b[0]||"";o.call("previewImage",{current:c,urls:b})}function i(a){var b={userNo:a};p.getUserInfo(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data||{},d=parseInt(c.focusStatus)||0;1==d?$("#focus").removeClass("active").html("+关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),j(a)}).show():2==d&&$("#focus").addClass("active").html("已关注").off().on("click",function(b){b.preventDefault(),b.stopPropagation(),k(a)}).show()})}function j(a){var b={userNo:a};m.showConfirm("关注专家，同时关注“晒米场”微信公共号，您的微信将在第一时间收到专家推荐的更新通知。如果您觉得骚扰，可以取消关注该专家。",function(){r.createFocus(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);b.data||{};m.showNotice("添加关注成功"),m.closeConfirm(),i(a)})},function(){})}function k(a){var b={userNo:a};m.showConfirm("您将收不到专家推荐的更新通知。您确认取消关注吗？",function(){r.cancelFocus(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);b.data||{};m.showNotice("取消关注成功"),m.closeConfirm(),i(a)})},function(){})}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("module/weixin"),p=a("cgi/user"),q=a("cgi/replay"),r=(a("cgi/order"),a("cgi/focus")),s=a("view/replayDetail"),t=null,u=null}),define("controller/replayList",function(a,b){function c(a){n=1,o=12,i.setHistoryBack("#home"),e(a),f()}function d(a){n=null,o=null}function e(a){var b={title:"专家复盘",className:"",showHeader:!0,isLeftIconHeader:!0};k.setMain(a,b);var c={IMG_PATH:IMG_PATH};k.setContent(m.content(c))}function f(){g()}function g(a){k.unsetScrollLoad();var b={needUser:!0,needAll:!0,pageNum:n,pageSize:o};l.getReplayList(b,function(b){if(0!=b.errCode)return void j.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/o);d>n&&k.setScrollLoad(h);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#replayList").append(m.replayList(f)):$("#replayList").html(m.replayList(f)),$("#replayList .item").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("replayNo"));b&&b&&i.locationUrl("#replayDetail&replayNo="+b)}),$("#replayList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&i.locationUrl("#userDetail&userNo="+b)})},function(){k.setScrollLoad(h)})}function h(){n++,g(!0)}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/replay"),m=a("view/replayList"),n=null,o=null}),define("controller/sign",function(a,b){function c(a){l.setHistoryBack("#home"),e(a),f()}function d(a){}function e(a){var b={title:"免费领米",className:"signIn"};n.setMain(a,b);var c={IMG_PATH:IMG_PATH};n.setContent(q.content(c)),$("#backBtn").on("click",function(a){a.preventDefault(),a.stopPropagation(),l.historyBack()}),$("#recharge").off().on("click",function(){l.locationUrl("#charge")}),$("#luckyDraw").off().on("click",function(){l.locationUrl("#activity/turnplate")}),g()}function f(){j()}function g(){var a={};p.getChargeActivityInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=8;b[100]&&(c=b[100]),$("#presentAmount").html(c)})}function h(){i(),$("#signMask").show(),$("#signMask").off().on("click",i),$("#signPop").off().on("click",function(a){a.preventDefault(),a.stopPropagation()}),$("#confirmSign").off().on("click",k),$("#cancelSign").off().on("click",i)}function i(){$("#signMask").hide()}function j(){var a={};o.signInfo(a,function(a){if(0!=a.errCode)return void m.showNotice(a.msg);var b=a.data||{},c=parseInt(b.todayAccessAmount/100)||0,d=parseInt(b.totalAmount/100)||0,e=parseInt(b.continueDay)||1,f=!!b.isBindMobile,g=parseInt(b.signStatus);$("#unclaimed").html(c),$("#claim").html(d),1==g?$("#signBtn").addClass("active").html("今日已签").off().show():$("#signBtn").removeClass("active").html("签到").off().on("click",h).show(),f?($("#bindMobileBox").hide(),$("#bindMobile").off()):($("#bindMobileBox").show(),$("#bindMobile").off().on("click",function(){l.locationUrl("#bindMobile")}));var i=$("#signDay li");i.removeClass("active"),i.find(".signStatus").hide(),i.each(function(a,b){var c=a+1;e>c?$(b).find(".signStatus").show():c==e&&($(b).addClass("active"),g&&$(b).find(".signStatus").show())})})}function k(){var a={};o.createSign(a,function(a){return 3==a.errCode?void m.showNotice("你当天已经签到过"):0!=a.errCode?void m.showNotice(a.msg):(m.showNotice("签到成功"),i(),void j())})}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/sign"),p=a("cgi/activity"),q=a("view/sign")}),define("controller/smlrComboList",function(a,b){function c(a){o=1,p=8,i.setHistoryBack("#home"),e(a),f()}function d(a){o=null,p=null}function e(a){var b={title:"晒米冷热",className:"hotCold",showHeader:!0};k.setMain(a,b);var c={};k.setContent(n.content(c))}function f(){g()}function g(){var a={comboType:2,pageNum:o,pageSize:p};l.getComboList(a,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=(a.data&&a.data.totalCount||0,a.data&&a.data.list||[]),c={IMG_PATH:IMG_PATH,list:b};$("#smlrComboList").html(n.smlrComboList(c)),$("#smlrComboList .jx").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("comboNo")),c=parseInt($(this).attr("comboType"))||0,d=parseInt($(this).attr("amount"))||0;b&&2==c&&d>0&&h(b,c,d)})})}function h(a,b,c){c=(parseInt(c)||0)/100,j.showConfirm("需支付"+c+"粒米查看晒米冷热<br>(1粒米=1元)",function(){var c={comboNo:a,comboType:b};m.createComboOrder(c,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){i.locationUrl(d)},1e3):(j.showNotice("支付成功"),setTimeout(function(){i.locationUrl("#jxzpList")},1e3)):j.showNotice("支付失败")})},function(){})}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/combo"),m=a("cgi/order"),n=a("view/smlrComboList"),o=null,p=null}),define("controller/ssq",function(a,b){function c(a){q=trim(j.getUrlParam("bet"))||!1,q?j.setHistoryBack("#ssq"):j.setHistoryBack("#lotteryHall"),e(a),f()}function d(a){p=null,q=null,r=null,s.remove("ssq"),p&&p.$destroy()}function e(a){var b={title:q?"双色球投注":"双色球",className:"ssq",showHeader:!0,rightButtonText:"历史开奖",rightButtonFun:g};l.setMain(a,b),q?l.setContent(o.ssqBet()):l.setContent(o.ssqNum())}function f(){h(),i()}function g(){j.locationUrl("#drawHistory&lotteryId=SSQ")}function h(){var a={lotteryId:"SSQ"};m.lotteryIssueInfo(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data,c=b.endTime;c=c.replace(/\d{4}-(\d{2}-\d{2} \d{2}:\d{2}):\d{2}/,"$1"),r=b.issue,$("#endTime").html(c),$("#issue").html(r)})}function i(){p=new Vue({el:"#pageContent",data:{redBall:"",blueBall:"",singleUnit:0,ssqItems:"",prize:0,totalUnit:0,multiple:1,ssqCartKey:"ssq"}}),p.setSsq=function(){p.redBall=[],p.blueBall=[];for(var a=1;34>a;a++){var b={color:"red",redNum:10>a?"0"+a:a,select:!1};p.redBall.push(b)}for(var a=1;17>a;a++){var b={color:"blue",blueNum:10>a?"0"+a:a,select:!1};p.blueBall.push(b)}},p.setSsq(),p.chooseBallNum=function(a,b){var c=a,d=b,e=p.calcUnit(c,c-5)/p.calcUnit(6,1)*d;e>=1?this.singleUnit=e:this.singleUnit=0},p.selectBall=function(a){for(var b=0,c=0,d=0;d<p.redBall.length;d++)1==p.redBall[d].select&&b++;for(var d=0;d<p.blueBall.length;d++)1==p.blueBall[d].select&&c++;return 1==!!a.select?(a.select=!1,"red"==a.color&&b--,"blue"==a.color&&c--):(a.select=!0,"red"==a.color&&b++,"blue"==a.color&&c++),b>16?(1==!!a.select?a.select=!1:a.select=!0,void k.showNotice("最多选择16个红球")):void p.chooseBallNum(b,c)},p.calcUnit=function(a,b){return a==b?a:a*this.calcUnit(a-1,b)},p.chooseRandomBall=function(){var a=function(a,b){var c=[];switch(b){case 1:maxNumber=33;break;case 2:maxNumber=16}for(var d=0;a>d;d++){var e=Math.ceil(Math.random()*maxNumber),f=10>e?"0"+e.toString():e.toString();c.join(" ").indexOf(f)>=0?d--:c.push(f)}if(1==b)for(var d=0;d<c.length;d++)p.redBall[parseInt(c[d])-1].select=!0;if(2==b)for(var d=0;d<c.length;d++)p.blueBall[parseInt(c[d])-1].select=!0};p.setSsq(),a(6,1),
a(1,2),p.chooseBallNum(6,1)},p.ensureSelect=function(){for(var a=[],b=[],c=0;c<p.redBall.length;c++)1==p.redBall[c].select&&a.push(p.redBall[c]);for(var c=0;c<p.blueBall.length;c++)1==p.blueBall[c].select&&b.push(p.blueBall[c]);if(0==a.length&&0==b.length)return p.chooseRandomBall();if(a.length<6||b.length<1)return void k.showNotice("至少选择6个红球，1个蓝球");if(2*p.singleUnit>2e4)return void k.showNotice("单次投注最多2万元");var d=p.getSelNumsInfo();p.addToStorage(d),j.locationUrl("#ssq&bet=true")},p.getSelNumsInfo=function(){for(var a=this.singleUnit,b=2*this.singleUnit,c="",d=0;d<p.redBall.length;d++)1==p.redBall[d].select&&(c+=trim(p.redBall[d].redNum)+" ");c+="| ";for(var d=0;d<p.blueBall.length;d++)1==p.blueBall[d].select&&(c+=trim(p.blueBall[d].blueNum)+" ");return{lotteryId:"SSQ",selUnit:a,selMoney:b,selnums:c.trim()}},p.addToStorage=function(a){if(null!=a){var b=p.getCartItems();b.unshift(a);var c=JSON.stringify(b);s.set(p.ssqCartKey,c)}},p.getCartItems=function(){var a=s.get(p.ssqCartKey);return null===a||void 0===a?""!=p.ssqCartKey?(s.set(p.ssqCartKey,"[]"),JSON.parse("[]")):{}:""==a?JSON.parse("[]"):JSON.parse(a)},p.initList=function(){p.totalUnit=0,p.prize=0;var a=[];s.get(p.ssqCartKey)&&(a=JSON.parse(s.get(p.ssqCartKey))),null!=a&&a.length>0&&a.forEach(function(a,b){a.redballs=a.selnums.split("|")[0].trim().split(" "),a.blueballs=a.selnums.split("|")[1].trim().split(" "),p.totalUnit+=a.selUnit,p.prize+=a.selMoney*p.multiple}),p.ssqItems=a},p.initList(),p.cancel=function(a){var b=p.getCartItems(),c=[];b.forEach(function(b,d){b.selnums!=a.selnums&&c.push(b)});var d=JSON.stringify(c);s.set(p.ssqCartKey,d),p.initList()},p.addRandomList=function(a){function b(){function a(a,b,c){for(var d=0;a>d;d++){var e=Math.ceil(33*Math.random());e=10>e?"0"+e.toString():e.toString(),b.join(" ").indexOf(e)>=0?d--:b=b.join(" ").replace(-1,e).split(" ")}var f="";return""==c&&(f=Math.ceil(16*Math.random()),f=10>f?"0"+f.toString():f.toString(),c=f),b.sort().join(" ")+" | "+c}for(var b=1,c=6,d=[],e="",f=0;c>f;f++)d.push(-1);var g=a(c,d,e);return{lotteryId:"SSQ",selUnit:b,selMoney:2*b,selnums:g.trim()}}for(var c=0;a>c;c++){var d=b();p.addToStorage(d),p.initList()}},p.$watch("multiple",function(a){isDefined(a)&&(a=1>a?1:a>99?99:a,p.multiple=a,p.prize=p.multiple*p.totalUnit*2)}),p.changeValue=function(a){p.multiple=parseInt(p.multiple)+a},p.backToSsq=function(){j.locationUrl("#ssq")},p.createSubmit=function(){var a=$("#protocol")[0].checked;if(!a)return void k.showNotice("请阅读并同意代购协议");if(!isDefined(p.multiple)||!/^[0-9]+$/.test(p.multiple))return void k.showNotice("请输入正整数倍数");if(p.totalUnit<=0||p.prize<=0)return void k.showNotice("请至少选择一注");var b=p.getCartItems(),c=[];b.forEach(function(a,b){c.push(a.selnums.split("|")[0].trim().split(" ").join(",")+"|"+a.selnums.split("|")[1].trim().split(" "))}),c=c.join(";");var d={ticketMultiple:p.multiple,issue:r,lotteryId:"SSQ",betContent:c};n.createDigitalTicketOrder(d,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){j.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(j.getLocationHash());j.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):k.showNotice("支付失败"),s.remove("ssq")})},p.destroyed=function(){}}b.init=c,b._init=d,a("external/vue");var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/lottery"),n=a("cgi/order"),o=a("view/ssq"),p=null,q=null,r=null,s=function(){return{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)}}}()}),define("controller/supplierTicketOrderDetail",function(a,b){function c(a){u=parseInt(o.getUrlParam("type"))||1,v=trim(o.getUrlParam("orderNo"))||"",o.setHistoryBack("#supplierTicketOrderList&type="+u),w=[],e(a),f()}function d(a){u=null,v=null,w=null,j()}function e(a){var b={title:"方案详情",className:"myDocumentary",showHeader:!0,rightButtonText:"　"};q.setMain(a,b)}function f(){g()}function g(a){if(v){var b={type:2,orderNo:v};s.getTicketOrderInfo(b,function(b){if(0!=b.errCode)return void p.showNotice(b.msg);var c=b.data||{},d={ticketOrder:c};q.setContent(t.content(d)),$("#refuseTicket").off().on("click",h),$("#showTicketImg").off().on("click",i),a&&$("#showTicketImg").click(),o.isWeixinBrowser()?$("#ticketSelect").off().on("click",k):$("#ticketSelect").off().on("change",l),$("#prizeSure").off().on("click",n)})}}function h(){p.showConfirm("您将放弃此单出票赚钱的机会？",function(){var a={orderNo:v};s.refuseTicket(a,function(a){return 0!=a.errCode?void p.showNotice(a.msg):(p.closeConfirm(),p.showNotice("拒绝成功"),$("#uploadBtn").remove(),void $("#refuseTicket").remove())})})}function i(){var a=parseInt($(this).attr("ticketStatus"))||0,b=trim($(this).attr("resourceList"))||"";b&&(b=b.split("|")),j();var c=[],d=[];$.each(b,function(a,b){b=trim(b),b&&(c.push(b),d.push('<img class="img-responsive" src="'+b+'" style="margin-top:20px"/>'))});var e={ticketStatus:a,html:d.join("")};$("body").append(t.previewImage(e)),$("#showImg img").off().on("click",function(a){if(a.preventDefault(),a.stopPropagation(),o.isWeixinBrowser()&&c.length>0){var b=trim(this.src)||"";r.call("previewImage",{current:b,urls:c})}}),$("#backBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),j()}),o.isWeixinBrowser()?$("#changeBtn").on("click",k):$("#changeBtn").on("change",l)}function j(){$("#showImg").remove()}function k(a){a.preventDefault(),a.stopPropagation(),r.call("chooseImage",{count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){var b=[],c=a.localIds;$.each(c,function(a,c){b.push(c)});var d=b.length;0>=d||(w=b,m())}})}function l(a){var b=[],c={gif:!0,jpg:!0,jpeg:!0,png:!0},d=a.target.files||[];$.each(d,function(a,d){if(d.type)/\bimage\b/i.test(d.type)&&b.push(d);else{var e=trim(d.name),f=e.lastIndexOf(".");if(-1!=f){var g=e.substr(f+1).toLowerCase();c[g]&&b.push(d)}}});var e=b.length;0>=e||(w=b,m())}function m(){var a=w.length||0,b=0,c=function(c){b==a&&(w=[],p.closeLoading(),s.uploadTicket(c,function(a){return 0!=a.errCode?void p.showNotice(a.msg):(p.showNotice("票样上传成功"),void setTimeout(function(){g(0!=$("#showImg").length)},1e3))}))},d={orderNo:v},e=1e4;if(a>0&&(e=10*a*1e3),p.showLoading(e),o.isWeixinBrowser()){var f=[];$.each(w,function(e,g){r.call("uploadImage",{localId:g,isShowProgressTips:0,success:function(e){var g=e.serverId;b++,f.push(g),f.length==a&&(d.ticketImg=f,c(d))}})})}else{var f=[];$.each(w,function(e,g){lrz(g).then(function(e){b++,f.push(e.file),f.length==a&&(d.ticketImg=f,c(d))})})}}function n(a){var b=parseFloat($("#ticketPrizeAmount").val())||0;return isNaN(b)||0>=b?void p.showNotice("输入的中奖金额有误"):void p.showConfirm("方案中奖金额：<span class='color_red'>"+b+"</span>",function(){b=100*b.toFixed(2);var a={orderNo:v,ticketPrizeAmount:b};s.sendTicketPrize(a,function(a){return 0!=a.errCode?void p.showNotice(a.msg):(p.closeConfirm(),p.showNotice("中奖金额录入成功"),void setTimeout(function(){g()},1e3))})})}b.init=c,b._init=d,a("external/localResizeIMG");var o=a("module/common"),p=a("module/ui"),q=a("module/main"),r=a("module/weixin"),s=a("cgi/order"),t=a("view/supplierTicketOrderDetail"),u=null,v=null,w=null}),define("controller/supplierTicketOrderList",function(a,b){function c(a){o=parseInt(j.getUrlParam("type"))||1,p=1,q=16,e(a),f()}function d(a){}function e(a){var b={title:"方案列表",className:"planList",showHeader:!0,isSupplierHeader:!0,rightButtonText:"统计",rightButtonFun:function(){j.locationUrl("#supplierTicketStatistics")}};l.setMain(a,b);var c={type:o};l.setContent(n.content(c)),$("#typeList .ui-flex_item").on("click",function(a){var b=parseInt($(this).attr("type"));j.locationUrl("#supplierTicketOrderList&type="+b)})}function f(){g(),h()}function g(a){l.unsetScrollLoad();var b=void 0;1==o?b=[0]:2==o?b=[2,3,4,5,6]:3==o?b=[4,6]:4==o&&(b=[5]);var c={type:2,ticketStatus:b,pageNum:p,pageSize:q};m.getTicketOrderList(c,function(b){if(0!=b.errCode)return void k.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/q);d>p&&l.setScrollLoad(i);var e=b.data&&b.data.list||[],c=parseInt(b.data.totalCount)||0,f=parseInt(b.data.totalAmount/100)||0,g=(b.data.totalTicketPrizeAmount/100).toFixed(2)||0;$("#statistics").show(),$("#totalCount").html(c),1==o||2==o?$("#totalMoney").html(f):(3==o||4==o)&&$("#totalMoney").html(g);var h={list:e,type:o||1};a?$("#supplierTicketOrderList").append(n.supplierTicketOrderList(h)):$("#supplierTicketOrderList").html(n.supplierTicketOrderList(h)),$("#supplierTicketOrderList [orderNo]").on("click",function(){var a=trim($(this).attr("orderNo"));j.locationUrl("#supplierTicketOrderDetail&type="+o+"&orderNo="+a)})},function(){l.setScrollLoad(i)})}function h(){var a={type:2,ticketStatus:[4,6],nullTicketPrizeAmount:!0};m.getTicketOrderCount(a,function(a){if(0!=a.errCode)return void k.showNotice(a.msg);var b=a.data&&a.data.totalCount||0;!isNaN(b)&&b>0&&$("#tipsNum").html(b).show()})}function i(){p++,g(!0)}b.init=c,b._init=d;var j=a("module/common"),k=a("module/ui"),l=a("module/main"),m=a("cgi/order"),n=a("view/supplierTicketOrderList"),o=null,p=null,q=null}),define("controller/supplierTicketStatistics",function(a,b){function c(a){e(a),f()}function d(a){}function e(a){var b={title:"出票统计",className:"ticketStatistics",showHeader:!0,rightButtonText:" "};i.setMain(a,b)}function f(){g()}function g(){var a={};j.stationTicketStatistics(a,function(a){if(0!=a.errCode)return void h.showNotice(a.msg);var b=a.data||{},c={ticketStatistics:b};i.setContent(k.content(c))})}b.init=c,b._init=d;var h=(a("module/common"),a("module/ui")),i=a("module/main"),j=a("cgi/station"),k=a("view/supplierTicketStatistics")}),define("controller/ticketFollow",function(a,b){function c(a){q=1,r=8,l.setHistoryBack("#home"),e(a),f()}function d(a){q=null,r=null,s=null}function e(a){var b={title:"跟专家",className:"index",showHeader:!0,rightButtonText:"自己投",rightButtonFun:function(){l.locationUrl("#lotteryHall")}};n.setMain(a,b);var c={IMG_PATH:IMG_PATH};n.setContent(p.content(c))}function f(){g()}function g(){var a=$("#recommendTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),s=parseInt($(this).attr("matchType")),q=1,r=8,1==s||2==s?h():3==s&&k()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"));return d==s?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(a){n.unsetScrollLoad();var b={matchType:s,needSaleTicket:!0,needUser:!0,needAccess:!0,pageNum:q,pageSize:r};o.getPlanList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&n.setScrollLoad(i);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#planList").append(p.planList(f)):$("#planList").html(p.planList(f)),$("#planList .userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d){var f=l.getLoginUser(),g=trim(f&&f.userNo||""),h=g?"?spreaderUserNo="+g:"",i={title:d,link:location.href.replace(/[#\?].*/g,"")+h+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场足球推荐专家",success:function(){m.setShare()},cancel:function(){m.setShare()}};m.showShare(i)}}),$("#planList .userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount"));if(b){var g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};m.showCreateTicketOrder(g)}}),$("#planList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)}),$("#planList .planItem").off().on("click",j)},function(){n.setScrollLoad(i)})}function i(){q++,1==s||2==s?h(!0):3==s&&k(!0)}function j(a){a.preventDefault(),a.stopPropagation();var b,c=trim($(this).attr("planNo")),d=parseInt($(this).attr("amount")),e=trim($(this).attr("access"));if(!(!c||isNaN(d)||0>d)){if("true"==e)return void(1==s||2==s?l.locationUrl("#planDetail&planNo="+c):3==s&&l.locationUrl("#digitalPlanDetail&planNo="+c));1==s||2==s?b=1:3==s&&(b=2);var f={planNo:c,amount:d,planType:b};m.showCreateOrder(f)}}function k(a){n.unsetScrollLoad();var b={needSaleTicket:!0,needUser:!0,needAccess:!0,lotteryId:"FC3D",pageNum:q,pageSize:r};o.getDigitalPlanList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&n.setScrollLoad(i);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e};a?$("#planList").append(p.digitalPlanList(f)):$("#planList").html(p.digitalPlanList(f)),$("#planList .userShare").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo")),c=trim($(this).attr("planNo")),d=trim($(this).attr("userName")),e=trim($(this).attr("userImg"));if(c&&b&&d){var f=l.getLoginUser(),g=trim(f&&f.userNo||""),h=g?"?spreaderUserNo="+g:"",i={title:d,link:location.href.replace(/[#\?].*/g,"")+h+"#userDetail&userNo="+b,imgUrl:e,desc:"晒米场3D推荐专家",success:function(){m.setShare()},cancel:function(){m.setShare()}};m.showShare(i)}}),$("#planList .userTicket").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("recommendCount")),d=parseInt($(this).attr("planAmount"));if(b){var e={planNo:b,recommendCount:c,planAmount:d};m.showCreateDigitalTicketOrder(e)}}),$("#planList .userProfile").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)}),$("#planList .planItem").off().on("click",j)},function(){n.setScrollLoad(i)})}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/plan"),p=a("view/ticketFollow"),q=null,r=null,s=null}),define("controller/ticketOrderDetail",function(a,b){function c(a){q=trim(k.getUrlParam("orderNo"))||"",r=k.getUrlParam("orderTicketList")||!1,k.setHistoryBack("#myBet"),e(a),f()}function d(a){q=null,r=null,i()}function e(a){var b={title:r?"出票详情":"我的跟单",className:"myDocumentary",showHeader:!0,isOrderTicketListHeader:!!r};m.setMain(a,b),$("#pageHeader .leftIcon_header").on("click",function(a){k.isAndroidBrowser()?window.Jockey&&window.Jockey.send("closeWindow"):k.isIosBrowser()&&k.isIos()&&k.locationUrl("#myBet")})}function f(){r?($("#goBack").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),k.locationUrl("#ticketOrderDetail&orderNo="+q)}),j()):g()}function g(){if(q){var a={orderNo:q,type:1};o.getTicketOrderInfo(a,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data||{},c={ticketOrder:b,Object:Object};m.setContent(p.ticketOrder(c)),$("#showTicketImg").on("click",h),$("#showTicketDetail").on("click",function(){k.locationUrl("#ticketOrderDetail&orderTicketList=true&orderNo="+q)})})}}function h(){var a=trim($(this).attr("resourceList"))||"";if(a&&(a=a.split("|")),k.isWeixinBrowser()){var b=[];if($.each(a,function(a,c){c&&b.push(c)}),b.length>0){var c=b[0]||"";n.call("previewImage",{current:c,urls:b})}}else{i();var d=[];$.each(a,function(a,b){b&&d.push('<img class="img-responsive" src="'+b+'"/>')});var e={length:d.length,html:d.join("</br>")};$("body").append(p.previewImage(e)),$("#showImg").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),i()})}}function i(){$("#showImg").remove()}function j(){if(q){var a={orderNo:q};o.getOrderTicketList(a,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data.orderNumeric||"",c=a.data&&a.data.list||[],d={list:c,orderNumeric:b};m.setContent(p.orderTicketList(d)),$(".showTicketCode").on("click",function(){var a=trim($(this).attr("printNo"));a&&l.showAlert("出票码：<br />"+a)})})}}b.init=c,b._init=d;var k=a("module/common");k.isAndroid()&&a("external/jockey");var l=a("module/ui"),m=a("module/main"),n=a("module/weixin"),o=a("cgi/order"),p=a("view/ticketOrderDetail"),q=null,r=null}),define("controller/ticketSuccess",function(a,b){function c(a){return m=trim(h.getUrlParam("orderNo"))||"",o=trim(h.getUrlParam("orderBatchNo"))||"",n=decodeURIComponent(trim(h.getUrlParam("continueHash")))||"",/^#[^#\?]*$/.test(n)?(e(a),void f()):void i.showNotice("continueHash参数有误")}function d(a){m=null,n=null,o=null}function e(a){var b={title:"支付成功",className:"betSucess",showHeader:!0,isSimpleHeader:!0},c={IMG_PATH:IMG_PATH};j.setMain(a,b),j.setContent(l.content(c)),$("#continueBet").on("click",function(){o||"#createTicketOrder"==n||-1!=n.indexOf("type")?history.go(-2):"#fc3d"==n.split("&")[0]?h.locationUrl("#fc3d"):h.locationUrl(n)}),$("#checkDetail").on("click",function(){o?h.locationUrl("#myBet"):h.locationUrl("#ticketOrderDetail&orderNo="+m)}),$("#backHome").on("click",function(){h.locationUrl("#home")})}function f(){g()}function g(){var a={orderNo:m};k.getTicketOrderInfo(a,function(a){if(0!=a.errCode)return void i.showNotice(a.msg);var b=a.data||{},c=b.userCouponAmount/100||"";c?$("#couponTxt").show():$("#couponTxt").hide(),$("#couponAmount").html(c)})}b.init=c,b._init=d;var h=a("module/common"),i=a("module/ui"),j=a("module/main"),k=a("cgi/order"),l=a("view/ticketSuccess"),m=null,n=null,o=null}),define("controller/userDetail",function(a,b){function c(a){B=trim(s.getUrlParam("userNo"))||"",C=parseInt(s.getUrlParam("tab"))||1,D=1,E=8,e(a),f()}function d(a){B=null,C=null,D=null,E=null,F=null}function e(a){var b={className:"readExpert"};u.setMain(a,b),u.setContent(A.content()),$("#backBtn").click(function(a){s.historyBack()}),$("#homeBtn").click(function(a){s.locationUrl("#home")})}function f(){g(),p()}function g(){var a={userNo:B};w.getUserInfo(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);var b=a.data||{},c=trim(b.realName)||"",d=trim(b.nickName)||"",e=trim(b.profileImg)||"",f=trim(b.personalImg)||"",g=trim(b.remark)||"",h=f||e||IMG_PATH+"user_profile.png",i=c||d,j=(b.tag,parseInt(b.continueWin)||0),l=parseInt(b.winCount)||0,p=parseInt(b.profitRate)||0,q=parseInt(b.winRate)||0,r=parseInt(b.focusStatus)||0;F=b.userRight||{},1==r?$("#focus").removeClass("active").html("+关注").off().on("click",n).show():2==r&&$("#focus").addClass("active").html("已关注").off().on("click",o).show(),!isNaN(j)&&j>1?($("#continueWin").html(j),$("#continueWinBox").show()):!isNaN(l)&&l>0?($("#winCount").html(l),$("#winCountBox").show()):!isNaN(p)&&p>0?($("#profitRate").html(p),$("#profitRateBox").show()):!isNaN(q)&&q>0&&($("#winRate").html(q),$("#winRateBox").show()),$("#userImg").attr("src",h),$("#userImg").on("click",m),$("#userName").html(i),g?($("#moreUserRemark").show(),g.length>50&&$("#userRemarkBox").removeClass("active")):$("#moreUserRemark").hide(),$("#moreUserRemark").on("click",function(a){$("#userRemarkBox").toggleClass("active")}),$("#userRemark").html(g);var b=s.getLoginUser(),u=trim(b&&b.userNo||""),v=u?"?spreaderUserNo="+u:"",w={title:i,link:location.href.replace(/[#\?].*/g,"")+v+"#userDetail&userNo="+B,imgUrl:h,desc:g+"|晒米场"};t.setShare(w),k()})}function h(){}function i(a){u.unsetScrollLoad(),h=function(){D++,i(!0)};var b=0,c=0;1==C?b=4:2==C?(b=3,c=1):3==C&&(b=3,c=2);var d={userNo:trim(B),matchStatus:b||4,needAccess:!0,pageNum:D,pageSize:E,recommendType:c};x.getPlanList(d,function(b){if(0!=b.errCode)return void t.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/E);d>D&&u.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e,IMG_PATH:IMG_PATH};a?$("#planList").append(A.planList(f)):$("#planList").html(A.planList(f)),$("#planList .planItem").off().on("click",l),D>=d&&(D=1,E=8,q()),$(".bet_btn").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount")),g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};t.showCreateTicketOrder(g)})},function(){u.setScrollLoad(h)})}function j(){var a=0;if(2==C?a=1:3==C&&(a=2),0>=a)return void $("#planTrendChartBox").hide().html("");var b={userNo:trim(B),recommendType:a};x.getPlanTrendList(b,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);var b=a.data&&a.data.list||[];if(b.length<=0)return void $("#planTrendChartBox").hide().html("");var c=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]<0?yobj={value:a[c],itemStyle:{normal:{color:"#424e67"}}}:yobj={value:a[c],itemStyle:{normal:{color:"#f8645c"}}},b.push(yobj);return b};$("#planTrendChartBox").show().html(A.planTrendChartBox());var d=$(".chart_box .chart_head"),e=$(".chart_wrap");d.off().on("click",function(a){var b=$(this).find(".arrow").eq(0),c=/arrow_down/.test(b.attr("class"));d.find(".arrow_up").attr("class","arrow arrow_down"),e.hide(),c&&(b.attr("class","arrow arrow_up"),e.show())});var f=echarts.init(document.getElementById("planTrendChart")),g={grid:{top:40,right:30,bottom:40,left:30},xAxis:{name:"近20场",nameLocation:"middle",nameGap:20,type:"category",boundaryGap:!1,axisLabel:{show:!1,interval:0},axisTick:{show:!1},axisLine:{lineStyle:{color:"#666666"}}},yAxis:{type:"value",name:"红",nameTextStyle:{color:"#f63946"},interval:5,axisLabel:{formatter:"{value}"},axisTick:{show:!1},nameLocation:"end",axisLine:{lineStyle:{color:"#666666"}}},series:[{name:"连红",type:"line",smooth:!0,symbol:"circle",symbolSize:7,label:{normal:{show:!0,position:"bottom"}},lineStyle:{normal:{color:"#54b6ea",width:1}},data:c(b),markPoint:{data:[{name:"连红",type:"max",symbolSize:30,itemStyle:{normal:{color:"#f8645c"}}},{name:"连黑",type:"min",symbolSize:30,itemStyle:{normal:{color:"#424e67"}}}]}}]};f.setOption(g)})}function k(){var a={userRight:F};$("#tabBox").html(A.tabBox(a));var b=$("#tabBox .ui-flex_item");b.on("click",function(a){$("#noMatch").hide(),$("#replayList").hide(),b.removeClass("active"),$(this).addClass("active"),C=parseInt($(this).attr("tab")),D=1,E=8,F[1]?(j(),i()):F[3]&&r()});var c=-1;b.each(function(a,b){var d=parseInt($(this).attr("tab"));return d==C?void(c=a):void 0}),0>c&&(c=0);var d=b.eq(c);d.click()}function l(a){a.preventDefault(),a.stopPropagation();var b=function(){B&&C&&s.setHistoryBack("#userDetail&userNo="+B+"&tab="+C)},c=trim($(this).attr("planNo")),d=parseInt($(this).attr("amount")),e=trim($(this).attr("access"));if(!(!c||isNaN(d)||0>d)){if("true"==e)return F[1]?s.locationUrl("#planDetail&planNo="+c):F[3]&&s.locationUrl("#digitalPlanDetail&planNo="+c),void b();F[1]?planType=1:F[3]&&(planType=2);var f={planNo:c,amount:d,callback:b,planType:planType};t.showCreateOrder(f)}}function m(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("src"))||"",c=[b];v.call("previewImage",{current:b,urls:c})}function n(){var a={userNo:B};t.showConfirm("关注专家，同时关注“晒米场”微信公共号，您的微信将在第一时间收到专家推荐的更新通知。如果您觉得骚扰，可以取消关注该专家。",function(){y.createFocus(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);a.data||{};t.showNotice("添加关注成功"),t.closeConfirm(),g()})},function(){})}function o(){var a={userNo:B};t.showConfirm("您将收不到专家推荐的更新通知。您确认取消关注吗？",function(){y.cancelFocus(a,function(a){if(0!=a.errCode)return void t.showNotice(a.msg);a.data||{};t.showNotice("取消关注成功"),t.closeConfirm(),g()})},function(){})}function p(){var a={userNo:B};y.activeFocus(a)}function q(a){u.unsetScrollLoad(),h=function(){D++,q(!0)};var b={pageNum:D,pageSize:E,userNo:trim(B)};z.getReplayList(b,function(b){if(0!=b.errCode)return void t.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/E);d>D&&u.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e};a?$("#replayList").append(A.replayList(f)):$("#replayList").html(A.replayList(f)),$("#replayList .replayItem").off().on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("replayNo"));b&&b&&s.locationUrl("#replayDetail&replayNo="+b)});var g=$("#planList").children().length,i=$("#replayList").children().length;i>0?$("#replayList").show():0>=g&&(F[3]&&$("#default_img").removeClass("default").addClass("digital_default"),$("#noMatch").show())},function(){u.setScrollLoad(h)})}function r(a){u.unsetScrollLoad(),h=function(){D++,r(!0)};var b=0;1==C?b=1:2==C&&(b=2);var c={userNo:trim(B),planStatus:b||1,needAccess:!0,pageNum:D,pageSize:E};x.getDigitalPlanList(c,function(b){if(0!=b.errCode)return void t.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/E);d>D&&u.setScrollLoad(h);var e=b.data&&b.data.list||[],f={list:e,IMG_PATH:IMG_PATH};a?$("#planList").append(A.digitalPlanList(f)):$("#planList").html(A.digitalPlanList(f)),$("#planList .planItem").off().on("click",l),D>=d&&(D=1,E=8,q()),$(".bet_btn").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("planNo")),c=parseInt($(this).attr("matchNum")),d=parseFloat($(this).attr("maxBettypeOdds")),e=parseInt($(this).attr("recommendCount")),f=parseInt($(this).attr("planAmount")),g={planNo:b,matchNum:c,maxBettypeOdds:d,recommendCount:e,planAmount:f};t.showCreateDigitalTicketOrder(g)})},function(){u.setScrollLoad(h)})}b.init=c,b._init=d,a("external/echarts");var s=a("module/common"),t=a("module/ui"),u=a("module/main"),v=a("module/weixin"),w=a("cgi/user"),x=a("cgi/plan"),y=a("cgi/focus"),z=a("cgi/replay"),A=a("view/userDetail"),B=null,C=null,D=null,E=null,F=null}),define("controller/userList",function(a,b){function c(a){n=trim(i.getUrlParam("groupNo")),i.setHistoryBack("#home"),e(a),f()}function d(a){n=null}function e(a){var b={title:"专家",className:"expert",showHeader:!0,rightButtonText:"我要申请",rightButtonFun:function(){i.locationUrl("#userVerify")}};k.setMain(a,b),k.setContent(m.content())}function f(){g()}function g(){var a={pageNum:1,pageSize:10};l.getGroupList(a,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data&&a.data.list||[],c={list:b};$("#groupList").html(m.groupList(c));var d=$("#groupList .item");d.on("click",function(a){$("#groupList .item").removeClass("active"),$(this).addClass("active");var b=trim($(this).attr("groupNo"));h(b)});var e=-1;d.each(function(a,b){var c=trim($(this).attr("groupNo"));return c==n?void(e=a):void 0}),0>e&&(e=0);var f=d.eq(e);f.click();var g=f.position();$("#groupList").scrollLeft(g.left)})}function h(a){if(a=trim(a)){var b={groupNo:a,pageNum:1,pageSize:200};l.getUserList(b,function(a){if(0!=a.errCode)return void j.showNotice(a.msg);var b=a.data&&a.data.list||[],c=b.length||0,d=4-c%4;4==d&&(d=0);for(var e=0;d>e;e++)b.push({nickName:"",profileImg:IMG_PATH+"user_default.png"});var f={IMG_PATH:IMG_PATH,list:b};$("#userList").html(m.userList(f)),$("#userList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&i.locationUrl("#userDetail&userNo="+b)})})}}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/user"),m=a("view/userList"),n=null}),define("controller/userRankList",function(a,b){function c(a){s=parseInt(l.getUrlParam("type"))||0,q=1,r=15,e(a),f()}function d(a){q=null,r=null,s=null}function e(a){var b={title:"红人榜",className:"redman",showHeader:!0,isUserRankHeader:!0};n.setMain(a,b),n.setContent(p.content())}function f(){g()}function g(){var a=$("#userRankTab span");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),q=1,r=15,s=parseInt($(this).attr("type"))||1,1==s?(n.setContent(p.userRankListBox()),i()):2==s?(n.setContent(p.winRateRankListBox()),j()):3==s&&(n.setContent(p.profitRateRankListBox()),k())});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("type"))||0;return s==d?void(b=a):void 0}),0>b&&(b=0),a.eq(b).click()}function h(){}function i(a){h=function(){q++,i(!0)},n.unsetScrollLoad();var b={pageNum:q,pageSize:r};o.getUserRankList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&n.setScrollLoad(h);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e,pageNum:q,pageSize:r};a?$("#userRankList").append(p.userRankList(f)):$("#userRankList").html(p.userRankList(f)),$("#userRankList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)})},function(){n.setScrollLoad(h)})}function j(a){h=function(){q++,j(!0)},n.unsetScrollLoad();var b={pageNum:q,pageSize:r};o.getWinRateRankList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&n.setScrollLoad(h);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e,pageNum:q,pageSize:r};a?$("#winRateRankList").append(p.winRateRankList(f)):$("#winRateRankList").html(p.winRateRankList(f)),$("#winRateRankList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)})},function(){n.setScrollLoad(h)})}function k(a){h=function(){q++,k(!0)},n.unsetScrollLoad();var b={pageNum:q,pageSize:r};o.getProfitRateRankList(b,function(b){if(0!=b.errCode)return void m.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/r);d>q&&n.setScrollLoad(h);var e=b.data&&b.data.list||[],f={IMG_PATH:IMG_PATH,list:e,pageNum:q,pageSize:r};a?$("#profitRateRankList").append(p.profitRateRankList(f)):$("#profitRateRankList").html(p.profitRateRankList(f)),$("#profitRateRankList [userNo]").on("click",function(a){var b=trim($(this).attr("userNo"));b&&l.locationUrl("#userDetail&userNo="+b)})},function(){n.setScrollLoad(h)})}b.init=c,b._init=d;var l=a("module/common"),m=a("module/ui"),n=a("module/main"),o=a("cgi/user"),p=a("view/userRankList"),q=null,r=null,s=null}),define("controller/userVerify",function(a,b){function c(a){x=parseInt(q.getUrlParam("type"))||1,y=[],z=[],q.setHistoryBack("#userList"),e(a),f()}function d(a){x=null,y=null,z=null,clearTimeout(m.timer)}function e(a){var b={title:"",className:"apply",showHeader:!0,isUserVerifyHeader:!0};s.setMain(a,b);var c=$("#userVerifyTab span");c.on("click",function(a){c.removeClass("active"),$(this).addClass("active");var b=parseInt($(this).attr("type"))||0;1==b?g():2==b&&h()});var d=-1;c.each(function(a,b){var c=parseInt($(this).attr("type"))||0;return x==c?void(d=a):void 0}),0>d&&(d=0),c.eq(d).click()}function f(){}function g(){clearTimeout(m.timer),y=[],z=[],s.setContent(w.zhuanjia()),q.isWeixinBrowser()?$("#identitySelectBox,#identitySelectedBox").on("click",j):$("#identitySelect,#identitySelected").on("change",l).show(),$("#smsCodeBtn").on("click",n),$("#userVerifySubmit").on("click",i)}function h(){clearTimeout(m.timer),y=[],z=[],s.setContent(w.zhanzhang()),q.isWeixinBrowser()?$("#identitySelectBox,#identitySelectedBox,#businessSelectBox,#businessSelectedBox").on("click",j):$("#identitySelect,#identitySelected,#businessSelect,#businessSelected").on("change",l).show(),$("#smsCodeBtn").on("click",n),$("#userVerifySubmit").on("click",i)}function i(a){var b=parseInt($(this).attr("type"))||0,c=trim($("#realName").val()),d=trim($("#phone").val()),e=trim($("#smsCode").val()),f=trim($("#remark").val()),g=trim($("#address").val()),h=y.length||0,i=z.length||0,j=$("#protocol")[0].checked;if(1!=b&&2!=b)return void r.showNotice("申请类型有误");if(""==c)return void r.showNotice("姓名不能为空");if(""==d)return void(1==b?r.showNotice("手机号码不能为空"):2==b&&r.showNotice("联系电话不能为空"));if(6!=e.length||/\D/.test(e))return void r.showNotice("输入的验证码有误");if(0>=h)return void r.showNotice("请选择身份证正面照片");if(2==b&&""==g)return void r.showNotice("彩票站点地址不能为空");if(2==b&&0>=i)return void r.showNotice("请选择营业执照");if(1==b&&""==f)return void r.showNotice("简介不能为空");if(!j)return void(1==b?r.showNotice("请阅读并同意专家协议"):2==b&&r.showNotice("请阅读并同意站长协议"));var k=0,l=h+i,m=function(a){k==l&&(r.closeLoading(),u.createUserVerify(a,function(a){return 0!=a.errCode?void r.showNotice(a.msg):(r.showNotice("申请提交成功，请耐心等待审核"),void setTimeout(function(){$("#userVerifyTab span.active").eq(0).click()},1e3))}))},n={type:b,realName:c,phone:d,code:e,remark:f,address:g},o=1e4;if(l>0&&(o=10*l*1e3),r.showLoading(o),q.isWeixinBrowser()){var p=[];$.each(y,function(a,b){t.call("uploadImage",{localId:b,isShowProgressTips:0,success:function(a){
var b=a.serverId;k++,p.push(b),p.length==h&&(n.identityImg=p,m(n))}})});var s=[];$.each(z,function(a,b){t.call("uploadImage",{localId:b,isShowProgressTips:0,success:function(a){var b=a.serverId;k++,s.push(b),s.length==i&&(n.businessImg=s,m(n))}})})}else{var p=[];$.each(y,function(a,b){lrz(b).then(function(a){k++,p.push(a.file),p.length==h&&(n.identityImg=p,m(n))})});var s=[];$.each(z,function(a,b){lrz(b).then(function(a){k++,s.push(a.file),s.length==i&&(n.businessImg=s,m(n))})})}}function j(a){var b=trim(this.id),c="";if(/identity/.test(b))c="identity";else{if(!/business/.test(b))return;c="business"}t.call("chooseImage",{count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){var b=[],d=a.localIds,e=[];$.each(d,function(a,d){e.push('<img class="planpicSmall licensePreview" src="'+d+'" prefix="'+c+'"/>'),b.push(d)});var f=b.length;if(!(0>=f)){$("#"+c+"List").html(e.join("")),$("#"+c+"List .planpicSmall").on("click",k);var g=$("#"+c+"SelectBox"),h=$("#"+c+"SelectedBox");f>0?(g.hide(),h.show()):(h.hide(),g.show()),"identity"==c?y=b:"business"==c&&(z=b)}}})}function k(a){a.preventDefault(),a.stopPropagation();var b=trim($(this).attr("prefix"))||"",c=[];if("identity"==b)c=y;else{if("business"!=b)return;c=z}var d=trim($(this).attr("src"))||c[0]||"";t.call("previewImage",{current:d,urls:c})}function l(a){var b=trim(this.id),c="";if(/identity/.test(b))c="identity";else{if(!/business/.test(b))return;c="business"}var d=[],e={gif:!0,jpg:!0,jpeg:!0,png:!0},f=a.target.files||[];$.each(f,function(a,b){if(b.type)/\bimage\b/i.test(b.type)&&d.push(b);else{var c=trim(b.name),f=c.lastIndexOf(".");if(-1!=f){var g=c.substr(f+1).toLowerCase();e[g]&&d.push(b)}}});var g=d.length;if(!(0>=g)){var h=[],i=0,j=function(a){i++,h.push('<img class="planpicSmall licensePreview" src="'+a.target.result+'"/>'),i==g&&$("#"+c+"List").html(h.join(""))};$.each(d,function(a,b){var c=new FileReader;c.onload=j,c.readAsDataURL(b)});var k=$("#"+c+"SelectBox"),l=$("#"+c+"SelectedBox");g>0?(k.hide(),l.show()):(l.hide(),k.show()),"identity"==c?y=d:"business"==c&&(z=d)}}function m(){var a=trim($("#phone").val())||"",b=trim($("#validate").val())||"";if(!q.verifyMobile(a))return void r.showNotice("输入的手机号码有误");var c={mobile:a,code:b};v.sendSmsCode(c,function(a){if(0!=a.errCode)return void r.showNotice(a.msg);$("#smsCodeBtn").off();var b=60,c=function(){b--,b>0?($("#smsCodeBtn").html("倒计时("+b+")"),m.timer=setTimeout(c,1e3)):$("#smsCodeBtn").html("重新获取").on("click",n)};c(),o()})}function n(){var a=trim($("#phone").val())||"";if(!q.verifyMobile(a))return void r.showNotice("输入的手机号码有误");o();var b={IMG_PATH:IMG_PATH};$("#pageContainer").append(w.confirm(b)),$("#sureBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),m()}),$("#cancelBtn").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),o()}),p(),$("#validateImage").on("click",function(){p()})}function o(){$("#confirmBox").remove()}function p(){$("#validateImage").attr("src",PROXY+"?c=verificationCode&m=image&_"+(new Date).getTime())}b.init=c,b._init=d,a("external/localResizeIMG");var q=a("module/common"),r=a("module/ui"),s=a("module/main"),t=a("module/weixin"),u=a("cgi/user"),v=a("cgi/sms"),w=a("view/userVerify"),x=null,y=null,z=null}),define("controller/userVerifyProtocol",function(a,b){function c(a){j=parseInt(g.getUrlParam("type"))||1,e(a),f()}function d(a){j=null}function e(a){var b={title:"协议",className:"ageement",showHeader:!0};h.setMain(a,b),h.setContent(i.content({type:j}))}function f(){}b.init=c,b._init=d;var g=a("module/common"),h=(a("module/ui"),a("module/main")),i=a("view/userVerifyProtocol"),j=null}),define("controller/withdraw",function(a,b){function c(a){p=parseInt(k.getUrlParam("financeType"))||0,k.setHistoryBack("#my"),e(a),f()}function d(a){p=null}function e(a){var b={title:0==p?"收米":"",className:"takein",showHeader:!0,isWithdrawHeader:!0,rightButtonText:"提款记录",rightButtonFun:function(){k.locationUrl("#withdrawList&financeType="+p)}};m.setMain(a,b)}function f(){i(),g()}function g(){var a=$("#withdrawTab [financeType]");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),p=parseInt($(this).attr("financeType"));var c={financeType:p};m.setContent(o.content(c)),$("#withdrawSubmit").on("click",h),$("#amount").on("input",function(a){var b=parseFloat(this.value)||0;$("#amountPrice").html(b)}),j()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("financeType"));return d==p?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(){if(p=parseInt(p),!isNaN(p)){var a=parseFloat($("#userFinance").html())||0,b=100*(parseFloat($("#amount").val())||0),c=trim($("#accountNumber").val()),d=trim($("#accountName").val()),e=trim($("#accountUserName").val()),f=trim($("#accountInfo").val());if(isNaN(a)||0>=a)return void(0==p?l.showNotice("您当前没有可收米数"):1==p&&l.showNotice("您当前没有可提彩金"));if(isNaN(b)||0>=b)return void(0==p?l.showNotice("请填写正确的收米数量"):1==p&&l.showNotice("请填写正确的彩金数量"));if(0==p&&1e4>b)return void l.showNotice("收米数量不能小于100");if(0==p&&b>1e6)return void l.showNotice("收米数量不能大于10000");if(1==p&&2e3>b)return void l.showNotice("彩金提款，最低20元");if(""==d)return void(0==p?l.showNotice("请选择银行"):1==p&&l.showNotice("支付宝姓名不能为空"));if(""==e)return void l.showNotice("银行户名不能为空");if(""==c)return void(0==p?l.showNotice("银行卡号不能为空"):1==p&&l.showNotice("支付宝账号不能为空"));if(""==f)return void l.showNotice("支行分行信息不能为空");var g={financeType:p,amount:b,accountNumber:c,accountName:d,accountUserName:e,accountInfo:f,accountType:0==p?"3":""};n.withdraw(g,function(a){return 0!=a.errCode?void l.showNotice(a.msg):void l.showAlert("您的提款提交成功。",function(){$("#amount").val(""),$("#accountNumber").val(""),$("#accountName").val(""),$("#amountPrice").html(0),$("#accountUserName").val(""),$("#accountInfo").val(""),j()})})}}function i(){var a={};n.getUserInfo(a,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data||{},c=b.isABT;c&&$("#withdrawTab").show()})}function j(){var a={financeType:p};n.getUserFinanceInfo(a,function(a){if(0!=a.errCode)return void l.showNotice(a.msg);var b=a.data||{},c=(parseInt(b.incomeAmount)||0)/100;$("#userFinance").html(c)})}b.init=c,b._init=d;var k=a("module/common"),l=a("module/ui"),m=a("module/main"),n=a("cgi/user"),o=a("view/withdraw"),p=null}),define("controller/withdrawList",function(a,b){function c(a){n=parseInt(i.getUrlParam("financeType"))||0,o=1,p=15,i.setHistoryBack("#withdraw&financeType="+n),e(a),f()}function d(a){n=null,o=null,p=null}function e(a){var b={title:"提款记录",className:"moneyNode",showHeader:!0};k.setMain(a,b);var c={};k.setContent(m.content(c))}function f(){h()}function g(){o++,h(!0)}function h(a){k.unsetScrollLoad();var b={financeType:n,pageNum:o,pageSize:p};l.getWithdrawList(b,function(b){if(0!=b.errCode)return void j.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/p);d>o&&k.setScrollLoad(g);var e=b.data&&b.data.list||[],f={list:e};a?$("#withdrawList").append(m.withdrawList(f)):$("#withdrawList").html(m.withdrawList(f)),$("#withdrawList [remark]").off().on("click",function(a){var b=trim($(this).attr("remark"))||"";b&&j.showAlert(b)})},function(){k.setScrollLoad(g)})}b.init=c,b._init=d;var i=a("module/common"),j=a("module/ui"),k=a("module/main"),l=a("cgi/finance"),m=a("view/withdrawList"),n=null,o=null,p=null}),define("controller/worldCup2018",function(a,b){function c(a){w=parseInt(o.getUrlParam("tab"))||1,u=1,v=100,o.setHistoryBack("#lotteryHall"),e(a),f()}function d(a){u=null,v=null,w=null,x=null,y=null}function e(a){var b={title:"2018世界杯冠军",className:"worldCup2018",showHeader:!0,isLeftIconHeader:!0};q.setMain(a,b),q.setContent(t.content()),$("#betBtn").off().on("click",n)}function f(){g()}function g(){var a=$("#navTab div");a.on("click",function(b){a.removeClass("active"),$(this).addClass("active"),w=parseInt($(this).attr("tab"))||1,u=1,v=100,x=[],y=[],$("#countUnit").html("0"),$("#ticketAmount,#maxPrice").html("0元"),h(),2==w?($("#filterList").show(),j()):$("#filterList").hide()});var b=-1;a.each(function(a,c){var d=parseInt($(this).attr("tab"))||0;return d==w?void(b=a):void 0}),0>b&&(b=0);var c=a.eq(b);c.click()}function h(a){q.unsetScrollLoad();var b;1==w?b="SJBGJ":2==w&&(b="SJBGYJ");var c={lotteryId:b,pageNum:u,pageSize:v};r.getGuessList(c,function(b){if(0!=b.errCode)return void p.showNotice(b.msg);var c=b.data&&b.data.totalCount||0,d=Math.ceil(c/v);d>u&&q.setScrollLoad(i);var e=b.data&&b.data.list||[],f={list:e};a?$("#matchList").append(t.matchList(f)):$("#matchList").html(t.matchList(f)),$("#matchList .team_item").off().on("click",function(a){var b=$(this).children("span").eq(1).text(),c=$(this).attr("oddsId");1==$(this).hasClass("active")?($(this).removeClass("active"),x.splice($.inArray(b,x),1),y.splice($.inArray(c,y),1)):($(this).addClass("active"),x.push(b),y.push(c)),l()})},function(){q.setScrollLoad(i)})}function i(){u++,h(!0)}function j(){var a={};r.getGuessTeamList(a,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data||[],c={list:b};$("#filterList").html(t.filterList(c)),k()})}function k(){var a=[];$("#filterList li").off().on("click",function(){var b=$(this).attr("filterName"),c=$("#matchList li.team_item");if(1!=$(this).hasClass("active")){$(this).addClass("active"),a.push(b);for(var d=0;d<c.length;d++){var e=$(c[d]).children(".team_name").text(),f=$(c[d]).attr("team2"),g=$(c[d]).children(".odds").text();e.indexOf(b)>-1&&-1==$.inArray($(c[d]).attr("oddsId"),y)&&(x.push(g),y.push($(c[d]).attr("oddsId")),$(c[d]).addClass("active"))}}else{$(this).removeClass("active"),a.splice($.inArray(b,a),1);for(var h=$("#matchList li.active"),i=0;i<h.length;i++){var j=$(h[i]).attr("team1"),f=$(h[i]).attr("team2"),e=$(h[i]).children(".team_name").text(),g=$(h[i]).attr("odds");e.indexOf(b)>-1&&-1==$.inArray(j,a)&&-1==$.inArray(f,a)&&(-1!=$.inArray($(h[i]).attr("oddsId"),y)&&(x.splice($.inArray(g,x),1),y.splice($.inArray($(h[i]).attr("oddsId"),y),1)),$(h[i]).removeClass("active"))}}l()})}function l(){$("#ticketMultiple").off().on("input",m).trigger("input")}function m(a){var b=$("#matchList li.active"),c=parseInt(b.length),d=parseInt($("#ticketMultiple").val())||0;d=1>d?1:d,d=d>1e5?1e5:d;var e,f=d*c*2;e=x.length>0?(Math.max.apply(null,x)*d*2).toFixed(2):"0.00",$("#ticketMultiple").val(d),$("#countUnit").html(c),$("#ticketAmount").html(f+"元"),$("#maxPrice").html(e)}function n(){var a=parseInt($("#ticketAmount").html().replace(/\D/g,"")||0),b=parseInt($("#ticketMultiple").val()||0),c=y.length;if(0>=c)return void p.showNotice("请选择比赛");if(isNaN(a)||0>=a)return void p.showNotice("金额有误");if(isNaN(b)||0>=b)return void p.showNotice("请输入正整倍数");if(b>1e5)return void p.showNotice("您输入的倍数过大，请重新输入");var d=[],e="";1==w?e="SJBGJ":2==w&&(e="SJBGYJ");for(var f=0;c>f;f++){var g=y[f];d.push({oddsId:g})}d=JSON.stringify(d),options={ticketMultiple:b,matchRecommend:d,lotteryId:e},s.createGuessOrder(options,function(a){if(0!=a.errCode)return void p.showNotice(a.msg);var b=a.data||{},c=trim(b.orderNo),d=trim(b.payUrl);c?d?setTimeout(function(){o.locationUrl(d)},1e3):setTimeout(function(){var a=encodeURIComponent(o.getLocationHash());o.locationUrl("#ticketSuccess&orderNo="+c+"&continueHash="+a)},1e3):p.showNotice("支付失败")})}b.init=c,b._init=d;var o=a("module/common"),p=a("module/ui"),q=a("module/main"),r=a("cgi/match"),s=a("cgi/order"),t=a("view/worldCup2018"),u=null,v=null,w=null,x=null,y=null});
//# sourceMappingURL=debug/controller.js.map